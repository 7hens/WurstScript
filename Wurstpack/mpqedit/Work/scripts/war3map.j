globalstimer Vitem array Xinteger O=0group Iboolexpr Nreal Creal Dreal Freal Gstring array Hstring array jstring array Jstring array Kinteger array lstring array Lgroup m=CreateGroup()boolexpr M=nullboolexpr P=nullboolean Q=falsegroup U=nullgroup array Winteger Y=0real Z=.0real vv=.0real ev=.0hashtable xv=InitHashtable()hashtable ovconstant integer rv=$100000integer iv=rvinteger av=0constant integer nv=$28829022rect Vv=Rect(0,0,0,0)group Ev=CreateGroup()group Xvreal Ovreal Rvreal Ivreal Avreal Nvreal bvhashtable ht=InitHashtable()location Bv=Location(0,0)multiboard cvgroup Cvtrigger dvinteger Dv=0integer fv=0string Fv="EBR 0.64"integer gvtrigger Gvhashtable hv=InitHashtable()hashtable Hv=InitHashtable()hashtable jv=InitHashtable()integer array Jvstring array kvunit array Kvplayer array lvunit Lvinteger array mvboolean array Mvinteger pvconstant real Pv=6398constant real qv=-6791texttag array Qvinteger sv=$2710rect Sv=nullrect tv=nullrect Tv=nullrect uv=nullrect Uv=nullrect wv=nullrect Wv=nullrect yv=nullrect Yv=nullrect zv=nullrect Zv=nullrect ve=nullrect ee=nullrect xe=nullrect oe=nullrect ie=nullrect ae=nullrect ne=nullrect Ve=nullrect Ee=nullrect Xe=nullrect Oe=nullrect Re=nullrect Ie=nullcamerasetup Ae=nullsound Ne=nullsound be=nullsound Be=nullsound ce=nulltrigger Ce=nulltrigger de=nulltrigger De=nullunit fe=nullunit Fe=nullunit ge=nullunit Ge=nullunit he=nullunit He=nullunit je=nullunit Je=nullunit ke=nullunit Ke=nullunit le=nullunit Le=nullunit me=nullunit Me=nullunit pe=nullunit Pe=nullunit qe=nullunit Qe=nullunit se=nullunit Se=nullunit te=nullunit Te=nullunit ue=nullunit Ue=nullunit We=nullunit ye=nullunit Ye=nullunit ze=nullunit Ze=nullunit vx=nullunit ex=nullunit xx=nullunit ox=nullunit rx=nullunit ix=nullunit nx=nullunit Vx=nullunit Ex=nullunit Xx=nullunit Ox=nullunit Rx=nullunit Ix=nullunit Ax=nullunit Nx=nullunit bx=nullunit Bx=nullunit Cx=nullunit Dx=nullunit fx=nullunit Fx=nullunit gx=nullunit Gx=nullunit hx=nullunit Hx=nullunit jx=nullunit Jx=nullunit kx=nullunit Kx=nullunit lx=nullunit Lx=nullunit mx=nullunit Mx=nullunit Px=nullunit Qx=nullunit sx=nullunit Sx=nullunit tx=nullunit Tx=nullunit ux=nullunit Ux=nullunit wx=nullunit Wx=nullunit yx=nullunit Yx=nullunit zx=nullunit Zx=nullunit vo=nullunit eo=nullunit xo=nullunit oo=nullunit io=nullunit ao=nullunit no=nullunit Vo=nullunit Eo=nullunit Xo=nullunit Oo=nullunit Ro=nullunit Io=nullunit Ao=nullinteger array Notrigger bointeger array Bostring array costring array Coconstant integer do=$Bconstant integer Do=$Cinteger array fointeger array Fointeger array gorect array Gointeger array hounit Ho=nullreal jo=6400real Jo=-6780boolean ko=trueboolean Ko=trueconstant real lo=-6912constant real Lo=-7296real array moreal array Moreal array poreal array Pointeger qo='Cpos'integer Qo='Glvc'integer so='Glav'integer array Soconstant real to=20constant real To=0trigger uoconstant integer Uo=$Dreal woreal Woreal yoreal Younit zounit Zotimer vr=CreateTimer()integer erinteger array xrinteger array rrinteger array irinteger array arstring array nrweathereffect array Vrinteger array Erinteger array Xrinteger array Rrgroup Irunit array Artrigger kttrigger Nrtimer brinteger array Brinteger cr=0trigger Crgroup drunit array Drgroup frtrigger Frinteger array grunit array Grinteger hr=0integer Hr=0texttag jrtexttag Jrinteger kr=0integer Kr=0string lr="Generating Mazes"multiboard Lrsound mrinteger Mr=0integer pr=0integer array Printeger array qrinteger array Qrinteger Sr=0integer Tr=0integer ur=0integer array Urinteger array wrinteger array Wrinteger yr=0integer Yr=0integer array zrinteger array xiinteger oi=0integer ii=0integer array aiconstant integer ni=$28829022integer array Viinteger array Eiinteger Xi=1integer array Oiinteger array Riinteger Ii=0integer Ai=0integer array Niinteger bi=0integer Bi=0integer array ciinteger array Ciinteger array diinteger Di=0integer fi=0integer array Fiplayer array giinteger array Giinteger array histring array Histring array jistring array Jistring array kiinteger array Kiinteger array liinteger array Liboolean array miinteger Mi=0integer pi=0integer array Piinteger array qistring array Qiinteger array siboolean array Siboolean array tiboolean array Tiinteger array uiinteger array Uistring array wiinteger Wi=0integer yi=0integer array Yitimer array zisound array Ziinteger array vaboolean array eainteger xa=0integer oa=0integer array rareal array iainteger array aainteger na=0integer Va=0integer array Eaunit array Xareal array Oareal array Rareal array Iareal array Aareal array Naunit array baboolean array Batrigger array casound array Cainteger array daboolean array Datrigger array faboolean array Fatrigger array gainteger array Gatexttag array hainteger array Hainteger array jainteger array Jainteger ka=0integer Ka=0integer array launit array Lareal array mareal array Mareal array pareal array Pareal array qaeffect array Qainteger array sagroup array Satrigger array tainteger array Tatimer array uareal array Uatimer array watrigger array Wagroup array Yatrigger array zainteger array Zatimer array vninteger array entrigger array xninteger array oninteger array inunit array anunit array nnboolean array Vnboolean array Entrigger array Xninteger array Onreal array Rntimer array Intrigger array Aninteger array Nntrigger array bninteger array Bninteger array cntrigger array Cninteger array dninteger array Dninteger array fninteger array Fninteger array gninteger array Gntimer array hngroup array Hntrigger array jntimer array Jntimer array knrect array Knunit array lninteger array Lnboolean array mninteger array Mninteger array pntimer array Pngroup array qntrigger array Qnlightning array sninteger array Sninteger tn=0integer Tn=0integer array uninteger array Uninteger array wndestructable array Wnunit array yninteger Yn=0integer zn=0integer array Znregion array vVrect array eVplayer array xVtrigger array oVinteger array rVinteger array iVinteger array aVinteger array nVinteger array VVinteger array EVinteger array XVboolean array OVreal array RVreal array IVreal array AVinteger NV=0integer bV=0integer array BVunit array cVplayer array CVinteger array dVinteger array DVtimer array fVeffect array FVeffect array gVinteger array GVtrigger array hVreal array HVboolean array jVboolean array JVtrigger array kVinteger KV=0integer lV=0integer array LVunit array mVreal array MVreal array pVinteger array PVtimer array qVinteger array QVinteger array sVboolean array SVboolean array tVboolean array TVinteger array uVinteger array UVinteger array wVinteger array WVinteger array yVinteger array YVinteger array zVinteger array ZVreal array vEreal array eEreal array xEreal array oEreal array rEreal array iEinteger array aEinteger array nEinteger array VEinteger array EEtrigger array XEinteger array OEtrigger array REtrigger IEtrigger AEtrigger NEtrigger bEtrigger BEtrigger cEtrigger CEtrigger dEtrigger DEtrigger fEtrigger FEtrigger gEtrigger GEtrigger hEtrigger HEtrigger jEtrigger JEtrigger kEtrigger KEtrigger lEtrigger LEtrigger mEtrigger MEtrigger pEtrigger PEtrigger qEtrigger QEtrigger sEtrigger SEtrigger tEtrigger TEtrigger uEtrigger UEtrigger array wEtrigger array WEtrigger array YEtrigger array zEtrigger array ZEinteger vXunit eXreal xXcode oXrect rXgroup iXboolexpr aXsound nXboolean VXboolean EXinteger XXstring OXinteger RXreal IXreal bX=.0real BX=.0group cX=nullboolexpr dX=nullendglobalsfunction fX takes nothing returns booleanlocal real dx=GetDestructableX(GetFilterDestructable())-bXlocal real dy=GetDestructableY(GetFilterDestructable())-BXreturn(dx*dx+dy*dy<=bj_enumDestructableRadius)endfunctionfunction FX takes player gX returns groupset cX=CreateGroup()call GroupEnumUnitsOfPlayer(cX,gX,dX)return cXendfunctionfunction GX takes itemtype hX,integer HX returns nothinglocal group gset bj_stockPickedItemType=hXset bj_stockPickedItemLevel=HXset g=CreateGroup()call GroupEnumUnitsOfType(g,"marketplace",dX)call ForGroup(g,function UpdateEachStockBuildingEnum)call DestroyGroup(g)set g=nullendfunctionfunction jX takes nothing returns nothinglocal integer pickedItemIdlocal itemtype JXlocal integer kX=0local integer KX=0local integer HXset HX=1loopif(bj_stockAllowedPermanent[HX])thenset KX=KX+1if(GetRandomInt(1,KX)==1)thenset JX=ITEM_TYPE_PERMANENTset kX=HXendifendifif(bj_stockAllowedCharged[HX])thenset KX=KX+1if(GetRandomInt(1,KX)==1)thenset JX=ITEM_TYPE_CHARGEDset kX=HXendifendifif(bj_stockAllowedArtifact[HX])thenset KX=KX+1if(GetRandomInt(1,KX)==1)thenset JX=ITEM_TYPE_ARTIFACTset kX=HXendifendifset HX=HX+1exitwhen HX>$Aendloopif(KX==0)thenset JX=nullreturnendifcall GX(JX,kX)set JX=nullendfunctionfunction lX takes nothing returns nothingcall jX()call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INTERVAL,true,function jX)endfunctionfunction mX takes nothing returns booleanreturn trueendfunctionfunction qX takes integer i returns booleanif(i<8191)thenreturn SV[i]elseif(i<$3FFE)thenreturn tV[i-8191]elsereturn TV[i-$3FFE]endifendfunctionfunction QX takes integer i,boolean v returns nothingif(i<8191)thenset SV[i]=velseif(i<$3FFE)thenset tV[i-8191]=velseset TV[i-$3FFE]=vendifendfunctionfunction sX takes integer i returns realif(i<8191)thenreturn vE[i]elseif(i<$3FFE)thenreturn eE[i-8191]elsereturn xE[i-$3FFE]endifendfunctionfunction SX takes integer i,real v returns nothingif(i<8191)thenset vE[i]=velseif(i<$3FFE)thenset eE[i-8191]=velseset xE[i-$3FFE]=vendifendfunctionfunction tX takes integer i returns realif(i<8191)thenreturn oE[i]elseif(i<$3FFE)thenreturn rE[i-8191]elsereturn iE[i-$3FFE]endifendfunctionfunction TX takes integer i,real v returns nothingif(i<8191)thenset oE[i]=velseif(i<$3FFE)thenset rE[i-8191]=velseset iE[i-$3FFE]=vendifendfunctionfunction uX takes integer i returns integerif(i<8191)thenreturn aE[i]elseif(i<$3FFE)thenreturn nE[i-8191]elsereturn VE[i-$3FFE]endifendfunctionfunction UX takes integer i,integer v returns nothingif(i<8191)thenset aE[i]=velseif(i<$3FFE)thenset nE[i-8191]=velseset VE[i-$3FFE]=vendifendfunctionfunction wX takes unit u returns integerset eX=ucall TriggerEvaluate(UE)return RXendfunctionfunction WX takes nothing returns integerlocal integer yX=KVif(yX!=0)thenset KV=LV[yX]elseset lV=lV+1set yX=lVendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Key")return 0endifset LV[yX]=-1return yXendfunctionfunction YX takes integer yX returns nothingif yX==null thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: Key")returnelseif(LV[yX]!=-1)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: Key")returnendifset LV[yX]=KVset KV=yXendfunctionfunction zX takes unit u returns integerset eX=ucall TriggerEvaluate(TE)return RXendfunctionfunction ZX takes nothing returns integerlocal integer yX=NVif(yX!=0)thenset NV=BV[yX]elseset bV=bV+1set yX=bVendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Escaper")return 0endifset DV[yX]=0set GV[yX]=0set BV[yX]=-1return yXendfunctionfunction vO takes rect re returns integerset rX=recall TriggerEvaluate(SE)return RXendfunctionfunction eO takes nothing returns integerlocal integer yX=Ynif(yX!=0)thenset Yn=Zn[yX]elseset zn=zn+1set yX=znendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Region")return 0endifset OV[yX]=falseset RV[yX]=3set IV[yX]=1set AV[yX]=1set Zn[yX]=-1return yXendfunctionfunction xO takes nothing returns integerlocal integer yX=Mrif(yX!=0)thenset Mr=Pr[yX]elseset pr=pr+1set yX=prendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: BigNum_l")return 0endifset Pr[yX]=-1return yXendfunctionfunction oO takes nothing returns integerlocal integer yX=Trif(yX!=0)thenset Tr=Ur[yX]elseset ur=ur+1set yX=urendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: BigNum")return 0endifset Ur[yX]=-1return yXendfunctionfunction aO takes nothing returns integerlocal integer yX=yrif(yX!=0)thenset yr=zr[yX]elseset Yr=Yr+1set yX=Yrendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Bar")return 0endifset xi[yX]=0set zr[yX]=-1return yXendfunctionfunction nO takes nothing returns integerlocal integer yX=oiif(yX!=0)thenset oi=ai[yX]elseset ii=ii+1set yX=iiendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Stack")return 0endifset Vi[yX]=0set Ei[yX]=0set ai[yX]=-1return yXendfunctionfunction VO takes nothing returns integerlocal integer yX=Iiif(yX!=0)thenset Ii=Ni[yX]elseset Ai=Ai+1set yX=Aiendifif(yX>8100)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Table__GTable")return 0endifset EE[yX]=$Aset Ni[yX]=-1return yXendfunctionfunction EO takes nothing returns integerlocal integer yX=VO()local integer XOif(yX==0)thenreturn 0endifset EE[yX]=$Bset XO=yXreturn yXendfunctionfunction s__StringTable__allocate takes nothing returns integerlocal integer yX=VO()local integer XOif(yX==0)thenreturn 0endifset EE[yX]=$Cset XO=yXreturn yXendfunctionfunction s__HandleTable__allocate takes nothing returns integerlocal integer yX=VO()local integer XOif(yX==0)thenreturn 0endifset EE[yX]=$Dset XO=yXreturn yXendfunctionfunction OO takes nothing returns integerlocal integer yX=biif(yX!=0)thenset bi=ci[yX]elseset Bi=Bi+1set yX=Biendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: ConsistentArray")return 0endifset di[yX]=0set ci[yX]=-1return yXendfunctionfunction RO takes nothing returns integerlocal integer yX=Diif(yX!=0)thenset Di=Fi[yX]elseset fi=fi+1set yX=fiendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: PlayerData")return 0endifset Ji[yX]="Newbie"set Ki[yX]=0set li[yX]=40set Li[yX]=0set mi[yX]=falseset Fi[yX]=-1return yXendfunctionfunction IO takes nothing returns integerlocal integer yX=Miif(yX!=0)thenset Mi=Pi[yX]elseset pi=pi+1set yX=piendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: SoundUtils__soundhelper")return 0endifset Qi[yX]=""set si[yX]=0set Si[yX]=falseset ti[yX]=falseset Ti[yX]=falseset ui[yX]=0set Ui[yX]=0set wi[yX]=""set Pi[yX]=-1return yXendfunctionfunction AO takes nothing returns integerlocal integer yX=Wiif(yX!=0)thenset Wi=Yi[yX]elseset yi=yi+1set yX=yiendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: SoundUtils__soundrecycler")return 0endifset zi[yX]=nullset Zi[yX]=nullset va[yX]=0set ea[yX]=falseset Yi[yX]=-1return yXendfunctionfunction NO takes nothing returns integerlocal integer yX=xaif(yX!=0)thenset xa=ra[yX]elseset oa=oa+1set yX=oaendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Savecode")return 0endifset ra[yX]=-1return yXendfunctionfunction bO takes nothing returns integerlocal integer yX=kaif(yX!=0)thenset ka=la[yX]elseset Ka=Ka+1set yX=Kaendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Jumper__JumpData")return 0endifset pa[yX]=0set Pa[yX]=0set la[yX]=-1return yXendfunctionfunction BO takes unit u,real cO,code c returns integerset eX=uset xX=cOset oX=ccall TriggerEvaluate(CE)return RXendfunctionfunction CO takes integer yX returns realset XX=yXcall TriggerEvaluate(dE)return IXendfunctionfunction dO takes nothing returns integerlocal integer yX=naif(yX!=0)thenset na=Ea[yX]elseset Va=Va+1set yX=Vaendifif(yX>8190)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Baseobject")return 0endifset Na[yX]=.0set ba[yX]=nullset Ba[yX]=trueset OE[yX]=19set Ea[yX]=-1return yXendfunctionfunction DO takes integer yX returns nothingif yX==null thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: Baseobject")returnelseif(Ea[yX]!=-1)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: Baseobject")returnendifset XX=yXcall TriggerEvaluate(RE[OE[yX]])set Ea[yX]=naset na=yXendfunctionfunction fO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(FE)return RXendfunctionfunction FO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=22set XO=yXset Fa[yX]=falseset Ga[yX]=0return yXendfunctionfunction gO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(fE)return RXendfunctionfunction GO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=21set XO=yXreturn yXendfunctionfunction hO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(DE)return RXendfunctionfunction HO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=20set XO=yXset Ca[yX]=nullset da[yX]=1return yXendfunctionfunction jO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=44set XO=yXreturn yXendfunctionfunction JO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(gE)return RXendfunctionfunction kO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=23set XO=yXreturn yXendfunctionfunction KO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(hE)return RXendfunctionfunction lO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=25set XO=yXreturn yXendfunctionfunction LO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(HE)return RXendfunctionfunction mO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=26set XO=yXset Ta[yX]=5return yXendfunctionfunction MO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(jE)return RXendfunctionfunction pO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=27set XO=yXset Ua[yX]=$Areturn yXendfunctionfunction PO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(JE)return RXendfunctionfunction qO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=28set XO=yXset Za[yX]=6return yXendfunctionfunction QO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(kE)return RXendfunctionfunction sO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=29set XO=yXset en[yX]=0set on[yX]=0set in[yX]=0return yXendfunctionfunction SO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(KE)return RXendfunctionfunction tO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=30set XO=yXset Vn[yX]=falseset En[yX]=falsereturn yXendfunctionfunction TO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(lE)return RXendfunctionfunction uO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=31set XO=yXset On[yX]=3set Rn[yX]=5.return yXendfunctionfunction UO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(LE)return RXendfunctionfunction wO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=32set XO=yXset Nn[yX]=$C8return yXendfunctionfunction WO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(mE)return RXendfunctionfunction yO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=33set XO=yXreturn yXendfunctionfunction YO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(ME)return RXendfunctionfunction zO takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=34set XO=yXset dn[yX]=1set Dn[yX]=1return yXendfunctionfunction ZO takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(pE)return RXendfunctionfunction vR takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=35set XO=yXset Ln[yX]=0set mn[yX]=falseset Mn[yX]=6set pn[yX]=0return yXendfunctionfunction eR takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(PE)return RXendfunctionfunction xR takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=36set XO=yXreturn yXendfunctionfunction oR takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(qE)return RXendfunctionfunction rR takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=37if(Tn==0)thenset tn=tn+1set XO=tnif(XO>681)thenset OE[yX]=19call DO(yX)call DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Unable to allocate id for an object of type: Powernode")return 0endifelseset XO=Un[Tn]set Tn=Tn-1endifset un[yX]=XOset Sn[yX]=(XO-1)*$Cset wn[yX]=0return yXendfunctionfunction iR takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(QE)return RXendfunctionfunction aR takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=39set XO=yXreturn yXendfunctionfunction nR takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(sE)return RXendfunctionfunction VR takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=40set XO=yXreturn yXendfunctionfunction ER takes unit u,real cO returns integerset eX=uset xX=cOcall TriggerEvaluate(uE)return RXendfunctionfunction XR takes unit u,real cO,code c returns integerlocal integer yX=BO(u,cO,c)local integer XOif(yX==0)thenreturn 0endifset OE[yX]=43set XO=yXreturn yXendfunctionfunction OR takes integer i,group a1 returns nothingset iX=a1call TriggerEvaluate(wE[i])endfunctionfunction RR takes integer i,boolexpr a1 returns nothingset aX=a1call TriggerEvaluate(WE[i])endfunctionfunction AR takes integer i,unit a1 returns nothingset eX=a1call TriggerEvaluate(YE[i])endfunctionfunction NR takes integer i,sound a1,boolean a2,boolean a3 returns nothingset nX=a1set VX=a2set EX=a3call TriggerEvaluate(zE[i])endfunctionfunction BR takes group a0 returns nothingcall OR(1,a0)call DestroyGroup(a0)endfunctionfunction cR takes boolexpr a0 returns nothingcall RR(1,a0)call DestroyBoolExpr(a0)endfunctionfunction CR takes sound a0,boolean a1,boolean a2 returns nothingcall NR(1,a0,a1,a2)call StopSound(a0,a1,a2)endfunctionfunction dR takes unit a0 returns nothingcall AR(1,a0)call RemoveUnit(a0)endfunctionfunction DR takes nothing returns nothinglocal integer i=0set i=0loopexitwhen(i>=O)if(GetWidgetLife(X[i])<.405)thencall RemoveItem(X[i])endifset X[i]=nullset i=i+1endloopset O=0endfunctionfunction fR takes nothing returns booleanset X[O]=GetManipulatedItem()set O=O+1call TimerStart(V,.0,false,function DR)return falseendfunctionfunction FR takes nothing returns nothinglocal trigger t=CreateTrigger()set V=CreateTimer()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddCondition(t,Condition(function fR))endfunctionfunction gR takes nothing returns nothingcall ExecuteFunc("GR")endfunctionfunction cj_group_copy_75hJKJ3745gf takes nothing returns nothingcall GroupAddUnit(I,GetEnumUnit())endfunctionfunction hR takes nothing returns booleanreturn trueendfunctionfunction HR takes nothing returns nothingset N=Condition(function hR)endfunctionfunction jR takes nothing returns booleanif UnitAddAbility(GetFilterUnit(),'Amrf')thencall UnitRemoveAbility(GetFilterUnit(),'Amrf')endifreturn falseendfunctionfunction JR takes nothing returns nothinglocal region r=CreateRegion()local rect re=GetWorldBounds()local group g=CreateGroup()local integer i=$Fcall RegionAddRect(r,re)call TriggerRegisterEnterRegion(CreateTrigger(),r,Filter(function jR))call RemoveRect(re)set re=nullloopcall GroupEnumUnitsOfPlayer(g,Player(i),Filter(function jR))exitwhen i==0set i=i-1endloopcall BR(g)set g=nullset r=nullendfunctionfunction kR takes real y,real KR returns reallocal real xlocal real lR=1.local real LR=.0local real mR=1.if(y<.0)thenreturn .0endifif(y<1.)thenset y=1./ yset mR=-1.endifloopexitwhen y<1.0001if(y>KR)thenset y=y/ KRset LR=LR+lRelseset KR=SquareRoot(KR)set lR=lR/ 2.endifendloopreturn mR*LRendfunctionfunction MR takes nothing returns integerlocal integer bl=xO()set Qr[bl]=0set qr[bl]=0set Sr=Sr+1return blendfunctionfunction pR takes integer yX returns nothingset Sr=Sr-1endfunctionfunction PR takes integer yX returns nothingif yX==null thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: BigNum_l")returnelseif(Pr[yX]!=-1)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: BigNum_l")returnendifcall pR(yX)set Pr[yX]=Mrset Mr=yXendfunctionfunction qR takes integer yX returns booleanif Qr[yX]==0 and qr[yX]==0 thenreturn trueelseif Qr[yX]!=0 and qR(Qr[yX])thencall PR(Qr[yX])set Qr[yX]=0return qr[yX]==0elsereturn falseendifendfunctionfunction QR takes integer yX,integer KR,integer sR returns integerlocal integer SRlocal integer tR=0local integer TRif Qr[yX]!=0 thenset tR=QR(Qr[yX],KR,sR)endifset TR=qr[yX]+tR*KRset SR=TR/ sRset tR=TR-SR*sRset qr[yX]=SRreturn tRendfunctionfunction uR takes integer KR returns integerlocal integer UR=oO()set wr[UR]=0set Wr[UR]=KRreturn URendfunctionfunction wR takes integer yX returns nothinglocal integer WR=wr[yX]local integer yRloopexitwhen WR==0set yR=Qr[WR]call PR(WR)set WR=yRendloopendfunctionfunction YR takes integer yX returns nothingif yX==null thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: BigNum")returnelseif(Ur[yX]!=-1)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: BigNum")returnendifcall wR(yX)set Ur[yX]=Trset Tr=yXendfunctionfunction zR takes integer yX returns booleanlocal integer WR=wr[yX]loopexitwhen WR==0if qr[WR]!=0 thenreturn falseendifset WR=Qr[WR]endloopreturn trueendfunctionfunction ZR takes integer yX returns nothinglocal integer WR=wr[yX]call qR(WR)endfunctionfunction vI takes integer yX,integer eI returns nothinglocal integer yRlocal integer WR=wr[yX]local integer xIif WR==0 thenset WR=MR()set wr[yX]=WRendifloopexitwhen eI==0set xI=qr[WR]+eIset eI=xI/ Wr[yX]set xI=xI-eI*Wr[yX]set qr[WR]=xIif Qr[WR]==0 thenset Qr[WR]=MR()endifset WR=Qr[WR]endloopendfunctionfunction oI takes integer yX,integer x returns nothinglocal integer WR=wr[yX]local integer rIlocal integer tRlocal integer eI=0loopexitwhen WR==0 and eI==0set rI=x*qr[WR]+eIset eI=rI/ Wr[yX]set tR=rI-eI*Wr[yX]set qr[WR]=tRif Qr[WR]==0 and eI!=0 thenset Qr[WR]=MR()endifset WR=Qr[WR]endloopendfunctionfunction iI takes integer yX,integer sR returns integerreturn QR(wr[yX],Wr[yX],sR)endfunctionfunction aI takes integer yX returns integerlocal integer WR=wr[yX]local integer yRloopset yR=Qr[WR]exitwhen yR==0set WR=yRendloopreturn qr[WR]endfunctionfunction BigNum___prop_Allocator1 takes nothing returns booleanlocal integer b1local integer b2set b1=uR(37)call YR(b1)set b2=uR(37)call YR(b2)return b1==b2endfunctionfunction BigNum___prop_Allocator2 takes nothing returns booleanlocal integer b1local boolean UR=falseset b1=uR(37)call vI(b1,17)call oI(b1,19)if Sr<1 thenreturn falseendifcall YR(b1)set UR=Sr==0return URendfunctionfunction BigNum___prop_Arith takes nothing returns booleanlocal integer b1set b1=uR(37)call vI(b1,73)call oI(b1,39)call vI(b1,17)if iI(b1,'d')!=64 thenreturn falseelseif iI(b1,7)!=0 thenreturn falseelseif zR(b1)thenreturn falseelseif iI(b1,3)!=1 thenreturn falseelseif iI(b1,3)!=1 thenreturn falseelseif not zR(b1)thenreturn falseendifreturn trueendfunctionfunction nI takes nothing returns nothinglocal unit u=GetTriggerUnit()local real x=GetUnitX(u)local real y=GetUnitY(u)if(x>C)thenset x=Celseif(x<F)thenset x=Fendifif(y>D)thenset y=Delseif(y<G)thenset y=Gendifcall SetUnitX(u,x)call SetUnitY(u,y)set u=nullendfunctionfunction VI takes nothing returns nothinglocal trigger t=CreateTrigger()local region r=CreateRegion()local rect rcset F=GetCameraBoundMinX()-500.set G=GetCameraBoundMinY()-500.set C=GetCameraBoundMaxX()+500.set D=GetCameraBoundMaxY()+500.set rc=Rect(F,G,C,D)call RegionAddRect(r,rc)call RemoveRect(rc)call TriggerRegisterLeaveRegion(t,r,null)call TriggerAddAction(t,function nI)set t=nullset r=nullset rc=nullendfunctionfunction EI takes nothing returns nothingset H[0]="ReplaceableTextures\\CommandButtons\\BTNPriest.blp"set H[1]="ReplaceableTextures\\CommandButtons\\BTNFootman.blp"set H[2]="ReplaceableTextures\\CommandButtons\\BTNPeasant.blp"set j[0]="Frotty"set J[0]="|cffEF6B21[God]"set j[1]="FrottyZ"set J[1]="|cffEF6B21[God]"set j[2]="Feuerblume"set J[2]="|cff9C94E6[Tester]"set j[3]="jkkopp"set J[3]="|cff9C94E6[Tester]"set j[4]="fortress_na-f"set J[4]="|cff9C94E6[Tester]"set j[5]="Kornblume"set J[5]="|cff9C94E6[Tester]"set j[6]="Gamestargamer"set J[6]="|cff9C94E6[Tester]"set j[7]="gamestargamer"set J[7]="|cff9C94E6[Tester]"set j[8]="mooniii"set J[8]="|cff9C94E6[Tester]"set j[9]="Carlor01"set J[9]="|cff9C94E6[Tester]"set j[$A]="Mo0ni[behh]"set J[$A]="|cff9C94E6[Tester]"set j[$B]="metactylic"set J[$B]="|cffB5DE42[Art]"set j[$C]="nore.abfl"set J[$C]="|cff9C94E6[Tester]"set j[$D]="kleinerhauck"set J[$D]="|cff9C94E6[Tester]"set K[0]="|cffFF0202"set K[1]="|cff0041FF"set K[2]="|cff1BE6B8"set K[3]="|cff530080"set K[4]="|cffFFFC00"set K[5]="|cffFE890D"set K[6]="|cff1FBF00"set K[7]="|cffE55AAF"set K[8]="|cff949596"set K[9]="|cff7DBEF1"set K[$A]="|cff0F6145"set l[0]=$Aset l[1]=30set l[2]=50set l[3]='d'set l[4]=$96set l[5]=300set l[6]=500set l[7]=$3E8set l[8]=$2710set L[0]="Newbie"set L[1]="Beginner"set L[2]="Amateur"set L[3]="Player"set L[4]="Rooter"set L[5]="Pro"set L[6]="Expert"set L[7]="Addict"endfunctionfunction XI takes group g returns nothingif g==m thencall BJDebugMsg("GroupUtils_Warning: ENUM_GROUP destroyed")endifendfunctionfunction OI takes nothing returns nothingif Q thencall GroupClear(U)set Q=falseendifcall GroupAddUnit(U,GetEnumUnit())endfunctionfunction RI takes nothing returns groupif Y==0 thenset W[0]=CreateGroup()elseset Y=Y-1endifreturn W[Y]endfunctionfunction II takes group g returns booleanlocal integer id=GetHandleId(g)if g==null thencall BJDebugMsg("GroupUtils_Error: Null groups cannot be released")return falseelseif Y==8191 thencall BJDebugMsg("GroupUtils_Error: Max groups achieved, destroying group")call BR(g)return falseendifcall GroupClear(g)set W[Y]=gset Y=Y+1return trueendfunctionfunction AI takes nothing returns booleanreturn IsUnitInRangeXY(GetFilterUnit(),Z,vv,ev)endfunctionfunction NI takes boolexpr UR returns nothinglocal integer bI=GetHandleId(UR)if HaveSavedHandle(xv,0,bI)thencall cR(LoadBooleanExprHandle(xv,0,bI))call RemoveSavedHandle(xv,0,bI)endifendfunctionfunction cI takes nothing returns booleanreturn trueendfunctionfunction CI takes nothing returns booleanreturn falseendfunctionfunction dI takes nothing returns nothingset M=Condition(function cI)set P=Condition(function CI)endfunctionfunction DI takes real x,real fI,real FI returns realreturn x+fI*Cos(FI*.01745329)endfunctionfunction gI takes real y,real fI,real FI returns realreturn y+fI*Sin(FI*.01745329)endfunctionfunction GI takes real x1,real y1,real x2,real y2 returns realreturn 57.2957795*Atan2(y2-y1,x2-x1)endfunctionfunction hI takes real x1,real y1,real x2,real y2 returns realreturn SquareRoot((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1))endfunctionfunction HI takes real y0,real y1,real h,real d,real x returns reallocal real A=(2*(y0+y1)-4*h)/(d*d)local real B=(y1-y0-A*d*d)/ dreturn A*x*x+B*x+y0endfunctionfunction jI takes integer yX,integer i returns nothinglocal integer n=Xiset Xi=Oi[n]if Xi==0 thenset Xi=n+1endifset Ri[n]=iset Oi[n]=Ei[yX]set Ei[yX]=nset Vi[yX]=Vi[yX]+1endfunctionfunction JI takes integer yX returns integerlocal integer n=Ei[yX]if n==0 thencall BJDebugMsg("stack warning: .pop called on an empty stack!")return niendifset Ei[yX]=Oi[n]set Vi[yX]=Vi[yX]-1set Oi[n]=Xiset Xi=nreturn Ri[n]endfunctionfunction kI takes integer yX returns integerreturn Ri[Ei[yX]]endfunctionfunction lI takes nothing returns nothingset Ri[0]=niendfunctionfunction LI takes integer yX returns nothingcall FlushChildHashtable(ov,(yX))endfunctionfunction mI takes nothing returns nothingset ov=InitHashtable()endfunctionfunction sI takes string SI,integer tI,unit u,real TI,integer uI,integer UI,integer wI,real WI returns nothinglocal texttag t=CreateTextTag()call SetTextTagText(t,SI,tI*.0023)call SetTextTagPos(t,GetUnitX(u),GetUnitY(u),WI)call SetTextTagColor(t,uI,UI,wI,0)call SetTextTagVelocity(t,.00000128484,.0277344)call SetTextTagLifespan(t,TI)call SetTextTagFadepoint(t,.1)call SetTextTagPermanent(t,false)set t=nullendfunctionfunction yI takes timer t,integer QI returns nothingif(GetHandleId(t)-iv<0)thencall BJDebugMsg("SetTimerData: Wrong handle id, only use SetTimerData on timers created by NewTimer")endifset PV[GetHandleId(t)-iv]=QIendfunctionfunction YI takes timer t returns integerif(GetHandleId(t)-iv<0)thencall BJDebugMsg("SetTimerData: Wrong handle id, only use SetTimerData on timers created by NewTimer")endifreturn PV[GetHandleId(t)-iv]endfunctionfunction zI takes nothing returns timerif(av==0)thencall BJDebugMsg("NewTimer: Warning, Exceeding TimerUtils_QUANTITY, make sure all timers are getting recycled correctly")call BJDebugMsg("In case of errors, please increase it accordingly, or set TimerUtils_USE_HASH_TABLE to true")set qV[0]=CreateTimer()if(GetHandleId(qV[0])-iv<0)or(GetHandleId(qV[0])-iv>=8190)thencall BJDebugMsg("NewTimer: Unable to allocate a timer, you should probably set TimerUtils_USE_HASH_TABLE to true or fix timer leaks.")return nullendifreturn CreateTimer()elseset av=av-1endifcall yI(qV[av],0)return qV[av]endfunctionfunction ZI takes timer t returns nothingif(t==null)thencall BJDebugMsg("Warning: attempt to release a null timer")returnendifif(av==8190)thencall BJDebugMsg("Warning: Timer stack is full, destroying timer!!")call DestroyTimer(t)elsecall PauseTimer(t)if(YI(t)==nv)thencall BJDebugMsg("Warning: ReleaseTimer: Double free!")returnendifcall yI(t,nv)set qV[av]=tset av=av+1endifendfunctionfunction vA takes nothing returns nothinglocal integer i=0local integer o=-1local boolean eA=falseloopset i=0loopexitwhen(i==256)set qV[i]=CreateTimer()if(i==0)thenset iv=GetHandleId(qV[i])set o=ivendifif(GetHandleId(qV[i])-o>=8190)thenexitwhen trueendifif(GetHandleId(qV[i])-o>=0)thenset i=i+1endifendloopset av=iexitwhen(av==256)set eA=trueexitwhen not truecall BJDebugMsg("TimerUtils_init: Failed a initialization attempt, will try again")endloopif(eA)thencall BJDebugMsg("The problem has been fixed.")endifendfunctionfunction xA takes real r returns integerif r>0 thenreturn R2I(r+.5)endifreturn R2I(r-.5)endfunctionfunction oA takes real x,real y returns integerreturn uX((R2I((RAbsBJ((lo-(xA(x/ $80)*$80))))/ $80))*($80)+R2I((RAbsBJ((Lo-(xA(y/ $80)*$80))))/ $80))endfunctionfunction rA takes real iA,real UR,real c,real d returns reallocal real aA=iAif UR>aA thenset aA=URendifif c>aA thenset aA=cendifif d>aA thenset aA=dendifreturn aAendfunctionfunction nA takes real iA,real UR,real c,real d returns reallocal real VA=iAif UR<VA thenset VA=URendifif c<VA thenset VA=cendifif d<VA thenset VA=dendifreturn VAendfunctionfunction EA takes nothing returns booleanlocal real x=GetUnitX(GetFilterUnit())local real y=GetUnitY(GetFilterUnit())local real dx=x-Ovlocal real dy=y-Rvlocal real d=dx*Iv+dy*Avlocal real cxlocal real cyif d<=0 thenset d=0elseif d>=bv thenset d=bvendifset cx=Ov+d*Ivset cy=Rv+d*Avif IsUnitInRangeXY(GetFilterUnit(),cx,cy,Nv)thencall GroupAddUnit(Xv,GetFilterUnit())endifreturn falseendfunctionfunction XA takes group g,real px,real py,real qx,real qy,real OA returns nothinglocal real RAlocal real IAlocal real AAlocal real NAlocal real bAlocal real BAlocal real cAlocal real CAlocal real dx=qx-pxlocal real dy=qy-pylocal real dA=SquareRoot(dx*dx+dy*dy)local real DA=dx/ dAlocal real fA=dy/ dAlocal integer FA=1local real gA=.0local real GA=.0local integer ilocal real hAlocal real HAlocal real jAlocal real JAset OA=OA+128.if dx!=0 and dy!=0 thenset FA=1+R2I(SquareRoot(.6*.6/(OA*OA/(dx*dx)+OA*OA/(dy*dy))))endifif dy!=0 and FA>1 thenset gA=OA/ 2*dA/ dxendifif dx!=0 and FA>1 thenset GA=OA/ 2*dA/ dyendifset RA=-OA*fAset IA=OA*DAset AA=OA*fAset NA=-OA*DAset bA=AA+dx/ FA+gAset BA=NA+dy/ FA+GAset cA=RA+dx/ FA+gAset CA=IA+dy/ FA+GAset hA=nA(RA,AA,bA,cA)set HA=rA(RA,AA,bA,cA)set jA=nA(IA,NA,BA,CA)set JA=rA(IA,NA,BA,CA)set Xv=gset Ov=pxset Rv=pyset Iv=DAset Av=fAset Nv=OA-128.set bv=dAset i=0loopexitwhen i>=FAcall SetRect(Vv,px+i*dx/ FA+hA,py+i*dy/ FA+jA,px+i*dx/ FA+HA,py+i*dy/ FA+JA)call GroupEnumUnitsInRect(Ev,Vv,Condition(function EA))set i=i+1endloopendfunctionfunction kA takes real x,real y returns realcall MoveLocation(Bv,x,y)return GetLocationZ(Bv)endfunctionfunction KA takes nothing returns booleanreturn GetUnitFlyHeight(GetFilterUnit())<40endfunctionfunction lA takes trigger LA,unit mA,real MA returns eventlocal integer h=GetHandleId(LA)local integer u=GetHandleId(mA)call SaveUnitHandle(ht,0,h,mA)call SaveTriggerHandle(ht,0,u,LA)return TriggerRegisterUnitInRange(LA,mA,MA,Condition(function KA))endfunctionfunction pA takes trigger LA returns unitlocal integer h=GetHandleId(LA)return LoadUnitHandle(ht,0,h)endfunctionfunction PA takes unit mA returns nothinglocal integer h=GetHandleId(mA)local trigger t=LoadTriggerHandle(ht,0,h)local integer th=GetHandleId(t)call DestroyTrigger(t)call RemoveSavedHandle(ht,0,h)call RemoveSavedHandle(ht,0,th)set t=nullendfunctionfunction qA takes trigger QA,boolexpr sA returns nothinglocal integer pX=8loopcall TriggerRegisterPlayerUnitEvent(QA,Player(pX),EVENT_PLAYER_UNIT_CONSTRUCT_FINISH,sA)set pX=pX+1exitwhen pX>$Aendloopendfunctionfunction SA takes trigger QA,string tA returns nothinglocal integer pX=8loopcall TriggerRegisterPlayerChatEvent(QA,Player(pX),tA,false)set pX=pX+1exitwhen pX>$Aendloopendfunctionfunction TA takes real x,real y returns booleanif GetTerrainType(x,y)==wV[0]or GetTerrainType(x,y)==wV[1]or GetTerrainType(x,y)==wV[2]or GetTerrainType(x,y)==wV[3]or GetTerrainType(x,y)==wV[4]or GetTerrainType(x,y)=='Irbk' or GetTerrainType(x,y)=='Nice' or GetTerrainType(x,y)=='Idki' or GetTerrainType(x,y)=='Glav' thenreturn trueelsereturn falseendifendfunctionfunction s__ConsistentArray_create takes nothing returns integerlocal integer yX=OO()set Ci[yX]=EO()return yXendfunctionfunction uA takes nothing returns nothinglocal integer i=0local integer i2=-1local integer PDcall MultiboardSetColumnCount(cv,3)call MultiboardSetRowCount(cv,gv+1)call MultiboardSetTitleText(cv,Fv+" [")loopcall MultiboardSetItemStyle(MultiboardGetItem(cv,i,1),true,false)call MultiboardSetItemStyle(MultiboardGetItem(cv,i,2),true,false)call MultiboardSetItemWidth(MultiboardGetItem(cv,i,0),.1)call MultiboardSetItemWidth(MultiboardGetItem(cv,i,1),.02)call MultiboardSetItemWidth(MultiboardGetItem(cv,i,2),.05)set i=i+1exitwhen i>=MultiboardGetRowCount(cv)endloopset i=0call MultiboardSetItemValue(MultiboardGetItem(cv,0,0),"Player")call MultiboardSetItemValue(MultiboardGetItem(cv,0,1),"|cff9C2908†")call MultiboardSetItemValue(MultiboardGetItem(cv,0,2),"Rank")call MultiboardSetItemIcon(MultiboardGetItem(cv,0,0),"ReplaceableTextures\\CommandButtons\\BTNSelectHeroOn.blp")loopset PD=QV[sV[i]]call MultiboardSetItemValue(MultiboardGetItem(cv,hi[PD],0),Hi[PD]+"|r")call MultiboardSetItemValue(MultiboardGetItem(cv,hi[PD],1),"0")call MultiboardSetItemValue(MultiboardGetItem(cv,hi[PD],2),Ji[PD])call MultiboardSetItemIcon(MultiboardGetItem(cv,hi[PD],0),ki[PD])set i=i+1exitwhen i>=gvendloopcall MultiboardDisplay(cv,true)endfunctionfunction UA takes nothing returns nothinglocal string wA=I2S(Dv+1)local string WA=I2S(fv+1)local integer i=0local integer PDset Dv=Dv+1if Dv<$A thenset wA="0"+I2S(Dv)endifif fv<$A thenset WA="0"+I2S(fv)endifif Dv>=60 thenset fv=fv+1if ModuloInteger(fv,5)==0 thenloopset PD=QV[i]set li[PD]=li[PD]+fv/ 5set i=i+1exitwhen i>$Aendloopendifset Dv=0endifcall MultiboardSetTitleText(cv,Fv+" |cffFFFFFF[ |r"+WA+" : "+wA+"|cffFFFFFF ]|r")endfunctionfunction yA takes nothing returns nothingif GetUnitTypeId(GetEnumUnit())=='H004' or GetUnitTypeId(GetEnumUnit())=='H005' or GetUnitTypeId(GetEnumUnit())=='H007' or GetUnitTypeId(GetEnumUnit())=='H008' thencall dR(GetEnumUnit())call GroupRemoveUnit(Cv,GetEnumUnit())endifendfunctionfunction YA takes nothing returns nothingcall SetUnitOwner(GetEnumUnit(),Player(8),false)endfunctionfunction zA takes nothing returns nothingcall SetUnitOwner(GetEnumUnit(),Player(8),false)endfunctionfunction ZA takes nothing returns nothingcall SetUnitOwner(GetEnumUnit(),Player(8),false)endfunctionfunction vN takes nothing returns booleanlocal integer PD=QV[GetPlayerId(GetTriggerPlayer())]local player p2local integer i=0local integer Rcall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,K[Gi[PD]]+Hi[PD]+" |cffFFCC00has left the game...|r")set gv=gv-1call dR(Ar[Gi[PD]])if Gi[PD]>7 thenset Cv=RI()call dR(Gr[Gi[PD]])call dR(Dr[Gi[PD]])call GroupEnumUnitsOfPlayer(Cv,gi[PD],null)call ForGroup(Cv,function yA)if gi[PD]==Player(8)thenif GetPlayerSlotState(Player(9))==PLAYER_SLOT_STATE_PLAYING thencall ForGroup(Cv,function zA)set p2=Player(9)elseif GetPlayerSlotState(Player($A))==PLAYER_SLOT_STATE_PLAYING thencall ForGroup(Cv,function ZA)set p2=Player($A)endifelseif gi[PD]==Player(9)thenif GetPlayerSlotState(Player(8))==PLAYER_SLOT_STATE_PLAYING thencall ForGroup(Cv,function YA)set p2=Player(8)elseif GetPlayerSlotState(Player($A))==PLAYER_SLOT_STATE_PLAYING thencall ForGroup(Cv,function ZA)set p2=Player($A)endifelseif gi[PD]==Player($A)thenif GetPlayerSlotState(Player(8))==PLAYER_SLOT_STATE_PLAYING thencall ForGroup(Cv,function YA)set p2=Player(8)elseif GetPlayerSlotState(Player(9))==PLAYER_SLOT_STATE_PLAYING thencall ForGroup(Cv,function zA)set p2=Player(9)endifendifloopset R=LoadInteger(ht,GetHandleId(Go[i]),0)if gi[PD]==xV[R]thenset xV[R]=p2endifset i=i+1exitwhen i>21endloopcall II(Cv)endifreturn falseendfunctionfunction eN takes nothing returns nothingset cv=CreateMultiboard()call uA()endfunctionfunction xN takes nothing returns nothinglocal trigger QA=CreateTrigger()call TriggerRegisterTimerEvent(QA,1,true)call TriggerAddAction(QA,function UA)call TriggerAddCondition(dv,Condition(function vN))endfunctionfunction oN takes integer yX returns nothinglocal integer i=0loopif li[yX]<l[i]thenset Ji[yX]=L[i-1]exitwhen trueendifset i=i+1endloopcall MultiboardSetItemValue(MultiboardGetItem(cv,hi[yX],2),Ji[yX])if li[yX]>500 thencall AddSpecialEffectTarget("war3mapImported\\Life High.mdx",Ar[Gi[yX]],"chest")elseif li[yX]>300 thencall AddSpecialEffectTarget("war3mapImported\\Life Low_Portrait.mdx",Ar[Gi[yX]],"chest")elseif li[yX]>99 thencall AddSpecialEffectTarget("war3mapImported\\Life Low.mdx",Ar[Gi[yX]],"chest")call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,Hi[yX]+" has loaded his Player Rank")endifendfunctionfunction rN takes player pP,integer iN returns integerlocal integer yX=RO()local integer i=0set gi[yX]=pPset Gi[yX]=GetPlayerId(pP)set hi[yX]=iNset ji[yX]=GetPlayerName(pP)if ji[yX]=="Frotty" or ji[yX]=="FrottyZ" thenset Ji[yX]="|cffADD642Creator"endifloopif ji[yX]==j[i]thenset Hi[yX]=J[i]+"|r"+K[Gi[yX]]+ji[yX]return yXendifset i=i+1exitwhen j[i]==nullendloopset Hi[yX]=K[Gi[yX]]+ji[yX]return yXendfunctionfunction aN takes nothing returns nothinglocal integer r=0local integer nN=0set Gv=CreateTrigger()loopexitwhen not(nN<$B)if GetPlayerSlotState(Player(nN))==PLAYER_SLOT_STATE_PLAYING thenset sV[r]=nNset QV[nN]=rN(Player(nN),r+1)call TriggerRegisterPlayerEvent(Gv,Player(nN),EVENT_PLAYER_LEAVE)set r=r+1endifset nN=nN+1endloopset gv=rendfunctionfunction VN takes string EN,integer TI,boolean XN,boolean ON,boolean RN,integer IN,integer AN,string NN returns integerlocal integer sh=IO()set Qi[sh]=ENset si[sh]=TIset Si[sh]=XNset ti[sh]=ONset Ti[sh]=RNset ui[sh]=INset Ui[sh]=ANset wi[sh]=NNset qi[sh]=nO()return shendfunctionfunction bN takes sound BN,integer cN returns integerlocal integer sr=AO()set zi[sr]=zI()set Zi[sr]=BNset va[sr]=cNcall yI(zi[sr],(sr))call SaveInteger(jv,cN,GetHandleId(BN),(sr))return srendfunctionfunction CN takes integer yX returns nothingcall RemoveSavedInteger(jv,va[yX],GetHandleId(Zi[yX]))call ZI(zi[yX])endfunctionfunction dN takes integer yX returns nothingif yX==null thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: SoundUtils__soundrecycler")returnelseif(Yi[yX]!=-1)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: SoundUtils__soundrecycler")returnendifcall CN(yX)set Yi[yX]=Wiset Wi=yXendfunctionfunction DN takes sound fN,boolean FN,boolean fadeOut returns nothinglocal integer id=GetHandleId(fN)local integer cN=0local integer sr=0if HaveSavedInteger(hv,0,id)thenset cN=LoadInteger(hv,0,id)if HaveSavedInteger(jv,cN,id)thenset sr=(LoadInteger(jv,cN,id))set ea[sr]=trueendifif FN thencall BJDebugMsg("SoundUtils_Warning: (StopSound) Destroying a sound in the stack")endifendifendfunctionfunction gN takes sound fN returns nothingif HaveSavedInteger(hv,0,GetHandleId(fN))thencall BJDebugMsg("SoundUtils_Warning: (KillSoundWhenDone) Destroying a sound in the stack")endifendfunctionfunction GN takes string EN,integer TI,boolean XN,boolean ON,boolean RN,integer IN,integer AN,string NN returns integerreturn(VN(EN,TI,XN,ON,RN,IN,AN,NN))endfunctionfunction hN takes string EN,integer TI,boolean XN,boolean ON returns integerreturn GN(EN,TI,XN,ON,true,$A,$A,"CombatSoundsEAX")endfunctionfunction HN takes nothing returns nothinglocal integer sr=(YI(GetExpiredTimer()))local integer sh=(va[sr])local integer id=GetHandleId(Zi[sr])call CR(Zi[sr],false,true)call jI(qi[sh],id)call SaveSoundHandle(Hv,(sh),id,Zi[sr])call dN(sr)endfunctionfunction jN takes nothing returns nothinglocal integer sr=(YI(GetExpiredTimer()))local integer sh=(va[sr])if not ea[sr]thencall StartSound(Zi[sr])endifif not Si[sh]and not ea[sr]thencall TimerStart(zi[sr],si[sh]*.001,false,function HN)elsecall dN(sr)endifendfunctionfunction JN takes integer cN returns soundlocal sound s=nulllocal integer i=0local integer sh=(cN)local integer sr=0if cN<=0 thencall BJDebugMsg("SoundUtils_Error: Cannot run sound of undefined type")return nullendifif kI(qi[sh])==ni thenset s=CreateSound(Qi[sh],Si[sh],ti[sh],Ti[sh],ui[sh],Ui[sh],wi[sh])call SaveInteger(hv,0,GetHandleId(s),(sh))call SetSoundDuration(s,si[sh])call SetSoundChannel(s,5)call SetSoundVolume(s,$7F)call SetSoundPitch(s,1.)if ti[sh]thencall SetSoundDistances(s,600.,10000.)call SetSoundDistanceCutoff(s,3000.)call SetSoundConeAngles(s,.0,.0,$7F)call SetSoundConeOrientation(s,.0,.0,.0)endifset sr=bN(s,cN)call TimerStart(zi[sr],.001,false,function jN)elseset i=JI(qi[sh])if not HaveSavedHandle(Hv,cN,i)thencall BJDebugMsg("SoundUtils_Error: No sound in given stack member")set s=nullreturn nullendifset s=LoadSoundHandle(Hv,cN,i)call RemoveSavedInteger(Hv,cN,i)call SetSoundVolume(s,$7F)call StartSound(s)if not Si[sh]thenset sr=bN(s,cN)call TimerStart(zi[sr],si[sh]*.001,false,function HN)endifendifset mr=sset s=nullreturn mrendfunctionfunction kN takes integer cN,real x,real y,real z returns soundlocal sound s=JN(cN)call SetSoundPosition(s,x,y,z)set mr=sset s=nullreturn mrendfunctionfunction KN takes integer cN,player p returns soundlocal sound s=JN(cN)if GetLocalPlayer()!=p thencall SetSoundVolume(s,0)elsecall SetSoundVolume(s,$7F)endifset mr=sset s=nullreturn mrendfunctionfunction lN takes integer p returns nothinglocal player tp=Player(p)local boolean LNif p<8 thenset LN=falseelseset LN=trueendifif LN==false thencall DisplayTextToPlayer(tp,0,0,"You are an |cffE64221Escaper|r, run through the mazes the builders create for you.")elsecall DisplayTextToPlayer(tp,0,0,"You are a|cff088463 |cffE64221Builder|r, please build fair mazes for the escapers.
You find small helping |cffFFCC00Information|r on every unit. To find your Builder Unit, just click on the idle Worker symbol overhead the Minimap.")call TriggerSleepAction(5)call DisplayTextToPlayer(tp,0,0,"You can |cffFFCC00claim |ra |cff949596Region |rby going to the |cffFFCC00Administrationbuilding |rin the mid of each region and selecting the terraintype.")call TriggerSleepAction(5)call DisplayTextToPlayer(tp,0,0,"To make |cff08B55AWalkable |rTerrain or |cff08ADF7Ice|r, click the specific |cffFFCC00Hero Icon |ron the |cffFFCC00left of your Screen |rand then |cffFFCC00rightclick |rthe destination of the Tile.
You can swap between a 1x1 or 3x3 field.")call TriggerSleepAction(5)call DisplayTextToPlayer(tp,0,0,"To produce certain |cffFFC521Units |rClick the |cffFFB5215th Hero Symbol |rand train the Unit. It will be moved to the Producers |cffFFCC00Rallypoint|r.")call TriggerSleepAction(5)call DisplayTextToPlayer(tp,0,0,"Remember that all Objects with |cffDE6321Destinations |rwork with |cffDE5A21Rallypoints|r!
Now |cffFFCC00have fun |ras builder and create a creative maze for the Escapers.")endifendfunctionfunction mN takes nothing returns nothinglocal player p=GetTriggerPlayer()local unit uif Mv[GetPlayerId(p)]==false thenset Mv[GetPlayerId(p)]=trueset Ar[GetPlayerId(p)]=CreateUnit(p,GetUnitTypeId(Kv[mv[GetPlayerId(p)]]),Pv,qv,$B4)call SetUnitUserData(Ar[GetPlayerId(p)],zX(Ar[GetPlayerId(p)]))call SaveBoolean(ht,GetHandleId(Ar[GetPlayerId(p)]),89,false)call SaveBoolean(ht,GetHandleId(Ar[GetPlayerId(p)]),5,false)call MultiboardSetItemIcon(MultiboardGetItem(cv,hi[QV[GetPlayerId(p)]],0),H[mv[GetPlayerId(p)]])if p==Player(8)or p==Player(9)or p==Player($A)thencall UnitAddAbility(Ar[GetPlayerId(p)],'A001')call ResetToGameCameraForPlayer(p,.5)call PanCameraToTimedForPlayer(p,GetUnitX(Gr[GetPlayerId(p)]),GetUnitY(Gr[GetPlayerId(p)]),0)call SelectUnitForPlayerSingle(Gr[GetPlayerId(p)],p)elsecall ResetToGameCameraForPlayer(p,.5)call PanCameraToTimedForPlayer(p,Pv,qv,0)endifif GetLocalPlayer()==p thencall SetUnitVertexColorBJ(Kv[mv[GetPlayerId(p)]],'d','d','d',100.)call SetTextTagVisibility(Qv[mv[GetPlayerId(p)]],false)call SetTextTagVisibility(Qv[pv+1],false)endifcall lN(GetPlayerId(p))elsereturnendifendfunctionfunction MN takes player p,integer pI returns nothinglocal integer i=0local integer pN=GetPlayerId(p)set mv[pN]=mv[pN]+pIif mv[pN]<0 thenset mv[pN]=pv-1endifif mv[pN]==pv thenset mv[pN]=0endifloopif i!=mv[pN]thenif GetLocalPlayer()==p thencall SetUnitVertexColorBJ(Kv[i],'d','d','d',100.)call SetTextTagVisibility(Qv[i],false)endifelseif GetLocalPlayer()==p thencall SetUnitVertexColorBJ(Kv[i],'d','d','d',0)call SetTextTagVisibility(Qv[i],true)endifendifexitwhen Jv[i]==nullset i=i+1endloopendfunctionfunction PN takes nothing returns nothinglocal player p=GetTriggerPlayer()if Mv[GetPlayerId(p)]==false thencall MN(p,-1)elsereturnendifendfunctionfunction qN takes nothing returns nothinglocal player p=GetTriggerPlayer()if Mv[GetPlayerId(p)]==false thencall MN(p,1)elsereturnendifendfunctionfunction QN takes nothing returns nothinglocal integer i=0loopif Mv[GetPlayerId(lv[i])]!=true thencall SetCameraFieldForPlayer(lv[i],CAMERA_FIELD_TARGET_DISTANCE,1000.,.5)call SetCameraFieldForPlayer(lv[i],CAMERA_FIELD_ANGLE_OF_ATTACK,343.,.5)call SetCameraTargetControllerNoZForPlayer(lv[i],Lv,0,0,false)call SetCameraFieldForPlayer(lv[i],CAMERA_FIELD_ROTATION,GetUnitFacing(Kv[0])+$B4,.5)call SetCameraFieldForPlayer(lv[i],CAMERA_FIELD_ZOFFSET,'n',.5)call SetCameraFieldForPlayer(lv[i],CAMERA_FIELD_FARZ,15000.,.5)endifset i=i+1exitwhen lv[i]==nullendloopendfunctionfunction sN takes nothing returns nothinglocal integer i=0set Jv[0]='H00B'set Jv[1]='H003'set Jv[2]='H00D'set kv[0]="|cffFFC521Holy Escaper|r
In years of studies this priest mastered the art of healing and reincarnation."set kv[1]="|cffAD4208Strong Escaper|r
This brave baronet perfected his defense abilites and will never retreat."set kv[2]="|cff08CEEFFast Escaper|r
This blazing fast hero inceases the movementspeed of himself and his mates and can turn invisible."loopexitwhen lv[i]==nullset mv[i]=0set i=i+1endloopendfunctionfunction SN takes real x,real y returns nothinglocal integer i=0local integer i2=0local timer t=CreateTimer()local real x2=x+$8C*Cos($B4*bj_DEGTORAD)local real y2=y+$8C*Sin($B4*bj_DEGTORAD)call TimerStart(t,1,true,function QN)set Lv=CreateUnit(Player($E),'h01J',x,y,0)call TriggerSleepAction(.48)loopset i2=0set Kv[i]=CreateUnit(Player($E),Jv[i],x,y,315)set Qv[i]=CreateTextTag()call SetTextTagText(Qv[i],kv[i],$C*.023/ $A)call SetTextTagPermanent(Qv[i],true)call SetTextTagVisibility(Qv[i],true)call SetTextTagPos(Qv[i],x2,y2,'n')call SetUnitPathing(Kv[i],false)call SetUnitPosition(Kv[i],x,y)call UnitAddAbility(Kv[i],'Aloc')call UnitRemoveAbility(Kv[i],'Aloc')loopif i!=mv[GetPlayerId(lv[i2])]thenif GetLocalPlayer()==Player(GetPlayerId(lv[i2]))thencall SetUnitVertexColorBJ(Kv[i],'d','d','d',100.)call SetTextTagVisibility(Qv[i],false)endifendifset i2=i2+1exitwhen lv[i2]==nullendloopset i=i+1exitwhen Jv[i]==nullendloopset pv=iset x2=x+$96*Cos(360*bj_DEGTORAD)set y2=y+$96*Sin(360*bj_DEGTORAD)set Qv[i+1]=CreateTextTag()call SetTextTagText(Qv[i+1],"Press the |cff2194EFLeft|r/|cff08B552Right|r |cffB5B5B5Arrowkey|r to switch the escaper.
Choose by Pressing the |cff2194EFDown|r |cffB5B5B5Arrowkey|r. ",$A*.023/ $A)call SetTextTagPermanent(Qv[i+1],true)call SetTextTagVisibility(Qv[i+1],true)call SetTextTagPos(Qv[i+1],x2,y2,70)set t=nullendfunctionfunction tN takes nothing returns nothinglocal trigger t=CreateTrigger()local trigger TN=CreateTrigger()local trigger uN=CreateTrigger()local trigger UN=CreateTrigger()local integer i=0loopexitwhen i>$Aset lv[i]=Player(i)set i=i+1endloopset i=0loopcall TriggerRegisterPlayerEvent(TN,lv[i],EVENT_PLAYER_ARROW_LEFT_DOWN)call TriggerRegisterPlayerEvent(uN,lv[i],EVENT_PLAYER_ARROW_RIGHT_DOWN)call TriggerRegisterPlayerEvent(UN,lv[i],EVENT_PLAYER_ARROW_DOWN_DOWN)set i=i+1exitwhen lv[i]==nullendloopcall TriggerRegisterTimerEventSingle(t,.01)call TriggerAddAction(t,function sN)call TriggerAddAction(TN,function PN)call TriggerAddAction(uN,function qN)call TriggerAddAction(UN,function mN)set UN=nullset uN=nullset TN=nullset t=nullendfunctionfunction wN takes nothing returns stringreturn"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"endfunctionfunction WN takes nothing returns integerreturn StringLength(wN())endfunctionfunction yN takes nothing returns stringreturn"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"endfunctionfunction YN takes nothing returns integerreturn StringLength(yN())endfunctionfunction zN takes nothing returns integerreturn YN()endfunctionfunction ZN takes string c returns integerlocal integer i=0local string cs=wN()local integer vb=WN()loopexitwhen i>=vb or c==SubString(cs,i,i+1)set i=i+1endloopreturn iendfunctionfunction eb takes string c returns integerlocal integer i=0local string cs=yN()local integer vb=YN()loopexitwhen i>=vb or c==SubString(cs,i,i+1)set i=i+1endloopreturn iendfunctionfunction xb takes integer i returns stringreturn SubString(yN(),i,i+1)endfunctionfunction ob takes string s returns integerlocal integer array rblocal integer i=0local integer vb=StringLength(s)local integer xset s=StringCase(s,true)loopexitwhen i>=vbset x=ZN(SubString(s,i,i+1))set rb[x]=rb[x]+1set i=i+1endloopset i=0set vb=WN()set x=0loopexitwhen i>=vbset x=rb[i]*rb[i]*i+rb[i]*x+x+$C7set i=i+1endloopif x<0 thenset x=-xendifreturn xendfunctionfunction ib takes integer x returns integerif x>=zN()thenreturn x-zN()elseif x<0 thenreturn x+zN()elsereturn xendifendfunctionfunction ab takes nothing returns integerlocal integer sc=NO()set ia[sc]=.0set aa[sc]=uR(zN())return scendfunctionfunction Vb takes integer yX,integer Eb,integer aA returns nothingset ia[yX]=ia[yX]+kR(aA+1,zN())call oI(aa[yX],aA+1)call vI(aa[yX],Eb)endfunctionfunction Xb takes integer yX,integer aA returns integerreturn iI(aa[yX],aA+1)endfunctionfunction Ob takes integer yX returns realreturn ia[yX]endfunctionfunction Rb takes integer yX returns nothingcall ZR(aa[yX])endfunctionfunction Ib takes integer yX returns nothinglocal integer WR=wr[aa[yX]]local integer Ablocal integer Nb=R2I(1.+Ob(yX))loopexitwhen WR==0set Ab=WRset WR=Qr[WR]set Nb=Nb-1endlooploopexitwhen Nb<=0set Qr[Ab]=MR()set Ab=Qr[Ab]set Nb=Nb-1endloopendfunctionfunction bb takes integer yX returns stringlocal integer WR=wr[aa[yX]]local string s=""loopexitwhen WR==0set s=xb(qr[WR])+sset WR=Qr[WR]endloopreturn sendfunctionfunction Bb takes integer yX,string s returns nothinglocal integer i=StringLength(s)-1local integer WR=MR()set wr[aa[yX]]=WRloopset qr[WR]=eb(SubString(s,i,i+1))exitwhen i<=0set Qr[WR]=MR()set WR=Qr[WR]set i=i-1endloopendfunctionfunction cb takes integer yX returns integerlocal integer Cb=0local integer xlocal integer WR=wr[aa[yX]]loopexitwhen WR==0set x=qr[WR]set Cb=ModuloInteger(Cb+79*Cb/(x+1)+293*x/(1+Cb-(Cb/ zN())*zN())+479,5000)set WR=Qr[WR]endloopreturn Cbendfunctionfunction db takes integer yX,integer pI,integer mR returns nothinglocal integer Db=GetRandomInt(0,$7FFFFFFF)local integer fblocal integer xlocal integer WR=wr[aa[yX]]if mR==-1 thencall SetRandomSeed(aI(aa[yX]))set qr[WR]=ib(qr[WR]+mR*GetRandomInt(0,zN()-1))set x=qr[WR]endifcall SetRandomSeed(pI)loopexitwhen WR==0if mR==-1 thenset fb=qr[WR]endifset qr[WR]=ib(qr[WR]+mR*GetRandomInt(0,zN()-1))if mR==1 thenset fb=qr[WR]endifset fb=fb+GetRandomInt(0,zN()-1)call SetRandomSeed(fb)set x=qr[WR]set WR=Qr[WR]endloopif mR==1 thencall SetRandomSeed(x)set qr[wr[aa[yX]]]=ib(qr[wr[aa[yX]]]+mR*GetRandomInt(0,zN()-1))endifcall SetRandomSeed(Db)endfunctionfunction Fb takes integer yX,player p,integer gb returns stringlocal integer PD=QV[GetPlayerId(p)]local integer pI=ob(ji[PD])+gb*73local string slocal integer Cbcall Rb(yX)set Cb=cb(yX)call Vb(yX,Cb,5000)call Rb(yX)call Ib(yX)call db(yX,pI,1)return bb(yX)endfunctionfunction Gb takes integer yX,player p,string s,integer gb returns booleanlocal integer hb=ob(GetPlayerName(p))+gb*73local integer Hbcall Bb(yX,s)call db(yX,hb,-1)set Hb=Xb(yX,5000)call Rb(yX)return Hb==cb(yX)endfunctionfunction jb takes string c returns booleanreturn c==StringCase(c,true)endfunctionfunction Jb takes string c returns booleanreturn S2I(c)==0 and c!="0"endfunctionfunction kb takes string c returns integerif(Jb(c))thenif jb(c)thenreturn 0elsereturn 1endifelsereturn 2endifendfunctionfunction Kb takes string s returns stringlocal string Lb=""local integer i=0local integer vb=StringLength(s)local integer mblocal string cloopexitwhen i>=vbset c=SubString(s,i,i+1)set mb=kb(c)if mb==0 thenset Lb=Lb+"|cff1FBF00"+c+"|r"elseif mb==1 thenset Lb=Lb+"|cffFE890D"+c+"|r"elseset Lb=Lb+"|cff0041FF"+c+"|r"endifset i=i+1endloopreturn Lbendfunctionfunction Mb takes nothing returns nothinglocal integer PD=QV[GetPlayerId(GetTriggerPlayer())]local integer pb=ab()local string Pbif Ki[PD]<5 thenset mi[PD]=truecall Vb(pb,li[PD],sv)set Pb=Kb(Fb(pb,gi[PD],2))if GetLocalPlayer()==gi[PD]thencall ClearTextMessages()endifcall DisplayTextToPlayer(gi[PD],0,0,"|cff0884D6Saved XP: |r|cffFFCC00"+I2S(li[PD])+"|r
Loadcode:        "+Pb+"
You can test your code by loading it.")set Ki[PD]=Ki[PD]+1elsecall DisplayTextToPlayer(gi[PD],0,0,"You can only save 5 times per game.")endifendfunctionfunction qb takes nothing returns nothinglocal integer PD=QV[GetPlayerId(GetTriggerPlayer())]local integer Qb=ab()local string sb=SubString(GetEventPlayerChatString(),6,StringLength(GetEventPlayerChatString()))if mi[PD]==false thenif Gb(Qb,gi[PD],sb,2)thenset li[PD]=Xb(Qb,sv)call oN(PD)call ClearTextMessages()call DisplayTextToPlayer(gi[PD],0,0,"|cff7AB621Loading successful!|r
Loaded XP: |cffFFCC00"+I2S(li[PD])+"|r
Rank: |cffFFCC00"+Ji[PD])set mi[PD]=trueelsecall DisplayTextToPlayer(gi[PD],0,0,"|cffF73A29Loadcode invalid!")set Li[PD]=Li[PD]+1if Li[PD]>4 thencall DisplayTextToPlayer(gi[PD],0,0,"|cffFF9421You entered too many invalid loadcodes.
Loading is now disabled.")set mi[PD]=trueendifendifelseif Gb(Qb,gi[PD],sb,2)thencall DisplayTextToPlayer(gi[PD],0,0,"|cff7AB621Loadcode valid!")elsecall DisplayTextToPlayer(gi[PD],0,0,"|cffF73A29Loadcode invalid!")endifendifendfunctionfunction Sb takes nothing returns nothinglocal trigger t1=CreateTrigger()local trigger t2=CreateTrigger()local integer i=0call TriggerAddAction(t1,function Mb)loopcall TriggerRegisterPlayerChatEvent(t1,Player(i),"-save",true)set i=i+1exitwhen i>$Bendloopset i=0call TriggerAddAction(t2,function qb)loopcall TriggerRegisterPlayerChatEvent(t2,Player(i),"-load ",false)set i=i+1exitwhen i>$Bendloopset t2=nullset t1=nullendfunctionfunction tb takes nothing returns nothinglocal player p=Player($F)local unit ulocal integer Tblocal trigger tlocal real lifeset u=CreateUnit(p,'n000',6400.,-6784.,270.)set u=CreateUnit(p,'n000',5824.,-4736.,270.)set u=CreateUnit(p,'n000',3456.,-4160.,270.)set u=CreateUnit(p,'n000',832.,-7040.,270.)set u=CreateUnit(p,'n000',-640.,-6976.,270.)set u=CreateUnit(p,'n000',-1664.,-5248.,270.)set u=CreateUnit(p,'n000',-2432.,-6144.,270.)set u=CreateUnit(p,'n000',-4416.,-6400.,270.)set u=CreateUnit(p,'n000',-2624.,-4672.,270.)set u=CreateUnit(p,'n008',-128.,-448.,270.)set u=CreateUnit(p,'n008',-6080.,-4544.,270.)set u=CreateUnit(p,'n008',-3712.,-2560.,270.)set u=CreateUnit(p,'n008',-1792.,960.,270.)set u=CreateUnit(p,'n008',-4736.,320.,270.)set u=CreateUnit(p,'n008',-4736.,3584.,270.)set u=CreateUnit(p,'n008',-1664.,6208.,270.)set u=CreateUnit(p,'n008',-192.,2752.,270.)set u=CreateUnit(p,'n008',-128.,-2560.,270.)set u=CreateUnit(p,'n008',2624.,-2624.,270.)set u=CreateUnit(p,'n008',2496.,-384.,270.)set u=CreateUnit(p,'n008',2560.,1728.,270.)set u=CreateUnit(p,'n008',4288.,3968.,270.)set u=CreateUnit(p,'n008',2624.,6144.,270.)set u=CreateUnit(p,'n008',5568.,6144.,270.)set u=CreateUnit(p,'n008',5568.,1856.,270.)set u=CreateUnit(p,'n008',5568.,-1600.,270.)set u=nullendfunctionfunction ub takes nothing returns nothinglocal player p=Player($F)local unit ulocal integer Tblocal trigger tlocal real lifeset u=CreateUnit(p,'u008',6718.6,-5509.5,169.091)set u=CreateUnit(p,'u008',6239.,-5445.3,235.17)set u=nullendfunctionfunction Ub takes nothing returns nothinglocal player plocal unit ulocal integer Tblocal trigger tlocal real lifeset p=Player($B)set u=CreateUnit(p,'n00R',4352.,-6592.,270.)set u=CreateUnit(p,'n00S',4832.,-6752.,270.)set u=CreateUnit(p,'n00S',4832.,-6176.,270.)set u=CreateUnit(p,'n00S',5408.,-6816.,270.)set u=CreateUnit(p,'n00S',4960.,-7072.,270.)set u=CreateUnit(p,'n00R',5312.,-6144.,270.)set u=CreateUnit(p,'n00R',4352.,-5952.,270.)set u=CreateUnit(p,'n00S',4512.,-6368.,270.)set u=CreateUnit(p,'n00S',5408.,-6368.,270.)set u=CreateUnit(p,'n00S',5792.,-6496.,270.)set u=CreateUnit(p,'h00C',5760.,-5696.,270.)set u=CreateUnit(p,'n00O',6752.,-7072.,270.)set u=CreateUnit(p,'n00M',5952.,-6720.,270.)set u=CreateUnit(p,'n00M',5952.,-6912.,270.)set u=CreateUnit(p,'h00C',5760.,-5760.,270.)set u=CreateUnit(p,'n00P',6080.,-5056.,270.)set u=CreateUnit(p,'n00P',6080.,-5184.,270.)set u=CreateUnit(p,'n00P',6080.,-5312.,270.)set u=CreateUnit(p,'n00P',6080.,-5440.,270.)set u=CreateUnit(p,'n00P',6080.,-5568.,270.)set u=CreateUnit(p,'n00P',6080.,-5696.,270.)set u=CreateUnit(p,'n00P',6080.,-5824.,270.)set u=CreateUnit(p,'n00P',6080.,-5952.,270.)set u=CreateUnit(p,'n00P',6208.,-5952.,270.)set u=CreateUnit(p,'n00P',6336.,-5952.,270.)set u=CreateUnit(p,'n00P',6464.,-5952.,270.)set u=CreateUnit(p,'n00P',6592.,-5952.,270.)set u=CreateUnit(p,'n00P',6720.,-5952.,270.)set u=CreateUnit(p,'n00P',6848.,-5952.,270.)set u=CreateUnit(p,'n00P',6848.,-5824.,270.)set u=CreateUnit(p,'n00P',6848.,-5696.,270.)set u=CreateUnit(p,'n00P',6848.,-5568.,270.)set u=CreateUnit(p,'n00P',6848.,-5440.,270.)set u=CreateUnit(p,'n00P',6848.,-5312.,270.)set u=CreateUnit(p,'n00P',6848.,-5184.,270.)set u=CreateUnit(p,'n00P',6848.,-5056.,270.)set u=CreateUnit(p,'n00P',6720.,-4992.,270.)set u=CreateUnit(p,'n00P',6592.,-4992.,270.)set u=CreateUnit(p,'n00P',6464.,-4992.,270.)set u=CreateUnit(p,'n00P',6336.,-4992.,270.)set u=CreateUnit(p,'n00P',6208.,-4992.,270.)set u=CreateUnit(p,'n00S',6432.,-5088.,270.)set u=CreateUnit(p,'n00S',6368.,-5664.,270.)set u=CreateUnit(p,'n00R',6528.,-5312.,270.)set u=CreateUnit(p,'n00N',6432.,-5600.,270.)set u=CreateUnit(p,'n00O',6432.,-5344.,270.)set u=CreateUnit(p,'n00M',6400.,-5504.,270.)set u=CreateUnit(p,'n00M',6528.,-5184.,270.)set Ge=CreateUnit(p,'n00C',6272.,-4864.,270.)set he=CreateUnit(p,'n00C',6720.,-5184.,270.)set He=CreateUnit(p,'n00C',4288.,-3840.,270.)set u=CreateUnit(p,'n00X',2336.,-6432.,270.)set u=CreateUnit(p,'n00Z',2048.,-4096.,270.)set u=CreateUnit(p,'n00Z',1856.,-5248.,270.)set u=CreateUnit(p,'n00Z',1472.,-4736.,270.)set u=CreateUnit(p,'n00S',2144.,-4640.,270.)set u=CreateUnit(p,'n00R',1984.,-5376.,270.)set u=CreateUnit(p,'n00R',1536.,-5056.,270.)set u=CreateUnit(p,'n00S',2080.,-5728.,270.)set u=CreateUnit(p,'n00S',1312.,-5472.,270.)set u=CreateUnit(p,'n00X',2208.,-6560.,270.)set u=CreateUnit(p,'n00X',2592.,-6048.,270.)set u=CreateUnit(p,'n00X',2144.,-6816.,270.)set u=CreateUnit(p,'n00X',2656.,-7200.,270.)set u=CreateUnit(p,'n00Z',1600.,-6528.,270.)set u=CreateUnit(p,'n00X',1824.,-6304.,270.)set u=CreateUnit(p,'n00X',2528.,-5984.,270.)set u=CreateUnit(p,'n00X',2080.,-6368.,270.)set u=CreateUnit(p,'n00X',2016.,-6304.,270.)set u=CreateUnit(p,'h00C',2752.,-4288.,270.)set u=CreateUnit(p,'n00X',3552.,-4832.,270.)set u=CreateUnit(p,'n00X',3552.,-5152.,270.)set u=CreateUnit(p,'n00X',3616.,-5536.,270.)set u=CreateUnit(p,'n00X',3360.,-5472.,270.)set u=CreateUnit(p,'n00X',2912.,-5536.,270.)set u=CreateUnit(p,'n00X',3040.,-5792.,270.)set u=CreateUnit(p,'n00X',3232.,-5984.,270.)set u=CreateUnit(p,'n00X',3744.,-6240.,270.)set u=CreateUnit(p,'n00X',3808.,-6432.,270.)set u=CreateUnit(p,'n00X',2336.,-6048.,270.)set u=CreateUnit(p,'n00X',2272.,-5984.,270.)set u=CreateUnit(p,'n00Z',3264.,-4352.,270.)set u=CreateUnit(p,'n00Z',3648.,-4352.,270.)set u=CreateUnit(p,'n00Z',3648.,-3968.,270.)set u=CreateUnit(p,'n00Z',3264.,-3968.,270.)set u=CreateUnit(p,'n00X',3168.,-3808.,270.)set u=CreateUnit(p,'n00X',1952.,-6560.,270.)set u=CreateUnit(p,'n00X',2528.,-4960.,270.)set u=CreateUnit(p,'n00R',1920.,-4352.,270.)set u=CreateUnit(p,'n00X',2080.,-4256.,270.)set u=CreateUnit(p,'n00X',1376.,-4640.,270.)set u=CreateUnit(p,'n00X',3360.,-5216.,270.)set u=CreateUnit(p,'n00X',2272.,-6240.,270.)set u=CreateUnit(p,'n00Z',3712.,-6656.,270.)set u=CreateUnit(p,'n00Z',3968.,-6656.,270.)set u=CreateUnit(p,'n00Z',3584.,-6144.,270.)set u=CreateUnit(p,'n00Z',3584.,-5760.,270.)set u=CreateUnit(p,'n00Z',3200.,-5248.,270.)set u=CreateUnit(p,'n00Z',3200.,-5504.,270.)set u=CreateUnit(p,'n00X',3040.,-6432.,270.)set u=CreateUnit(p,'n00X',3680.,-5280.,270.)set u=CreateUnit(p,'n00S',1696.,-5152.,270.)set u=CreateUnit(p,'n00X',2336.,-6304.,270.)set u=CreateUnit(p,'n00Z',3200.,-7040.,270.)set u=CreateUnit(p,'n00Z',2944.,-6656.,270.)set u=CreateUnit(p,'n00Z',1600.,-6144.,270.)set u=CreateUnit(p,'h00C',2752.,-4416.,270.)set u=CreateUnit(p,'n00S',2528.,-3936.,270.)set u=CreateUnit(p,'n00S',1824.,-4128.,270.)set u=CreateUnit(p,'n00S',1504.,-4320.,270.)set u=CreateUnit(p,'n00S',1696.,-4768.,270.)set Qe=CreateUnit(p,'n00C',2432.,-6656.,270.)set u=CreateUnit(p,'n00Z',1984.,-7104.,270.)set u=CreateUnit(p,'h00C',-256.,-6080.,270.)set ze=CreateUnit(p,'h019',256.,-5056.,270.)set Ze=CreateUnit(p,'h019',-384.,-5248.,270.)set vx=CreateUnit(p,'h019',-448.,-5696.,270.)set ex=CreateUnit(p,'h019',-448.,-4736.,270.)set nx=CreateUnit(p,'n006',-1792.,-6784.,270.)set Vx=CreateUnit(p,'n006',-1792.,-6400.,270.)set Ex=CreateUnit(p,'n006',-1408.,-5760.,270.)set Xx=CreateUnit(p,'n006',-960.,-6144.,270.)set Ox=CreateUnit(p,'n006',-1152.,-5760.,270.)set u=CreateUnit(p,'n003',-1152.,-7040.,270.)set u=CreateUnit(p,'n003',-1408.,-7104.,270.)set u=CreateUnit(p,'n003',-1024.,-6784.,270.)set u=CreateUnit(p,'n003',-1024.,-6400.,270.)set u=CreateUnit(p,'n003',-1728.,-6144.,270.)set Rx=CreateUnit(p,'n006',-1664.,-6272.,270.)set u=CreateUnit(p,'n003',-1664.,-6976.,270.)set u=CreateUnit(p,'n01I',-1152.,-4096.,270.)set u=CreateUnit(p,'n01I',-1344.,-3840.,270.)set u=CreateUnit(p,'n01I',-1600.,-3968.,270.)set u=CreateUnit(p,'n003',-1600.,-3776.,270.)set u=CreateUnit(p,'n003',-1344.,-4224.,270.)set Nx=CreateUnit(p,'n01D',-192.,-4096.,270.)set bx=CreateUnit(p,'n01D',-192.,-4352.,270.)set Bx=CreateUnit(p,'n006',-1920.,-3968.,270.)set Cx=CreateUnit(p,'n006',-1472.,-4224.,270.)set Dx=CreateUnit(p,'n006',-1216.,-3776.,270.)set u=CreateUnit(p,'n003',-896.,-3968.,270.)set u=CreateUnit(p,'h00C',-640.,-3968.,270.)set u=CreateUnit(p,'h00C',-640.,-4224.,270.)set u=CreateUnit(p,'n00Z',-192.,-3776.,270.)set u=CreateUnit(p,'n00Z',-128.,-3776.,270.)set u=CreateUnit(p,'n00Z',-64.,-3776.,270.)set u=CreateUnit(p,'n00Z',.0,-3776.,270.)set u=CreateUnit(p,'n00Z',-192.,-3968.,270.)set u=CreateUnit(p,'n00Z',-128.,-3968.,270.)set u=CreateUnit(p,'n00Z',-64.,-3968.,270.)set u=CreateUnit(p,'n00Z',.0,-3968.,270.)set fx=CreateUnit(p,'n00C',640.,-3840.,270.)set u=CreateUnit(p,'n018',-3968.,-6144.,270.)set u=CreateUnit(p,'n018',-4096.,-4352.,270.)set u=CreateUnit(p,'n018',-4800.,-4096.,270.)set u=CreateUnit(p,'h00C',-4736.,-4352.,270.)set tx=CreateUnit(p,'n00C',-4480.,-5248.,270.)set u=CreateUnit(p,'n019',-2784.,-6496.,270.)set u=CreateUnit(p,'n019',-4064.,-6112.,270.)set u=CreateUnit(p,'n018',-3648.,-6784.,270.)set u=CreateUnit(p,'n018',-2688.,-5440.,270.)set u=CreateUnit(p,'n018',-4032.,-5504.,270.)set u=CreateUnit(p,'n018',-4096.,-5504.,270.)set u=CreateUnit(p,'n018',-4160.,-5568.,270.)set u=CreateUnit(p,'n018',-3456.,-4480.,270.)set u=CreateUnit(p,'n018',-3328.,-4288.,270.)set u=CreateUnit(p,'n018',-2944.,-3968.,270.)set u=CreateUnit(p,'n018',-4416.,-4416.,270.)set u=CreateUnit(p,'n018',-4288.,-4544.,270.)set u=CreateUnit(p,'n018',-3008.,-7040.,270.)set u=CreateUnit(p,'n018',-4352.,-6656.,270.)set u=CreateUnit(p,'n018',-4672.,-4992.,270.)set u=CreateUnit(p,'n018',-3456.,-5184.,270.)set u=CreateUnit(p,'n018',-3520.,-5184.,270.)set u=CreateUnit(p,'n018',-3584.,-5184.,270.)set u=CreateUnit(p,'n018',-2944.,-5824.,270.)set u=CreateUnit(p,'n018',-4608.,-6912.,270.)set u=CreateUnit(p,'n018',-4608.,-6976.,270.)set u=CreateUnit(p,'n018',-4608.,-7040.,270.)set u=CreateUnit(p,'h00C',-4032.,-5824.,270.)set u=CreateUnit(p,'n018',-3968.,-6784.,270.)set u=CreateUnit(p,'n018',-2688.,-7040.,270.)set u=CreateUnit(p,'n018',-3264.,-7104.,270.)set u=CreateUnit(p,'n018',-3136.,-6656.,270.)set u=CreateUnit(p,'n018',-2944.,-6912.,270.)set u=CreateUnit(p,'n018',-2688.,-6208.,270.)set u=CreateUnit(p,'n018',-2496.,-6400.,270.)set u=CreateUnit(p,'n018',-3648.,-5568.,270.)set u=CreateUnit(p,'n018',-4160.,-6144.,270.)set u=nullendfunctionfunction wb takes nothing returns nothinglocal player plocal unit ulocal integer Tblocal trigger tlocal real lifeset p=Player(8)set jx=CreateUnit(p,'h01M',-2687.4,-3967.1,78.599)call SetUnitState(jx,UNIT_STATE_MANA,0)set Kx=CreateUnit(p,'n00E',-3114.9,-4324.3,136.432)call SetUnitState(Kx,UNIT_STATE_MANA,0)set lx=CreateUnit(p,'n00E',-3330.5,-4613.7,136.432)call SetUnitState(lx,UNIT_STATE_MANA,0)set Lx=CreateUnit(p,'n00E',-2939.3,-4615.,136.432)call SetUnitState(Lx,UNIT_STATE_MANA,0)set Px=CreateUnit(p,'h01I',-2685.3,-4137.3,271.772)call SetUnitState(Px,UNIT_STATE_MANA,0)set Tx=CreateUnit(p,'h01M',-3017.1,-5359.,115.415)call SetUnitState(Tx,UNIT_STATE_MANA,0)set ux=CreateUnit(p,'h01M',-3672.,-6839.6,.0)call SetUnitState(ux,UNIT_STATE_MANA,0)set Ux=CreateUnit(p,'h01M',-3121.4,-4608.,78.6)set wx=CreateUnit(p,'n00E',-3676.1,-7034.1,.0)call SetUnitState(wx,UNIT_STATE_MANA,0)set Wx=CreateUnit(p,'n00E',-3673.6,-6615.5,.0)call SetUnitState(Wx,UNIT_STATE_MANA,0)set ao=CreateUnit(p,'n00E',-3073.2,-5425.8,284.115)call SetUnitState(ao,UNIT_STATE_MANA,0)set no=CreateUnit(p,'n00E',-3141.1,-5487.1,69.194)call SetUnitState(no,UNIT_STATE_MANA,0)set Vo=CreateUnit(p,'n00E',-3222.6,-5571.2,322.92)call SetUnitState(Vo,UNIT_STATE_MANA,0)set Eo=CreateUnit(p,'n00E',-3076.7,-5314.4,277.908)call SetUnitState(Eo,UNIT_STATE_MANA,0)set Xo=CreateUnit(p,'n00E',-3219.2,-5174.8,214.218)call SetUnitState(Xo,UNIT_STATE_MANA,0)set Oo=CreateUnit(p,'n00E',-2815.3,-5565.2,136.432)call SetUnitState(Oo,UNIT_STATE_MANA,0)set Ro=CreateUnit(p,'n00E',-2795.8,-5169.4,272.601)call SetUnitState(Ro,UNIT_STATE_MANA,0)set Io=CreateUnit(p,'n00E',-2869.7,-5234.5,133.334)call SetUnitState(Io,UNIT_STATE_MANA,0)set p=Player($B)set fe=CreateUnit(p,'h015',5598.6,-5138.9,151.979)set Fe=CreateUnit(p,'h015',4981.6,-5760.2,106.032)set ge=CreateUnit(p,'h015',5119.5,-4604.1,232.972)set je=CreateUnit(p,'h01H',1329.3,-7011.2,294.629)set Je=CreateUnit(p,'h01H',2655.5,-5819.3,78.346)set ke=CreateUnit(p,'h01H',1652.,-6955.5,258.461)set Ke=CreateUnit(p,'n00D',2950.7,-5386.7,11.701)set le=CreateUnit(p,'n00D',3231.3,-4969.9,37.53)set Le=CreateUnit(p,'n00D',3888.3,-4974.1,20.248)set me=CreateUnit(p,'n00D',2921.4,-6160.2,345.267)set Me=CreateUnit(p,'n00D',3783.7,-6538.8,11.701)set pe=CreateUnit(p,'n00D',3439.1,-6138.1,11.701)set Pe=CreateUnit(p,'h01H',2649.1,-6666.3,15.293)set qe=CreateUnit(p,'h01H',3615.6,-6882.5,221.118)set se=CreateUnit(p,'n009',-1919.6,-5114.6,178.5)set Se=CreateUnit(p,'h018',-232.8,-7156.9,185.982)set te=CreateUnit(p,'h018',552.3,-7083.5,339.839)set Te=CreateUnit(p,'h018',104.8,-6910.4,170.557)set ue=CreateUnit(p,'h018',-793.9,-6670.3,208.977)set Ue=CreateUnit(p,'n009',-148.1,-6414.,114.25)set We=CreateUnit(p,'n009',-168.1,-6651.2,178.5)set ye=CreateUnit(p,'n009',224.7,-5981.4,14.975)set Ye=CreateUnit(p,'n009',-258.3,-5635.8,183.049)set xx=CreateUnit(p,'u004',-617.5,-5762.3,1.)set ox=CreateUnit(p,'u004',-137.9,-5529.5,1.)call SetUnitState(ox,UNIT_STATE_MANA,0)set rx=CreateUnit(p,'u004',488.6,-5519.,1.)call SetUnitState(rx,UNIT_STATE_MANA,0)set ix=CreateUnit(p,'u004',67.6,-4861.4,1.)call SetUnitState(ix,UNIT_STATE_MANA,0)set Ix=CreateUnit(p,'n009',-1064.6,-4850.3,178.5)set Ax=CreateUnit(p,'n009',-1321.3,-5044.2,178.5)set Fx=CreateUnit(p,'n009',400.7,-4625.7,178.5)call SetUnitState(Fx,UNIT_STATE_MANA,0)set gx=CreateUnit(p,'n009',585.3,-4750.5,178.5)set Gx=CreateUnit(p,'n009',-741.,-4479.1,178.5)set hx=CreateUnit(p,'n00E',-4187.1,-6894.,228.358)set Hx=CreateUnit(p,'n00E',-4210.6,-7007.3,228.358)set Jx=CreateUnit(p,'n00E',-2353.4,-5106.2,136.43)set kx=CreateUnit(p,'n00E',-2375.2,-5368.5,136.43)set mx=CreateUnit(p,'n00E',-4757.3,-6392.9,228.358)set Mx=CreateUnit(p,'n00E',-4207.3,-7212.3,228.358)set Qx=CreateUnit(p,'n00E',-4796.4,-4971.4,214.22)set sx=CreateUnit(p,'n00E',-4635.9,-5183.9,214.22)set Sx=CreateUnit(p,'h01I',-3985.1,-4649.6,117.546)set yx=CreateUnit(p,'h01I',-3504.,-6387.5,73.303)set Yx=CreateUnit(p,'n00E',-2448.5,-6615.8,.67)set zx=CreateUnit(p,'n00E',-3128.,-6423.,240.992)set Zx=CreateUnit(p,'n00E',-2656.8,-6781.1,127.775)set vo=CreateUnit(p,'h01I',-3396.1,-7208.5,49.209)set eo=CreateUnit(p,'n00E',-4409.7,-6029.,114.569)set xo=CreateUnit(p,'n00E',-3999.8,-6411.9,315.779)set oo=CreateUnit(p,'n00E',-3772.6,-5905.2,128.445)set io=CreateUnit(p,'n00E',-4433.7,-6658.8,228.358)set Ao=CreateUnit(p,'h01I',-3540.,-5314.,117.546)endfunctionfunction Wb takes unit u returns booleanreturn GetUnitTypeId(u)=='H003' or GetUnitTypeId(u)=='H00B' or GetUnitTypeId(u)=='H00D'endfunctionfunction yb takes unit u returns booleanreturn GetUnitTypeId(u)=='u001' or GetUnitTypeId(u)=='u005' or GetUnitTypeId(u)=='u007' or GetUnitTypeId(u)=='u00C'endfunctionfunction Yb takes unit u returns booleanlocal integer nN=0loopexitwhen not(No[nN]!=null)if GetUnitTypeId(u)==No[nN]thenreturn trueendifset nN=nN+1endloopreturn falseendfunctionfunction zb takes integer yX returns nothingset Oa[yX]=GetUnitX(Xa[yX])set Ra[yX]=GetUnitY(Xa[yX])endfunctionfunction Zb takes nothing returns nothinglocal unit u=GetOrderedUnit()local unit u2=GetOrderTargetUnit()local real x=GetOrderPointX()local real y=GetOrderPointY()local integer yX=GetUnitUserData(u)call zb(yX)if u==u2 thenset u2=nullendifif GetIssuedOrderId()==$D000C or GetIssuedOrderId()==$D0003 and GetUnitAbilityLevel(u,'ARal')>0 thenif u2==null thenset Ba[yX]=trueset Ia[yX]=xset Aa[yX]=yset ba[yX]=nullelseset Ba[yX]=falseset ba[yX]=u2set Ia[yX]=GetUnitX(u2)set Aa[yX]=GetUnitY(u2)set u2=nullendifset Na[yX]=CO(yX)endifset u=nullset u2=nullendfunctionfunction vB takes unit u,real cO,code c returns integerlocal integer yX=dO()set Xa[yX]=uset Oa[yX]=GetUnitX(Xa[yX])set Ra[yX]=GetUnitY(Xa[yX])set Ia[yX]=Oa[yX]set Aa[yX]=Ra[yX]if cO>0 thenset ca[yX]=CreateTrigger()call lA(ca[yX],Xa[yX],cO)call TriggerAddAction(ca[yX],c)endifcall TriggerRegisterUnitEvent(bo,Xa[yX],EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(bo,Xa[yX],EVENT_UNIT_ISSUED_TARGET_ORDER)return yXendfunctionfunction eB takes integer yX returns realreturn GetUnitX(Xa[yX])endfunctionfunction xB takes integer yX returns realreturn GetUnitY(Xa[yX])endfunctionfunction oB takes integer yX returns realreturn kA(eB(yX),xB(yX))endfunctionfunction rB takes integer yX returns realif Ba[yX]thenreturn Ia[yX]elseif GetWidgetLife(ba[yX])>.405 thenreturn GetUnitX(ba[yX])elseset ba[yX]=nullset Ba[yX]=truereturn Ia[yX]endifendifendfunctionfunction iB takes integer yX returns realif Ba[yX]thenreturn Aa[yX]elseif GetWidgetLife(ba[yX])>.405 thenreturn GetUnitY(ba[yX])elseset ba[yX]=nullset Ba[yX]=truereturn Aa[yX]endifendifendfunctionfunction aB takes integer yX returns realreturn GI(eB(yX),xB(yX),rB(yX),iB(yX))endfunctionfunction nB takes integer yX returns playerreturn GetOwningPlayer(Xa[yX])endfunctionfunction VB takes integer yX returns nothingcall PA(Xa[yX])set Xa[yX]=nullset ba[yX]=nullset Na[yX]=.0set ca[yX]=nullcall DO(yX)endfunctionfunction EB takes unit u returns nothinglocal integer XBif GetUnitUserData(u)>0 and not Wb(u)thenset XB=GetUnitUserData(u)call VB(XB)endifendfunctionfunction OB takes nothing returns nothingset bo=CreateTrigger()call TriggerAddAction(bo,function Zb)set No[0]='u000'set No[1]='n00E'set No[2]='n015'set No[3]='n005'set No[4]='n00D'set No[5]='n007'set No[6]='n009'set No[7]='h018'set No[8]='h011'set No[9]='h01I'set No[$A]='u003'set No[$B]='h01H'set No[$C]='u008'set No[$D]='u004'set No[$E]='h01Q'set No[$F]='u006'set No[16]='h001'set No[17]='u00B'set No[18]='h01K'set No[19]='u002'set No[20]='u009'set No[21]='u00A'endfunctionfunction RB takes nothing returns nothingcall RemoveItem(GetEnumItem())endfunctionfunction IB takes integer ri,player o returns nothinglocal unit u2local group g=RI()local rect r=Go[ri]call GroupEnumUnitsInRect(g,r,M)loopset u2=FirstOfGroup(g)exitwhen u2==nullif(GetPlayerId(GetOwningPlayer(u2))>7)and yb(u2)==false and Wb(u2)==false and GetUnitTypeId(u2)!='n00A' thencall dR(u2)endifcall GroupRemoveUnit(g,u2)endloopcall EnumItemsInRect(r,M,function RB)call II(g)set u2=nullset r=nullset g=nullendfunctionfunction AB takes nothing returns booleanlocal unit u=GetTriggerUnit()if GetSpellAbilityId()=='A020' thencall IB(oA(GetUnitX(u),GetUnitY(u)),GetOwningPlayer(u))endifset u=nullreturn falseendfunctionfunction NB takes nothing returns nothinglocal player p=GetTriggerPlayer()local integer bB=S2I(SubString(GetEventPlayerChatString(),5,StringLength(GetEventPlayerChatString())))call SetCameraFieldForPlayer(p,CAMERA_FIELD_TARGET_DISTANCE,bB+$4B0,1)endfunctionfunction BB takes nothing returns nothinglocal player p=GetTriggerPlayer()if GetLocalPlayer()==p thencall ClearTextMessages()endifendfunctionfunction cB takes nothing returns nothinglocal integer yX=GetUnitUserData(GetSpellAbilityUnit())local player CB=nB(yX)if GetSpellAbilityId()=='A026' thenset da[yX]=da[yX]+1if da[yX]>25 thenset da[yX]=1endifcall CR(Ca[yX],false,false)set Ca[yX]=KN(Bo[da[yX]],CB)call DisplayTextToPlayer(CB,0,0,"|cffC51019Current Sound:|r "+I2S(da[yX]))elseif GetSpellAbilityId()=='A01Q' thenset da[yX]=da[yX]-1if da[yX]<1 thenset da[yX]=25endifcall CR(Ca[yX],false,false)set Ca[yX]=KN(Bo[da[yX]],CB)call DisplayTextToPlayer(CB,0,0,"|cffC51019Current Sound:|r "+I2S(da[yX]))elseif GetSpellAbilityId()=='A01O' thencall CR(Ca[yX],false,false)set Ca[yX]=KN(Bo[da[yX]],CB)call DisplayTextToPlayer(CB,0,0,"|cffC51019Current Sound:|r "+I2S(da[yX]))elseif GetSpellAbilityId()=='A025' thenif Da[yX]thenset Da[yX]=falsecall DisplayTextToPlayer(CB,0,0,"|cffC51019One-Shot Mode|r deactivated")elseset Da[yX]=truecall DisplayTextToPlayer(CB,0,0,"|cffC51019One-Shot Mode|r activated")endifendifendfunctionfunction dB takes nothing returns nothinglocal unit s=pA(GetTriggeringTrigger())local unit u=GetTriggerUnit()local integer yX=GetUnitUserData(s)if Wb(u)thencall kN(Bo[da[yX]],eB(yX),xB(yX),0)if Da[yX]thencall dR(s)endifendifset u=nullset s=nullendfunctionfunction DB takes nothing returns nothinglocal unit u=GetConstructedStructure()call SetUnitUserData(u,(hO(u,40)))set u=nullendfunctionfunction fB takes unit u,real cO returns integerlocal integer yX=HO(u,cO,function dB)set fa[yX]=CreateTrigger()call TriggerRegisterUnitEvent(fa[yX],Xa[yX],EVENT_UNIT_SPELL_CAST)call TriggerAddAction(fa[yX],function cB)return yXendfunctionfunction FB takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='n01E'endfunctionfunction gB takes nothing returns nothinglocal unit s=pA(GetTriggeringTrigger())local unit u=GetTriggerUnit()local integer yX=GetUnitUserData(s)if(GetUnitAbilityLevel(s,'B00A')>0)==false and Wb(u)thencall SetUnitPosition(u,rB(yX),iB(yX))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl",eB(yX),xB(yX)))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl",rB(yX),iB(yX)))call PanCameraToTimedForPlayer(GetOwningPlayer(u),rB(yX),iB(yX),.03)elseif GetUnitAbilityLevel(s,'B00A')>0 and Yb(u)thencall SetUnitPosition(u,rB(yX),iB(yX))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl",eB(yX),xB(yX)))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkCaster.mdl",rB(yX),iB(yX)))endifset s=nullset u=nullendfunctionfunction GB takes nothing returns nothinglocal unit u=GetConstructedStructure()call SetUnitUserData(u,(gO(u,50)))set u=nullendfunctionfunction hB takes unit u,real cO returns integerlocal integer yX=GO(u,cO,function gB)return yXendfunctionfunction HB takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='n00C'endfunctionfunction jB takes nothing returns nothinglocal trigger QA=CreateTrigger()call qA(QA,Condition(function HB))call TriggerAddAction(QA,function GB)endfunctionfunction JB takes nothing returns nothinglocal integer kB=YI(GetExpiredTimer())local unit u=LoadUnitHandle(ht,kB,0)local integer yX=LoadInteger(ht,kB,1)call FlushChildHashtable(ht,kB)call IssuePointOrderById(u,$D0012,rB(yX),iB(yX))call ZI(GetExpiredTimer())set u=nullendfunctionfunction KB takes nothing returns nothinglocal unit s=pA(GetTriggeringTrigger())local unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local integer yX=GetUnitUserData(s)local timer lBlocal integer id=GetHandleId(u)if nB(yX)==p thenif GetUnitTypeId(u)=='u00B' thenif Fa[yX]thenset s=nullset u=nullset u=nullset s=nullreturnendifendifif yb(u)==false and Wb(u)==false thenif Ga[yX]>0 thencall IssueImmediateOrderById(u,$D0004)set lB=zI()call yI(lB,id)call SaveUnitHandle(ht,id,0,u)call SaveInteger(ht,id,1,(yX))call TimerStart(lB,Ga[yX],false,function JB)elsecall IssuePointOrderById(u,$D0012,rB(yX),iB(yX))endifendifendifset s=nullset u=nullset lB=nullendfunctionfunction LB takes nothing returns nothinglocal integer yX=GetUnitUserData(GetSpellAbilityUnit())local integer id=GetSpellAbilityId()if id=='A027' thenif Fa[yX]thenset Fa[yX]=falseif GetLocalPlayer()==nB(yX)thencall sI("activated",$B,Xa[yX],1.5,64,$FF,$80,$A)endifelseset Fa[yX]=trueif GetLocalPlayer()==nB(yX)thencall sI("deactivated",$B,Xa[yX],1.5,$FF,64,$80,$A)endifendifendifif id=='A054' and Ga[yX]<$A thenset Ga[yX]=Ga[yX]+1if GetLocalPlayer()==nB(yX)thencall sI(I2S(Ga[yX]),$E,Xa[yX],1.5,$FF,$FF,$FF,$A)endifendifif id=='A055' and Ga[yX]>0 thenset Ga[yX]=Ga[yX]-1if GetLocalPlayer()==nB(yX)thencall sI(I2S(Ga[yX]),$E,Xa[yX],1.5,$FF,$FF,$FF,$A)endifendifendfunctionfunction mB takes nothing returns nothinglocal unit u=GetConstructedStructure()call SetUnitUserData(u,(fO(u,35)))set u=nullendfunctionfunction MB takes unit u,real cO returns integerlocal integer yX=FO(u,cO,function KB)set ga[yX]=CreateTrigger()call TriggerRegisterUnitEvent(ga[yX],u,EVENT_UNIT_SPELL_CAST)call TriggerAddAction(ga[yX],function LB)return yXendfunctionfunction pB takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='n004'endfunctionfunction PB takes nothing returns nothinglocal trigger QA=CreateTrigger()call qA(QA,Condition(function pB))call TriggerAddAction(QA,function mB)endfunctionfunction qB takes integer yX,string s returns nothinglocal boolean QB=falselocal string array sBlocal integer nN=0local integer SBloopexitwhen not(nN<6)if s==co[nN]thenset sB[0]=SubString(co[nN],0,2)set sB[1]=SubString(co[nN],3,5)set sB[2]=SubString(co[nN],6,8)set QB=trueexitwhen trueendifset nN=nN+1endloopif not QB thenset nN=0set SB=0loopexitwhen not(SB<StringLength(s)+1)if SubString(s,SB,SB+1)!=" " thenset sB[nN]=sB[nN]+(SubString(s,SB,SB+1))elseset nN=nN+1if nN>2 thenexitwhen trueendifendifset SB=SB+1endloopendifset Ha[yX]=S2I(sB[0])set ja[yX]=S2I(sB[1])set Ja[yX]=S2I(sB[2])call DisplayTextToPlayer(nB(yX),0,0,"Red: "+sB[0]+" Green: "+sB[1]+" Blue: "+sB[2])endfunctionfunction tB takes nothing returns nothinglocal unit ulocal integer yXlocal group g=RI()local player p=GetTriggerPlayer()call GroupEnumUnitsOfType(g,UnitId2String('n01B'),M)loopset u=FirstOfGroup(g)exitwhen(u==null)if IsUnitSelected(u,p)and GetUnitTypeId(u)=='n01B' and GetOwningPlayer(u)==p thenset yX=GetUnitUserData(u)call qB(yX,SubString(GetEventPlayerChatString(),$A,StringLength(GetEventPlayerChatString())))call SetTextTagColor(ha[yX],Ha[yX],ja[yX],Ja[yX],$FF)endifcall GroupRemoveUnit(g,u)set u=nullendloopset u=nullcall II(g)set g=nullendfunctionfunction TB takes nothing returns nothinglocal unit ulocal integer yXlocal group g=RI()local player p=GetTriggerPlayer()call GroupEnumUnitsOfType(g,UnitId2String('n01B'),M)loopset u=FirstOfGroup(g)exitwhen(u==null)if IsUnitSelected(u,p)and GetUnitTypeId(u)=='n01B' and GetOwningPlayer(u)==p thenset yX=GetUnitUserData(u)call SetTextTagText(ha[yX],SubString(GetEventPlayerChatString(),9,StringLength(GetEventPlayerChatString())),.0276)endifcall GroupRemoveUnit(g,u)set u=nullendloopset u=nullcall II(g)set g=nullendfunctionfunction uB takes nothing returns nothinglocal unit ulocal integer yXlocal group g=RI()local player p=GetTriggerPlayer()call GroupEnumUnitsOfType(g,UnitId2String('n01B'),M)loopset u=FirstOfGroup(g)exitwhen(u==null)if IsUnitSelected(u,p)and GetUnitTypeId(u)=='n01B' and GetOwningPlayer(u)==p thenset yX=GetUnitUserData(u)call SetTextTagVisibility(ha[yX],true)endifcall GroupRemoveUnit(g,u)set u=nullendloopset u=nullcall II(g)set g=nullendfunctionfunction UB takes nothing returns nothinglocal unit ulocal integer yXlocal group g=RI()local player p=GetTriggerPlayer()call GroupEnumUnitsOfType(g,UnitId2String('n01B'),M)loopset u=FirstOfGroup(g)exitwhen(u==null)if IsUnitSelected(u,p)and GetUnitTypeId(u)=='n01B' and GetOwningPlayer(u)==p thenset yX=GetUnitUserData(u)call SetTextTagVisibility(ha[yX],false)endifcall GroupRemoveUnit(g,u)set u=nullendloopset u=nullcall II(g)set g=nullendfunctionfunction wB takes nothing returns nothinglocal unit u=pA(GetTriggeringTrigger())local integer yX=GetUnitUserData(u)if Wb(GetTriggerUnit())thencall SetTextTagVisibility(ha[yX],true)endifset u=nullendfunctionfunction WB takes nothing returns nothinglocal unit u=GetConstructedStructure()call SetUnitUserData(u,(JO(u,64)))set u=nullendfunctionfunction yB takes unit u,real cO returns integerlocal integer yX=kO(u,cO,function wB)set ha[yX]=CreateTextTag()call SetTextTagColor(ha[yX],$FF,$FF,$FF,0)call SetTextTagPosUnit(ha[yX],Xa[yX],0)call SetTextTagVisibility(ha[yX],false)call SetTextTagPermanent(ha[yX],true)return yXendfunctionfunction YB takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='n01B'endfunctionfunction zB takes nothing returns integerlocal integer yX=bO()return yXendfunctionfunction ZB takes integer yX returns nothingset La[yX]=nullcall DestroyEffect(Qa[yX])set Qa[yX]=nullendfunctionfunction vc takes integer yX returns nothingif yX==null thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Attempt to destroy a null struct of type: Jumper__JumpData")returnelseif(la[yX]!=-1)thencall DisplayTimedTextToPlayer(GetLocalPlayer(),0,0,1000.,"Double free of type: Jumper__JumpData")returnendifcall ZB(yX)set la[yX]=kaset ka=yXendfunctionfunction ec takes nothing returns nothinglocal integer xc=YI(GetExpiredTimer())set Pa[xc]=Pa[xc]+$Fif Pa[xc]>=pa[xc]thencall SetUnitPosition(La[xc],DI(GetUnitX(La[xc]),pa[xc]-(Pa[xc]-$F),qa[xc]),gI(GetUnitY(La[xc]),pa[xc]-(Pa[xc]-$F),qa[xc]))call SetUnitFlyHeight(La[xc],0,0)call ZI(GetExpiredTimer())call SaveBoolean(ht,sa[xc],5,false)call DestroyEffect(Qa[xc])call SetUnitPathing(La[xc],true)call vc(xc)returnendifcall SetUnitPosition(La[xc],DI(GetUnitX(La[xc]),$F,qa[xc]),gI(GetUnitY(La[xc]),$F,qa[xc]))call SetUnitFlyHeight(La[xc],HI(ma[xc],Ma[xc],ma[xc]+$C8,pa[xc],Pa[xc])-ma[xc],0)endfunctionfunction oc takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit u2=pA(GetTriggeringTrigger())local integer xc=zB()local integer yX=GetUnitUserData(u2)local real dx=rB(yX)-eB(yX)local real dy=iB(yX)-xB(yX)local timer lBset sa[xc]=GetHandleId(u)set La[xc]=uset pa[xc]=SquareRoot(dx*dx+dy*dy)set ma[xc]=kA(eB(yX),xB(yX))set Ma[xc]=oB(yX)set qa[xc]=GI(eB(yX),xB(yX),rB(yX),iB(yX))if(pa[xc]<20 or pa[xc]>$FA0)or Wb(u)==false or GetUnitFlyHeight(u)>20 thencall vc(xc)set u=nullset u2=nullset u2=nullset u=nullreturnendifcall SetUnitPosition(u,eB(yX),xB(yX))set lB=zI()call yI(lB,xc)set Qa[xc]=AddSpecialEffectTarget("Abilities\\Spells\\Other\\Tornado\\Tornado_Target.mdl",u,"origin")call TimerStart(lB,.02,true,function ec)call SaveBoolean(ht,sa[xc],9123,true)call SetUnitPathing(u,false)call PauseUnit(u,false)set u=nullset u2=nullset lB=nullendfunctionfunction ic takes nothing returns nothinglocal unit u=GetConstructedStructure()call SetUnitUserData(u,(KO(u,50)))set u=nullendfunctionfunction ac takes unit u,real cO returns integerlocal integer yX=lO(u,cO,function oc)return yXendfunctionfunction nc takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='n00B'endfunctionfunction Vc takes nothing returns nothinglocal integer yX=YI(GetExpiredTimer())local unit ulocal real fIlocal real FIlocal group Ec=RI()call GroupAddGroup(Sa[yX],Ec)loopset u=FirstOfGroup(Ec)exitwhen u==nullset fI=LoadReal(ht,GetHandleId(u),do)set FI=LoadReal(ht,GetHandleId(u),Do)+Ta[yX]if GetWidgetLife(u)>.405 thencall SetUnitPosition(u,eB(yX)+fI*Cos(FI*bj_DEGTORAD),xB(yX)+fI*Sin(FI*bj_DEGTORAD))call SetUnitFacing(u,FI)call SaveReal(ht,GetHandleId(u),Do,FI)elsecall RemoveSavedReal(ht,GetHandleId(u),do)call RemoveSavedReal(ht,GetHandleId(u),Do)call GroupRemoveUnit(Sa[yX],u)endifcall GroupRemoveUnit(Ec,u)endloopcall II(Ec)set u=nullset Ec=nullendfunctionfunction Xc takes nothing returns booleanreturn(IsUnitType(GetFilterUnit(),UNIT_TYPE_STRUCTURE)==false and GetOwningPlayer(GetFilterUnit())==GetOwningPlayer(GetFilterUnit())and yb(GetFilterUnit())==false and Wb(GetFilterUnit())==false and GetUnitTypeId(GetFilterUnit())!='h01M')!=nullendfunctionfunction Oc takes nothing returns nothinglocal unit u=GetSpellTargetUnit()local unit u2=GetSpellAbilityUnit()local integer yX=GetUnitUserData(u2)local real fIlocal real FIlocal group g=RI()if GetSpellAbilityId()=='A01B' and IsUnitType(u,UNIT_TYPE_STRUCTURE)==false and GetOwningPlayer(u)==GetOwningPlayer(GetTriggerUnit())and yb(u)==false and Wb(u)==false thenif UnitHasBuffBJ(u,'A01I')thencall GroupRemoveUnit(Sa[yX],u)call UnitRemoveAbility(u,'A01I')elsecall GroupAddUnit(Sa[yX],u)set fI=hI(GetUnitX(u),GetUnitY(u),GetUnitX(u2),GetUnitY(u2))call SaveReal(ht,GetHandleId(u),do,fI)set FI=GI(GetUnitX(u),GetUnitY(u),GetUnitX(u2),GetUnitY(u2))call SaveReal(ht,GetHandleId(u),Do,FI-$B4)call UnitAddAbility(u,'A01I')endifendifif GetSpellAbilityId()=='A04M' thencall GroupEnumUnitsInRange(g,GetSpellTargetX(),GetSpellTargetY(),300,Condition(function Xc))loopset u=FirstOfGroup(g)exitwhen u==nullif UnitHasBuffBJ(u,'A01I')thencall GroupRemoveUnit(Sa[yX],u)call UnitRemoveAbility(u,'A01I')elsecall GroupAddUnit(Sa[yX],u)set fI=hI(GetUnitX(u),GetUnitY(u),GetUnitX(u2),GetUnitY(u2))call SaveReal(ht,GetHandleId(u),do,fI)set FI=GI(GetUnitX(u),GetUnitY(u),GetUnitX(u2),GetUnitY(u2))call SaveReal(ht,GetHandleId(u),Do,FI-$B4)call UnitAddAbility(u,'A01I')endifcall GroupRemoveUnit(g,u)endloopendifif GetSpellAbilityId()=='A01F' thenif Ta[yX]<20 thenset Ta[yX]=Ta[yX]+1if GetLocalPlayer()==nB(yX)thencall sI(I2S(Ta[yX]),$A,Xa[yX],1.5,$FF,$FF,$FF,$A)endifendifendifif GetSpellAbilityId()=='A01G' thenif Ta[yX]>-20 thenset Ta[yX]=Ta[yX]-1if GetLocalPlayer()==nB(yX)thencall sI(I2S(Ta[yX]),$A,Xa[yX],1.5,$FF,$FF,$FF,$A)endifendifendifcall II(g)set u=nullset u2=nullset g=nullendfunctionfunction Rc takes nothing returns nothinglocal unit u=GetConstructedStructure()call SetUnitUserData(u,(LO(u,0)))set u=nullendfunctionfunction Ic takes unit u,real cO returns integerlocal integer yX=mO(u,cO,null)set Sa[yX]=RI()set ta[yX]=CreateTrigger()set ua[yX]=zI()call TriggerRegisterUnitEvent(ta[yX],Xa[yX],EVENT_UNIT_SPELL_CAST)call TriggerAddAction(ta[yX],function Oc)call yI(ua[yX],(yX))call TimerStart(ua[yX],.05,true,function Vc)return yXendfunctionfunction Ac takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='h01M'endfunctionfunction Nc takes nothing returns nothingcall UnitRemoveAbility(GetEnumUnit(),'A01I')endfunctionfunction bc takes nothing returns nothinglocal integer yX=YI(GetExpiredTimer())if UnitHasBuffBJ(Xa[yX],'B00F')thencall SetUnitFacing(Xa[yX],GetUnitFacing(Xa[yX])+Ua[yX])endifendfunctionfunction Bc takes nothing returns nothinglocal unit ulocal group g=RI()local string s=GetEventPlayerChatString()local string cc=SubString(s,$A,StringLength(s))local real FI=ModuloReal(S2R(cc),360)call GroupEnumUnitsOfType(g,UnitId2String('h01Q'),M)loopset u=FirstOfGroup(g)exitwhen(u==null)if IsUnitSelected(u,GetOwningPlayer(u))thencall SetUnitFacing(u,FI)endifcall GroupRemoveUnit(g,u)endloopcall II(g)set u=nullset g=nullendfunctionfunction Cc takes nothing returns nothinglocal unit u=GetSpellAbilityUnit()local integer yX=GetUnitUserData(u)if GetSpellAbilityId()=='A01F' thenif Ua[yX]<20 thenset Ua[yX]=Ua[yX]+1endifendifif GetSpellAbilityId()=='A01G' thenif Ua[yX]>-20 thenset Ua[yX]=Ua[yX]-1endifendifset u=nullendfunctionfunction dc takes nothing returns nothinglocal unit tr=GetTriggerUnit()local trigger t=GetTriggeringTrigger()local unit sc=pA(t)local real x=GetUnitFacing(sc)if Wb(tr)thencall SetUnitFacing(tr,x)endifset tr=nullset sc=nullset t=nullendfunctionfunction Dc takes nothing returns nothinglocal unit u=GetTrainedUnit()if GetUnitTypeId(u)=='h01Q' thencall SetUnitUserData(u,(MO(u,60)))endifset u=nullendfunctionfunction fc takes unit u,real cO returns integerlocal integer yX=pO(u,cO,function dc)set wa[yX]=zI()set Wa[yX]=CreateTrigger()call TriggerRegisterUnitEvent(Wa[yX],Xa[yX],EVENT_UNIT_SPELL_CAST)call TriggerAddAction(Wa[yX],function Cc)call yI(wa[yX],(yX))call TimerStart(wa[yX],.2,true,function bc)return yXendfunctionfunction Fc takes nothing returns nothinglocal integer yX=YI(GetExpiredTimer())local unit ulocal real fIlocal real FIlocal real xlocal real ylocal group Ec=RI()call GroupAddGroup(Ya[yX],Ec)loopset u=FirstOfGroup(Ec)exitwhen u==nullset x=GetUnitX(u)set y=GetUnitY(u)set fI=hI(x,y,eB(yX),xB(yX))-Za[yX]set FI=GI(x,y,eB(yX),xB(yX))-$B4if GetWidgetLife(u)>.405 thencall SetUnitX(u,eB(yX)+fI*Cos(FI*bj_DEGTORAD))call SetUnitY(u,xB(yX)+fI*Sin(FI*bj_DEGTORAD))elsecall GroupRemoveUnit(Ya[yX],u)endifif fI>445 thencall GroupRemoveUnit(Ya[yX],u)endifcall GroupRemoveUnit(Ec,u)endloopcall II(Ec)set u=nullset Ec=nullendfunctionfunction gc takes nothing returns nothinglocal unit u2=GetSpellAbilityUnit()local integer yX=GetUnitUserData(u2)if GetSpellAbilityId()=='A04J' thenif Za[yX]<$C thenset Za[yX]=Za[yX]+1if GetLocalPlayer()==nB(yX)thencall sI(I2S(Za[yX]),$A,Xa[yX],1.5,$FF,$FF,$FF,$A)endifendifendifif GetSpellAbilityId()=='A04K' thenif Za[yX]>-$C thenset Za[yX]=Za[yX]-1if GetLocalPlayer()==nB(yX)thencall sI(I2S(Za[yX]),$A,Xa[yX],1.5,$FF,$FF,$FF,$A)endifendifendifset u2=nullendfunctionfunction Gc takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit u2=pA(GetTriggeringTrigger())local integer yX=GetUnitUserData(u2)if Wb(u)and GetWidgetLife(u)>.405 thencall GroupAddUnit(Ya[yX],u)endifset u=nullset u2=nullendfunctionfunction hc takes nothing returns nothinglocal unit u=GetConstructedStructure()local real x=GetUnitX(u)local real y=GetUnitY(u)local player p=GetOwningPlayer(u)call dR(u)set u=CreateUnit(p,'n013',x,y,0)call SetUnitUserData(u,(PO(u,430)))set u=nullendfunctionfunction Hc takes unit u,real cO returns integerlocal integer yX=qO(u,cO,function Gc)set Ya[yX]=RI()set za[yX]=CreateTrigger()set vn[yX]=zI()call TriggerRegisterUnitEvent(za[yX],Xa[yX],EVENT_UNIT_SPELL_CAST)call TriggerAddAction(za[yX],function gc)call yI(vn[yX],(yX))call TimerStart(vn[yX],.05,true,function Fc)return yXendfunctionfunction jc takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='n012'endfunctionfunction Jc takes integer yX returns nothingcall UnitAddAbility(Xa[yX],'A01K')call UnitAddAbility(Xa[yX],'A01M')call UnitAddAbility(Xa[yX],'A01U')call UnitAddAbility(Xa[yX],'A01T')endfunctionfunction kc takes unit u returns nothingcall UnitRemoveAbility(u,'A016')call UnitRemoveAbility(u,'A015')call UnitRemoveAbility(u,'A018')call UnitRemoveAbility(u,'A017')call UnitRemoveAbility(u,'A019')call UnitRemoveAbility(u,'A01A')call UnitRemoveAbility(u,'A01N')endfunctionfunction Kc takes nothing returns nothinglocal unit u=GetSpellAbilityUnit()local integer yX=GetUnitUserData(u)if en[yX]==0 thenif GetSpellAbilityId()=='A015' thencall kc(u)set en[yX]=1call Jc(yX)elseif GetSpellAbilityId()=='A016' thencall kc(u)set en[yX]=2call Jc(yX)elseif GetSpellAbilityId()=='A017' thencall kc(u)set en[yX]=3elseif GetSpellAbilityId()=='A018' thencall kc(u)set en[yX]=4elseif GetSpellAbilityId()=='A019' thencall kc(u)set en[yX]=5call Jc(yX)elseif GetSpellAbilityId()=='A01A' thencall kc(u)set en[yX]=6call Jc(yX)elseif GetSpellAbilityId()=='A01N' thencall kc(u)set en[yX]=7endifelseif GetSpellAbilityId()=='A01K' thenif on[yX]<4 thenset on[yX]=on[yX]+1call sI("Horizontal Size: "+I2S(on[yX]),$A,Xa[yX],1.5,$FF,$FF,$FF,$A)endifelseif GetSpellAbilityId()=='A01M' thenif in[yX]<4 thenset in[yX]=in[yX]+1call sI("Vertical Size: "+I2S(in[yX]),$A,Xa[yX],1.5,$FF,$FF,$FF,$A)endifelseif GetSpellAbilityId()=='A01U' thenif on[yX]>0 thenset on[yX]=on[yX]-1call sI("Horizontal Size: "+I2S(on[yX]),$A,Xa[yX],1.5,$FF,$FF,$FF,$A)endifelseif GetSpellAbilityId()=='A01T' thenif on[yX]>0 thenset in[yX]=in[yX]-1call sI("Vertical Size: "+I2S(in[yX]),$A,Xa[yX],1.5,$FF,$FF,$FF,$A)endifendifendifset u=nullendfunctionfunction lc takes integer e,integer Lc returns nothinglocal integer nNlocal integer SBif on[e]==in[e]thencall SetTerrainType(rB(e),iB(e),Lc,-1,on[e]+1,1)elseset nN=-on[e]loopexitwhen not(nN<on[e]+1)set SB=-in[e]loopexitwhen not(SB<in[e]+1)call SetTerrainType(rB(e)-$80*nN,iB(e)-$80*SB,Lc,-1,1,1)set SB=SB+1endloopset nN=nN+1endloopendifendfunctionfunction mc takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit u2=pA(GetTriggeringTrigger())local integer yX=GetUnitUserData(u2)local integer dlocal integer rn=oA(rB(yX),iB(yX))local integer r=LoadInteger(ht,GetHandleId(Go[rn]),0)if Wb(u)thenif en[yX]==1 thencall lc(yX,rV[r])elseif en[yX]==2 thencall lc(yX,iV[r])elseif en[yX]==3 thenset u=CreateUnit(nB(yX),'h001',rB(yX),iB(yX),0)call TriggerRegisterUnitInRange(kt,u,80,M)elseif en[yX]==4 thenset u=GetUnitRallyUnit(u2)if GetUnitTypeId(u)=='h00C' thenset d=GetUnitUserData(u)if Vn[d]==false thencall SetUnitAnimation(an[d],"Death Alternate")call dR(nn[d])set Vn[d]=trueif En[d]thenset nn[d]=CreateUnit(nB(d),'h00F',eB(d),xB(d),0)elseset nn[d]=CreateUnit(nB(d),'h00F',eB(d),xB(d),270)endifendifendifelseif en[yX]==5 thencall lc(yX,'Nice')elseif en[yX]==6 thencall lc(yX,'Idki')elseif en[yX]==7 thenset u=GetUnitRallyUnit(u2)if GetUnitTypeId(u)=='h00C' thenset d=GetUnitUserData(u)if Vn[d]thencall SetUnitAnimation(an[d],"stand")call dR(nn[d])set Vn[d]=falseif En[d]thenset nn[d]=CreateUnit(nB(d),'h006',eB(d),xB(d),0)elseset nn[d]=CreateUnit(nB(d),'h006',eB(d),xB(d),270)endifendifendifendifif UnitHasBuffBJ(u2,'B00C') thencall dR(u2)endifendifset u=nullset u2=nullendfunctionfunction Mc takes nothing returns nothinglocal unit u=GetConstructedStructure()call SetUnitUserData(u,(QO(u,60)))set u=nullendfunctionfunction pc takes unit u,real cO returns integerlocal integer yX=sO(u,cO,function mc)set xn[yX]=CreateTrigger()call TriggerRegisterUnitEvent(xn[yX],Xa[yX],EVENT_UNIT_SPELL_CAST)call TriggerAddAction(xn[yX],function Kc)return yXendfunctionfunction Pc takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='n01D'endfunctionfunction qc takes nothing returns nothinglocal unit u2=GetSpellAbilityUnit()local integer yX=GetUnitUserData(u2)if GetSpellAbilityId()=='A00J' thenif Vn[yX]thencall SetUnitAnimation(an[yX],"stand")call dR(nn[yX])set Vn[yX]=falseif En[yX]thenset nn[yX]=CreateUnit(nB(yX),'h006',eB(yX),xB(yX),0)elseset nn[yX]=CreateUnit(nB(yX),'h006',eB(yX),xB(yX),270)endifelsecall SetUnitAnimation(an[yX],"Death Alternate")call dR(nn[yX])set Vn[yX]=trueif En[yX]thenset nn[yX]=CreateUnit(nB(yX),'h00F',eB(yX),xB(yX),0)elseset nn[yX]=CreateUnit(nB(yX),'h00F',eB(yX),xB(yX),270)endifendifendifif GetSpellAbilityId()=='A01W' thenif En[yX]thencall dR(nn[yX])call dR(an[yX])set En[yX]=falseif Vn[yX]thenset an[yX]=CreateUnit(nB(yX),'h002',eB(yX),xB(yX),270)call SetUnitAnimation(an[yX],"Death Alternate")set nn[yX]=CreateUnit(nB(yX),'h00F',eB(yX),xB(yX),270)elseset an[yX]=CreateUnit(nB(yX),'h002',eB(yX),xB(yX),270)set nn[yX]=CreateUnit(nB(yX),'h006',eB(yX),xB(yX),270)endifelsecall dR(nn[yX])call dR(an[yX])set En[yX]=trueif Vn[yX]thenset an[yX]=CreateUnit(nB(yX),'h002',eB(yX),xB(yX),0)call SetUnitAnimation(an[yX],"Death Alternate")set nn[yX]=CreateUnit(nB(yX),'h00F',eB(yX),xB(yX),0)elseset an[yX]=CreateUnit(nB(yX),'h002',eB(yX),xB(yX),0)set nn[yX]=CreateUnit(nB(yX),'h006',eB(yX),xB(yX),0)endifendifendifset u2=nullendfunctionfunction Qc takes nothing returns nothinglocal unit u=GetTriggerUnit()local trigger t=GetTriggeringTrigger()local unit u2=pA(t)local integer yX=GetUnitUserData(u2)local player p=GetOwningPlayer(u2)if Wb(u)and UnitHasItemOfTypeBJ(u,'I009')and Vn[yX]==false thencall dR(nn[yX])call SetUnitAnimation(an[yX],"Death Alternate")set Vn[yX]=trueif En[yX]==false thenset nn[yX]=CreateUnit(p,'h00F',eB(yX),xB(yX),270)elseset nn[yX]=CreateUnit(p,'h00F',eB(yX),xB(yX),0)endifcall DisableTrigger(Cr)call RemoveItem(GetItemOfTypeFromUnitBJ(u,'I009'))call EnableTrigger(Cr)endifset u2=nullset t=nullset u=nullendfunctionfunction Sc takes nothing returns nothinglocal unit u=GetConstructedStructure()local real x=GetUnitX(u)local real y=GetUnitY(u)local player p=GetOwningPlayer(u)local boolean UR=IsUnitSelected(u,p)call dR(u)set u=CreateUnit(p,'h00C',x,y,0)if UR thencall SelectUnitForPlayerSingle(u,p)endifcall SetUnitUserData(u,(SO(u,$BA)))set u=nullendfunctionfunction tc takes unit u,real cO returns integerlocal integer yX=tO(u,cO,function Qc)set Xn[yX]=CreateTrigger()call TriggerRegisterUnitEvent(Xn[yX],Xa[yX],EVENT_UNIT_SPELL_CAST)call TriggerAddAction(Xn[yX],function qc)set nn[yX]=CreateUnit(nB(yX),'h006',eB(yX),xB(yX),270)set an[yX]=CreateUnit(nB(yX),'h002',eB(yX),xB(yX),270)return yXendfunctionfunction Tc takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='h002'endfunctionfunction uc takes nothing returns nothinglocal integer yX=YI(GetExpiredTimer())local unit ulocal integer ro=oA(eB(yX),xB(yX))local integer R=LoadInteger(ht,GetHandleId(Go[ro]),0)if On[yX]==0 thenset u=CreateUnit(nB(yX),nV[R],eB(yX),xB(yX),aB(yX))call TriggerRegisterUnitInRange(kt,u,96,M)elseif On[yX]==1 thenset u=CreateUnit(nB(yX),aV[R],eB(yX),xB(yX),aB(yX))call TriggerRegisterUnitInRange(kt,u,76,M)elseset u=CreateUnit(nB(yX),fo[On[yX]],eB(yX),xB(yX),aB(yX))if On[yX]==3 thencall TriggerRegisterUnitInRange(kt,u,80,M)elseif On[yX]==5 thencall TriggerRegisterUnitInRange(kt,u,70,M)elseif On[yX]==6 thencall TriggerRegisterUnitInRange(kt,u,90,M)elseif On[yX]==9 thencall SetUnitUserData(u,(fc(u,60)))elseif On[yX]==$A thencall TriggerRegisterUnitInRange(kt,u,64,M)endifendifcall SetUnitAnimation(u,"birth")call IssuePointOrderById(u,$D0012,rB(yX),iB(yX))call SaveBoolean(ht,GetHandleId(u),Uo,true)call TimerStart(In[yX],Rn[yX],false,function uc)set u=nullendfunctionfunction Uc takes nothing returns nothinglocal unit u=GetSpellAbilityUnit()local integer yX=GetUnitUserData(u)local integer wc=GetSpellAbilityId()local integer i2=0local boolean foundif wc=='A00A' thencall UnitRemoveAbility(u,'A00A')call UnitAddAbility(u,'Tank')set In[yX]=zI()call TimerStart(In[yX],Rn[yX],false,function uc)call yI(In[yX],GetUnitUserData(u))set u=nullreturnelseif wc=='Tank' thencall UnitRemoveAbility(u,'Tank')call UnitAddAbility(u,'A00A')call ZI(In[yX])set u=nullreturnelseif wc=='A01R' thenif Rn[yX]<.75 thencall DisplayTextToPlayer(GetOwningPlayer(u),0,0,"|cffC51019Minimum intervall reached!")elseset Rn[yX]=Rn[yX]-.25call DisplayTextToPlayer(GetOwningPlayer(u),0,0,"|cffC51019Intervall is now: "+R2S(Rn[yX]))endifset u=nullreturnelseif wc=='A01P' thenif Rn[yX]>9.75 thencall DisplayTextToPlayer(GetOwningPlayer(u),0,0,"|cffC51019Maximum intervall reached!")elseset Rn[yX]=Rn[yX]+.25call DisplayTextToPlayer(GetOwningPlayer(u),0,0,"|cffC51019Intervall is now: "+R2S(Rn[yX]))endifset u=nullreturnendifloopif wc==Fo[i2]thenset On[yX]=i2call DisplayTextToPlayer(GetOwningPlayer(u),0,0,"|cffC51019Now producing:|r "+GetObjectName(fo[i2]))set u=nullreturnendifset i2=i2+1exitwhen Fo[i2]==nullendloopset u=nullendfunctionfunction Wc takes nothing returns nothinglocal unit u=GetConstructedStructure()local real x=GetUnitX(u)local real y=GetUnitY(u)local player p=GetOwningPlayer(u)local boolean UR=IsUnitSelected(u,p)call dR(u)set u=CreateUnit(p,'n006',x,y,0)if UR thencall SelectUnitForPlayerSingle(u,p)endifcall SetUnitUserData(u,(TO(u,0)))set u=nullendfunctionfunction yc takes unit u,real cO returns integerlocal integer yX=uO(u,cO,null)set An[yX]=CreateTrigger()set In[yX]=zI()call TriggerRegisterUnitEvent(An[yX],Xa[yX],EVENT_UNIT_SPELL_CAST)call TriggerAddAction(An[yX],function Uc)return yXendfunctionfunction Yc takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='n006'endfunctionfunction zc takes nothing returns nothinglocal integer yX=GetUnitUserData(GetSpellAbilityUnit())if GetSpellAbilityId()=='A04O' and Nn[yX]<520 thenset Nn[yX]=Nn[yX]+20call DisplayTextToPlayer(nB(yX),0,0,"Boostspeed: "+I2S(Nn[yX]))elseif GetSpellAbilityId()=='A04Q' and Nn[yX]>30 thenset Nn[yX]=Nn[yX]-20call DisplayTextToPlayer(nB(yX),0,0,"Boostspeed: "+I2S(Nn[yX]))endifendfunctionfunction Zc takes nothing returns nothinglocal unit s=pA(GetTriggeringTrigger())local unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local integer yX=GetUnitUserData(s)if nB(yX)==p and yb(u)==false and Wb(u)==false and IsUnitType(u,UNIT_TYPE_STRUCTURE)==false thencall SetUnitMoveSpeed(u,Nn[yX])endifset s=nullset u=nullendfunctionfunction vC takes nothing returns nothinglocal unit u=GetConstructedStructure()call SetUnitUserData(u,(UO(u,40)))set u=nullendfunctionfunction eC takes unit u,real cO returns integerlocal integer yX=wO(u,cO,function Zc)set bn[yX]=CreateTrigger()call TriggerRegisterUnitEvent(bn[yX],Xa[yX],EVENT_UNIT_SPELL_CAST)call TriggerAddAction(bn[yX],function zc)return yXendfunctionfunction xC takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='n00J'endfunctionfunction oC takes nothing returns nothinglocal unit u=GetConstructedStructure()call SetUnitUserData(u,(WO(u,40)))set u=nullendfunctionfunction rC takes unit u,real cO returns integerlocal integer yX=yO(u,0,null)local real x=eB(yX)local real y=xB(yX)local real iClocal real aClocal integer axlocal integer ayset iC=xA(x/ $80)*$80set aC=xA(GetUnitY(u)/ $80)*$80set ax=R2I((RAbsBJ((lo-(xA(x/ $80)*$80))))/ $80)set ay=R2I((RAbsBJ((Lo-(xA(y/ $80)*$80))))/ $80)if qX((ax)*($80)+ay)!=true thenset Bn[yX]=axset cn[yX]=aycall SetUnitPosition(u,iC,aC)call QX((ax)*($80)+ay,true)elsecall DisplayTextToPlayer(GetOwningPlayer(u),0,0,"|cffC51019Building two terainblockers at the same spot is stupid.")call dR(u)endifreturn yXendfunctionfunction nC takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='h009'endfunctionfunction VC takes integer yX,integer x,integer y,unit u returns booleanlocal integer i=0local integer correct=0local integer R=LoadInteger(ht,GetHandleId(Go[uX((x)*($80)+y)]),0)if qX((x)*($80)+y) thenreturn falseendifif xV[R]!=GetOwningPlayer(u)thenreturn falseendifreturn trueendfunctionfunction EC takes nothing returns nothinglocal unit u=GetSpellAbilityUnit()local integer id=GetSpellAbilityId()local integer yX=GetUnitUserData(u)if id=='A02A' thenset fn[yX]='Nice'elseif id=='A02B' thenset Fn[yX]='Nice'elseif id=='A02D' thenset fn[yX]='Idki'elseif id=='A02E' thenset Fn[yX]='Idki'elseif id=='A02H' thenset fn[yX]=gn[yX]elseif id=='A02G' thenset Fn[yX]=gn[yX]elseif id=='A02F' thenset fn[yX]=Gn[yX]elseif id=='A02C' thenset Fn[yX]=Gn[yX]elseif id=='A01T' thenif Dn[yX]>0 thenset Dn[yX]=Dn[yX]-1endifelseif id=='A01M' thenif Dn[yX]<4 thenset Dn[yX]=Dn[yX]+1endifelseif id=='A01U' thenif dn[yX]>0 thenset dn[yX]=dn[yX]-1endifelseif id=='A01K' thenif dn[yX]<4 thenset dn[yX]=dn[yX]+1endifendifset u=nullendfunctionfunction XC takes nothing returns nothinglocal integer yX=YI(GetExpiredTimer())local real x=eB(yX)local real y=xB(yX)local integer i2=dn[yX]-((dn[yX]*2)+1)local integer i3=Dn[yX]-((Dn[yX]*2)+1)local integer ax=R2I((RAbsBJ((lo-(xA(x/ $80)*$80))))/ $80)local integer ay=R2I((RAbsBJ((Lo-(xA(y/ $80)*$80))))/ $80)loopexitwhen i2>dn[yX]+1loopexitwhen i3>Dn[yX]+1if VC(yX,ax+i2,ay+i3,Xa[yX]) thenif i2==dn[yX]-((dn[yX]*2)+1)or i2==dn[yX]+1 or i3==Dn[yX]-((Dn[yX]*2)+1)or i3==Dn[yX]+1 thencall SetTerrainType(sX((ax+i2)*($80)+ay+i3),tX((ax+i2)*($80)+ay+i3),Fn[yX],0,1,1)elsecall SetTerrainType(sX((ax+i2)*($80)+ay+i3),tX((ax+i2)*($80)+ay+i3),fn[yX],0,1,1)endifendifset i3=i3+1endloopset i2=i2+1set i3=Dn[yX]-((Dn[yX]*2)+1)endloopendfunctionfunction OC takes nothing returns nothinglocal unit u=GetTrainedUnit()if GetUnitTypeId(u)=='h01K' thencall SetUnitUserData(u,(YO(u,0)))endifset u=nullendfunctionfunction RC takes unit u,real cO returns integerlocal integer yX=zO(u,cO,null)set Cn[yX]=CreateTrigger()set hn[yX]=zI()call TriggerRegisterUnitEvent(Cn[yX],Xa[yX],EVENT_UNIT_SPELL_CAST)call TriggerAddAction(Cn[yX],function EC)call yI(hn[yX],(yX))call TimerStart(hn[yX],.1,true,function XC)return yXendfunctionfunction IC takes nothing returns nothinglocal integer yX=YI(GetExpiredTimer())local unit ulocal group Ec=RI()call GroupAddGroup(Hn[yX],Ec)loopset u=FirstOfGroup(Ec)exitwhen u==nullif pn[yX]==0 thencall SetUnitX(u,GetUnitX(u)+Mn[yX])elseif pn[yX]==90 thencall SetUnitY(u,GetUnitY(u)+Mn[yX])elseif pn[yX]==$B4 thencall SetUnitX(u,GetUnitX(u)-Mn[yX])elseif pn[yX]==270 thencall SetUnitY(u,GetUnitY(u)-Mn[yX])endifif GetWidgetLife(u)<.405 or RectContainsUnit(Kn[yX],u)==false thencall GroupRemoveUnit(Hn[yX],u)if FirstOfGroup(Hn[yX])==null thencall ZI(GetExpiredTimer())set Jn[yX]=nullset mn[yX]=falseendifendifcall GroupRemoveUnit(Ec,u)endloopcall II(Ec)set u=nullset Ec=nullendfunctionfunction AC takes nothing returns nothinglocal unit u2=GetSpellAbilityUnit()local integer yX=GetUnitUserData(u2)if GetSpellAbilityId()=='A04S' thenif Mn[yX]<20 thenset Mn[yX]=Mn[yX]+1call DisplayTextToPlayer(GetOwningPlayer(u2),0,0,"Speed: "+I2S(Mn[yX]))endifelseif GetSpellAbilityId()=='A04T' thenif Mn[yX]>1 thenset Mn[yX]=Mn[yX]-1call DisplayTextToPlayer(GetOwningPlayer(u2),0,0,"Speed: "+I2S(Mn[yX]))endifelseif GetSpellAbilityId()=='A04H' thenif Ln[yX]<2 thenset Ln[yX]=Ln[yX]+1if pn[yX]==0 or pn[yX]==$B4 thencall SetRect(Kn[yX],eB(yX)-64-($80*Ln[yX]),xB(yX)-64,eB(yX)+64+($80*Ln[yX]),xB(yX)+64)elseif pn[yX]==90 or pn[yX]==270 thencall SetRect(Kn[yX],eB(yX)-64,xB(yX)-64-($80*Ln[yX]),eB(yX)+64,xB(yX)+64+($80*Ln[yX]))endifcall dR(ln[yX])set ln[yX]=CreateUnit(nB(yX),go[Ln[yX]],eB(yX),xB(yX),pn[yX]-90)endifelseif GetSpellAbilityId()=='A050' thenif Ln[yX]>0 thenset Ln[yX]=Ln[yX]-1if pn[yX]==0 or pn[yX]==$B4 thencall SetRect(Kn[yX],eB(yX)-64-($80*Ln[yX]),xB(yX)-64,eB(yX)+64+($80*Ln[yX]),xB(yX)+64)elseif pn[yX]==90 or pn[yX]==270 thencall SetRect(Kn[yX],eB(yX)-64,xB(yX)-64-($80*Ln[yX]),eB(yX)+64,xB(yX)+64+($80*Ln[yX]))endifcall dR(ln[yX])set ln[yX]=CreateUnit(nB(yX),go[Ln[yX]],eB(yX),xB(yX),pn[yX]-90)endifelseif GetSpellAbilityId()=='A04L' thenset pn[yX]=pn[yX]+90if pn[yX]>360 thenset pn[yX]=90endifif pn[yX]==0 or pn[yX]==$B4 thencall SetRect(Kn[yX],eB(yX)-64-($80*Ln[yX]),xB(yX)-64,eB(yX)+64+($80*Ln[yX]),xB(yX)+64)elseif pn[yX]==90 or pn[yX]==270 thencall SetRect(Kn[yX],eB(yX)-64,xB(yX)-64-($80*Ln[yX]),eB(yX)+64,xB(yX)+64+($80*Ln[yX]))endifcall dR(ln[yX])set ln[yX]=CreateUnit(nB(yX),go[Ln[yX]],eB(yX),xB(yX),pn[yX]-90)elseif GetSpellAbilityId()=='A04U' thenset pn[yX]=pn[yX]-90if pn[yX]<0 thenset pn[yX]=270endifif pn[yX]==0 or pn[yX]==$B4 thencall SetRect(Kn[yX],eB(yX)-64-($80*Ln[yX]),xB(yX)-64,eB(yX)+64+($80*Ln[yX]),xB(yX)+64)elseif pn[yX]==90 or pn[yX]==270 thencall SetRect(Kn[yX],eB(yX)-64,xB(yX)-64-($80*Ln[yX]),eB(yX)+64,xB(yX)+64+($80*Ln[yX]))endifcall dR(ln[yX])set ln[yX]=CreateUnit(nB(yX),go[Ln[yX]],eB(yX),xB(yX),pn[yX]-90)endifset u2=nullendfunctionfunction NC takes nothing returns nothinglocal integer yX=YI(GetExpiredTimer())local integer i=0loopif RectContainsUnit(Kn[yX],Ar[i])thencall GroupAddUnit(Hn[yX],Ar[i])if mn[yX]==false thenset Jn[yX]=zI()call yI(Jn[yX],(yX))call TimerStart(Jn[yX],.05,true,function IC)set mn[yX]=trueendifendifset i=i+1exitwhen i>$Cendloopendfunctionfunction bC takes nothing returns nothinglocal unit u=GetConstructedStructure()local real x=GetUnitX(u)local real y=GetUnitY(u)local player p=GetOwningPlayer(u)local boolean UR=IsUnitSelected(u,p)call dR(u)set u=CreateUnit(p,'n01S',x,y,0)if UR thencall SelectUnitForPlayerSingle(u,p)endifcall SetUnitUserData(u,(ZO(u,0)))set u=nullendfunctionfunction BC takes unit u,real cO returns integerlocal integer yX=vR(u,cO,null)set Hn[yX]=RI()set kn[yX]=zI()set jn[yX]=CreateTrigger()set ln[yX]=CreateUnit(nB(yX),go[0],eB(yX),xB(yX),270)call UnitAddAbility(ln[yX],'aloc')set Kn[yX]=Rect(eB(yX)-64,xB(yX)-64,eB(yX)+64,xB(yX)+64)call TriggerRegisterUnitEvent(jn[yX],Xa[yX],EVENT_UNIT_SPELL_CAST)call TriggerAddAction(jn[yX],function AC)call yI(kn[yX],(yX))call TimerStart(kn[yX],.1,true,function NC)return yXendfunctionfunction cC takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='n01C'endfunctionfunction CC takes nothing returns nothinglocal unit u=GetTriggerUnit()local integer E=GetUnitUserData(u)if Wb(u)thenif jV[E]thencall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\HolyBolt\\HolyBoltSpecialArt.mdl",GetUnitX(u),GetUnitY(u)))set jV[E]=falsecall DestroyEffect(gV[E])endifendifset u=nullendfunctionfunction dC takes nothing returns nothinglocal unit u=GetConstructedStructure()call SetUnitUserData(u,(eR(u,$96)))set u=nullendfunctionfunction DC takes unit u,real cO returns integerlocal integer yX=xR(u,cO,function CC)return yXendfunctionfunction fC takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='h00H'endfunctionfunction FC takes nothing returns nothinglocal integer yX=GetUnitUserData(GetSpellAbilityUnit())local integer id=GetSpellAbilityId()local unit u=GetSpellTargetUnit()local integer i=0if id=='A051' thenif GetUnitTypeId(u)=='h0nn' and wn[yX]<$A and u!=Xa[yX]thenif IsUnitInGroup(u,qn[yX])thencall GroupRemoveUnit(qn[yX],u)set wn[yX]=wn[yX]-1loopif sn[Sn[yX]+i]!=null thencall DestroyLightning(sn[Sn[yX]+i])set sn[Sn[yX]+i]=nullendifset i=i+1exitwhen i>9endloopelsecall GroupAddUnit(qn[yX],u)set wn[yX]=wn[yX]+1endifelsecall DisplayTextToPlayer(nB(yX),0,0,"Max targets reached")endifendifset u=nullendfunctionfunction gC takes nothing returns nothinglocal unit u=GetEnumUnit()if Wb(u)and GetWidgetLife(u)>.405 and GetUnitFlyHeight(u)<20 thencall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\ManaFlare\\ManaFlareBoltImpact.mdl",GetUnitX(u),GetUnitY(u)))call KillUnit(u)endifset u=nullendfunctionfunction GC takes nothing returns nothinglocal integer yX=YI(GetExpiredTimer())local group Ec=RI()local group hC=RI()local unit ulocal real xlocal real ylocal integer i=0call GroupAddGroup(qn[yX],Ec)loopset u=FirstOfGroup(Ec)exitwhen u==nullif GetWidgetLife(u)>.405 thenset x=GetUnitX(u)set y=GetUnitY(u)if sn[Sn[yX]+i]==null thenset sn[Sn[yX]+i]=AddLightning("DRAM",false,eB(yX),xB(yX),x,y)elsecall MoveLightning(sn[Sn[yX]+i],false,eB(yX),xB(yX),x,y)endifcall XA(hC,eB(yX),xB(yX),x,y,$F)call ForGroup(hC,function gC)set i=i+1elsecall GroupRemoveUnit(qn[yX],u)set wn[yX]=wn[yX]-1call DestroyLightning(sn[Sn[yX]+i])endifcall GroupRemoveUnit(Ec,u)endloopcall II(Ec)call II(hC)set u=nullset hC=nullset Ec=nullendfunctionfunction HC takes nothing returns nothinglocal unit u=GetConstructedStructure()call SetUnitUserData(u,(oR(u,0)))set u=nullendfunctionfunction jC takes unit u,real cO returns integerlocal integer yX=rR(u,cO,null)set Pn[yX]=zI()set qn[yX]=RI()set Qn[yX]=CreateTrigger()call TriggerRegisterUnitEvent(Qn[yX],Xa[yX],EVENT_UNIT_SPELL_CAST)call TriggerAddAction(Qn[yX],function FC)call TimerStart(Pn[yX],.03,true,function GC)call yI(Pn[yX],(yX))return yXendfunctionfunction JC takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='h0nn'endfunctionfunction kC takes unit u returns nothinglocal integer i=0local integer r=oA(GetUnitX(u),GetUnitY(u))local player p=GetOwningPlayer(u)local rect re=Go[r]local integer yX=LoadInteger(ht,GetHandleId(re),0)if xV[yX]==p or LoadBoolean(ht,GetHandleId(re),GetPlayerId(p))thenif GetUnitTypeId(u)=='n00T' thencall TriggerRegisterUnitInRange(kt,u,32,M)endifelsecall DisplayTextToPlayer(GetOwningPlayer(u),0,0,"|cffC51019This Region doesn't belong to you! -Buildblockv0.3")call KillUnit(u)endifset re=nullendfunctionfunction KC takes nothing returns nothinglocal unit u=GetConstructingStructure()call TriggerSleepAction(.1)call kC(u)set u=nullendfunctionfunction lC takes nothing returns nothinglocal unit u=GetConstructedStructure()local real x=GetUnitX(u)local real y=GetUnitY(u)local player p=GetOwningPlayer(u)call dR(u)set u=CreateUnit(p,'n00H',x,y,0)call SetUnitUserData(u,(iR(u,0)))set u=nullendfunctionfunction LC takes unit u,real cO returns integerlocal integer yX=aR(u,cO,null)local integer R=LoadInteger(ht,GetHandleId(Go[oA(GetUnitX(u),GetUnitY(u))]),0)set Wn[yX]=CreateDestructable(VV[R],eB(yX),xB(yX),GetRandomReal(0,360),GetRandomReal(.8,1.2),GetRandomInt(0,2))return yXendfunctionfunction mC takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='n010'endfunctionfunction MC takes nothing returns nothinglocal unit u=GetTriggerUnit()local unit u2=pA(GetTriggeringTrigger())if LoadBoolean(ht,GetHandleId(u),5)==false thenif Wb(u)thencall UnitDamageTarget(u2,u,$7D0,false,false,ATTACK_TYPE_NORMAL,DAMAGE_TYPE_UNKNOWN,WEAPON_TYPE_WHOKNOWS)endifendifset u=nullset u2=nullendfunctionfunction pC takes nothing returns nothinglocal unit u=GetConstructedStructure()if GetUnitTypeId(u)=='obSD' thencall SetUnitUserData(u,(nR(u,64)))elsecall SetUnitUserData(u,(nR(u,90)))endifset u=nullendfunctionfunction PC takes unit u,real cO returns integerlocal integer yX=VR(u,cO,function MC)local integer R=LoadInteger(ht,GetHandleId(Go[oA(eB(yX),xB(yX))]),0)if GetUnitTypeId(u)=='obSD' thenset yn[yX]=CreateUnit(nB(yX),EV[R],eB(yX),xB(yX),GetRandomReal(0,360))elseset yn[yX]=CreateUnit(nB(yX),XV[R],eB(yX),xB(yX),GetRandomReal(0,360))endifcall SetUnitScale(Xa[yX],.1,.1,.1)return yXendfunctionfunction qC takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='obSD' or GetUnitTypeId(GetFilterUnit())=='obBD'endfunctionfunction QC takes nothing returns nothinglocal integer yX=LoadInteger(ht,GetHandleId(GetTriggeringRegion()),0)local unit u=GetEnteringUnit()local integer E=GetUnitUserData(u)local integer i=oA(GetRectCenterX(eV[yX]),GetRectCenterY(eV[yX]))set dV[E]=iif Wb(u)and GetPlayerId(GetOwningPlayer(u))<=7 and OV[yX]==false thencall CreateFogModifierRectBJ(true,GetOwningPlayer(u),FOG_OF_WAR_VISIBLE,eV[yX])endifset u=nullendfunctionfunction sC takes nothing returns nothinglocal integer i=0loopcall vO(Go[i])set i=i+1exitwhen i>21endloopendfunctionfunction SC takes rect re returns integerlocal integer yX=eO()set eV[yX]=reset vV[yX]=CreateRegion()call RegionAddRect(vV[yX],eV[yX])set oV[yX]=CreateTrigger()call SaveInteger(ht,GetHandleId(vV[yX]),0,yX)call SaveInteger(ht,GetHandleId(re),0,yX)call TriggerRegisterEnterRegion(oV[yX],vV[yX],null)call TriggerAddAction(oV[yX],function QC)return yXendfunctionfunction TC takes rect r,integer uC returns nothinglocal real UC=GetRectMaxX(r)local real wC=GetRectMinX(r)local real WC=GetRectMaxY(r)local real yC=GetRectMinY(r)local real x=wClocal real y=yClooploopcall SetTerrainType(x,y,uC,-1,1,1)set x=x+50exitwhen x>UCendloopset x=wCset y=y+50exitwhen y>WCendloopendfunctionfunction YC takes nothing returns booleanlocal unit u=GetBuyingUnit()local item it=GetSoldItem()local real x=GetItemX(it)local real y=GetItemY(it)local integer i=0local integer i2=oA(x,y)local integer yX=LoadInteger(ht,GetHandleId(Go[i2]),0)call dR(GetTriggerUnit())loopif GetItemTypeId(it)==uV[i]thencall RemoveItem(it)set xV[yX]=GetOwningPlayer(u)set rV[yX]=UV[i]set iV[yX]=wV[i]set aV[yX]=WV[i]set nV[yX]=yV[i]set VV[yX]=YV[i]set EV[yX]=zV[i]set XV[yX]=ZV[i]set ho[i2]=0call TC(Go[i2],iV[yX])call DisplayTextToPlayer(xV[yX],0,0,"|cff6BC54AYou claimed this region!
A |cffFFCC00Setupunit|cff6BC54A has been created at the |cffFFCC00left top corner|cff6BC54A of ur region.")call CreateUnit(GetOwningPlayer(u),'n00A',GetRectMinX(Go[i2])+'d',GetRectMaxY(Go[i2])-'d',0)set it=nullset u=nullreturn falseendifset i=i+1exitwhen i>5endloopset it=nullset u=nullreturn falseendfunctionfunction zC takes nothing returns nothingset Go[0]=Wvset Go[1]=yvset Go[2]=tvset Go[3]=Yvset Go[4]=zvset Go[5]=Zvset Go[6]=veset Go[7]=eeset Go[8]=xeset Go[9]=oeset Go[$A]=ieset Go[$B]=aeset Go[$C]=neset Go[$D]=Veset Go[$E]=Tvset Go[$F]=uvset Go[16]=Eeset Go[17]=Xeset Go[18]=Oeset Go[19]=Uvset Go[20]=Reset Go[21]=Ieset uV[0]='I00H'set UV[0]='Idtr'set wV[0]='Ibkb'set WV[0]='n00E'set yV[0]='h01I'set YV[0]='KTtw'set zV[0]='n018'set ZV[0]='n019'set uV[1]='I00G'set UV[1]='Bdsd'set wV[1]=GetTerrainType($A6E,-7090)set WV[1]='n00D'set yV[1]='h01H'set YV[1]='BTtw'set zV[1]='n01F'set ZV[1]='n01G'set uV[2]='I00E'set UV[2]='Ywmb'set wV[2]='Ygsb'set WV[2]='n009'set yV[2]='h018'set YV[2]='LTlt'set zV[2]='n01I'set ZV[2]='n01H'set uV[3]='I00D'set UV[3]='Itbk'set wV[3]='Isnw'set WV[3]='n007'set yV[3]='h015'set YV[3]='WTst'set zV[3]='n00R'set ZV[3]='n00S'set uV[4]='I00N'set UV[4]='Zbks'set wV[4]='Zdrg'set WV[4]='u002'set yV[4]='u009'set YV[4]='ZTtw'set zV[4]='n055'set ZV[4]='n005'endfunctionfunction ZC takes integer yX,real x,real y,real vd,real ed,real xd returns nothinglocal real hp=GetUnitState(cV[yX],UNIT_STATE_LIFE)local real FI=GetUnitFacing(cV[yX])if jV[yX]thencall SetUnitState(cV[yX],UNIT_STATE_LIFE,hp-xd)endifif GV[yX]==2 thencall SetUnitState(cV[yX],UNIT_STATE_LIFE,hp-ed)returnendifif GV[yX]==3 thencall SetUnitPosition(cV[yX],DI(x,vd*3.3,FI),gI(y,vd*3.3,FI))returnendifendfunctionfunction od takes integer yX returns nothingset JV[yX]=trueendfunctionfunction rd takes integer yX returns nothingset JV[yX]=falseendfunctionfunction ad takes integer yX returns nothingset GV[yX]=0call DestroyEffect(FV[yX])endfunctionfunction nd takes integer yX returns nothingcall KillUnit(cV[yX])endfunctionfunction Vd takes integer yX returns nothingset GV[yX]=2set FV[yX]=AddSpecialEffectTarget("Abilities\\Spells\\Human\\FlameStrike\\FlameStrikeEmbers.mdl",cV[yX],"origin")endfunctionfunction Ed takes integer yX returns nothingset GV[yX]=3call DestroyEffect(FV[yX])endfunctionfunction Xd takes integer yX returns nothingset GV[yX]=4set jV[yX]=trueset gV[yX]=AddSpecialEffectTarget("Abilities\\Weapons\\PoisonSting\\PoisonStingTarget.mdl",cV[yX],"chest")call DestroyEffect(FV[yX])endfunctionfunction Od takes integer yX returns nothingcall ReviveHero(cV[yX],jo,Jo,false)if GetPlayerId(CV[yX])<=7 thenif(GetLocalPlayer()==CV[yX])thencall PanCameraToTimed(jo,Jo,0)call ClearSelection()call SelectUnit(cV[yX],true)endifendifcall ZI(fV[yX])endfunctionfunction Rd takes nothing returns nothinglocal integer yX=GetUnitUserData(GetTriggerUnit())local widget w=GetOrderTarget()local unit u=GetOrderTargetUnit()local real x=GetUnitX(cV[yX])local real y=GetUnitY(cV[yX])local real x2=GetOrderPointX()local real y2=GetOrderPointY()local real x3=GetWidgetX(w)local real y3=GetWidgetY(w)if UnitHasBuffBJ(cV[yX],'BHds')thencall UnitRemoveBuffs(cV[yX],true,false)endifif GetTerrainType(x,y)=='Nice' or GetUnitFlyHeight(cV[yX])>20 thenif w==null thenset HV[yX]=GI(x,y,x2,y2)call SetUnitFacing(cV[yX],HV[yX])elseset HV[yX]=GI(x,y,x3,y3)call SetUnitFacing(cV[yX],HV[yX])endifelseif GetTerrainType(x,y)==so thenif w==null thenset HV[yX]=GI(x,y,x2,y2)call SetUnitFacing(cV[yX],HV[yX]+$B4)elseset HV[yX]=GI(x,y,x3,y3)call SetUnitFacing(cV[yX],HV[yX]+$B4)endifelseif IsUnitType(u,UNIT_TYPE_GROUND) and OrderId2String(GetUnitCurrentOrder(cV[yX]))=="smart" thencall IssuePointOrderById(cV[yX],$D0012,x3,y3)endifset w=nullset u=nullendfunctionfunction Id takes unit u returns integerlocal integer yX=ZX()set cV[yX]=uset CV[yX]=GetOwningPlayer(cV[yX])set hV[yX]=CreateTrigger()call TriggerRegisterUnitEvent(hV[yX],u,EVENT_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterUnitEvent(hV[yX],u,EVENT_UNIT_ISSUED_TARGET_ORDER)call TriggerAddAction(hV[yX],function Rd)return yXendfunctionfunction Ad takes nothing returns nothinglocal unit s=GetSpellAbilityUnit()local integer yX=GetUnitUserData(s)local integer i=0local integer i2=0if GetSpellAbilityId()=='A04V' thencall PA(s)call SetUnitColor(Ho,PLAYER_COLOR_BLUE)call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"Escapers advanced to the next |cff086BB5Checkpoint")call PlaySoundBJ(be)set Ho=Xa[yX]set jo=GetUnitX(s)set Jo=GetUnitY(s)call SetUnitColor(s,PLAYER_COLOR_RED)set i=oA(jo,Jo)loopcall SetUnitPosition(Ar[i2],jo,Jo)call IssueImmediateOrderById(Ar[i2],$D0004)call SelectUnitForPlayerSingle(Ar[i2],GetOwningPlayer(Ar[i2]))call PanCameraToTimedForPlayer(GetOwningPlayer(Ar[i2]),jo,Jo,0)set i2=i2+1exitwhen i2>7endloopif Go[i]==Go[2]thencall IB(0,Player($B))call IB(1,Player($B))call IB(20,Player($B))call IB(18,Player($B))endifcall UnitRemoveAbility(s,'A04V')endifset s=nullendfunctionfunction Nd takes nothing returns nothinglocal integer Eset E=YI(GetExpiredTimer())call Od(E)endfunctionfunction bd takes nothing returns nothinglocal integer E=GetUnitUserData(GetDyingUnit())local integer PD=QV[GetPlayerId(CV[E])]if Wb(cV[E])thenif GetPlayerId(CV[E])<8 thenset DV[E]=DV[E]+1call MultiboardSetItemValue(MultiboardGetItem(cv,hi[PD],1),I2S(DV[E]))endifset fV[E]=zI()call yI(fV[E],GetUnitUserData(GetTriggerUnit()))call TimerStart(fV[E],3,false,function Nd)call rd(E)set jV[E]=falsecall DestroyEffect(FV[E])call DestroyEffect(gV[E])set GV[E]=0endifendfunctionfunction Bd takes nothing returns nothinglocal unit s=pA(GetTriggeringTrigger())local unit u=GetTriggerUnit()local player p=GetOwningPlayer(u)local integer yX=GetUnitUserData(s)local integer i=0local integer i2=0local integer xy=0local real cd=hI(GetUnitX(s),GetUnitY(s),jo,Jo)local integer PDif Wb(u)and GetPlayerId(p)<8 thencall PA(s)if ko thenset ko=falseelsecall SetUnitColor(Ho,PLAYER_COLOR_BLUE)call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,K[GetPlayerId(GetOwningPlayer(u))]+GetPlayerName(GetOwningPlayer(u))+"|r advanced to the next |cff086BB5Checkpoint")if cd>512 thenset PD=QV[GetPlayerId(GetOwningPlayer(u))]set li[PD]=li[PD]+6if GetOwningPlayer(s)!=Player($B)thenset PD=QV[GetPlayerId(GetOwningPlayer(s))]set li[PD]=li[PD]+$Cendifloopset PD=QV[xy]set li[PD]=li[PD]+2set xy=xy+1exitwhen xy>7endloopendifendifcall PlaySoundBJ(be)set Ho=Xa[yX]set jo=GetUnitX(s)set Jo=GetUnitY(s)call SetUnitColor(s,PLAYER_COLOR_RED)set i=oA(jo,Jo)loopcall SetUnitPosition(Ar[i2],jo,Jo)call IssueImmediateOrderById(Ar[i2],$D0004)call SelectUnitForPlayerSingle(Ar[i2],GetOwningPlayer(Ar[i2]))call PanCameraToTimedForPlayer(GetOwningPlayer(Ar[i2]),jo,Jo,0)set i2=i2+1exitwhen i2>7endloopif Go[i]==Go[2]thencall IB(0,Player($B))call IB(1,Player($B))call IB(20,Player($B))call IB(18,Player($B))endifendifset s=nullset u=nullendfunctionfunction Cd takes nothing returns nothinglocal unit u=GetConstructedStructure()call SetUnitUserData(u,(ER(u,80)))if Ko and RectContainsUnit(Go[2],u)thencall UnitAddAbility(u,'A04V')set Ko=FALSEendifset u=nullendfunctionfunction dd takes unit u,real cO returns integerlocal integer yX=XR(u,cO,function Bd)return yXendfunctionfunction Dd takes nothing returns booleanreturn GetUnitTypeId(GetFilterUnit())=='n000'endfunctionfunction fd takes nothing returns booleanlocal integer S=GetUnitUserData(GetTriggerUnit())local integer id=GetUnitTypeId(GetTrainedUnit())local unit u=GetTrainedUnit()local unit Fdlocal unit p=Xa[S]local real x=rB(S)local real y=iB(S)local integer ilocal integer yXlocal integer Tif GetUnitTypeId(p)!='H00A' thenset p=nullset u=nullreturn falseendifset i=oA(x,y)set yX=LoadInteger(ht,GetHandleId(Go[i]),0)if xV[yX]==GetOwningPlayer(p)or LoadBoolean(ht,GetHandleId(Go[i]),GetPlayerId(GetOwningPlayer(p)))thenif id=='u000' thencall dR(u)set Fd=CreateUnit(GetOwningPlayer(p),aV[yX],x,y,0)call TriggerRegisterUnitInRange(kt,Fd,76,M)set p=nullset Fd=nullset u=nullreturn falseelseif id=='u003' thencall dR(u)set Fd=CreateUnit(GetOwningPlayer(p),nV[yX],x,y,0)call TriggerRegisterUnitInRange(kt,Fd,'d',M)set p=nullset Fd=nullset u=nullreturn falseelseif id=='u006' thencall SetUnitPosition(u,x,y)set Fd=ucall TriggerRegisterUnitInRange(kt,Fd,70,M)set p=nullset Fd=nullset u=nullreturn falseelseif id=='u008' thencall SetUnitPosition(u,x,y)set Fd=ucall TriggerRegisterUnitInRange(kt,Fd,90,M)set p=nullset Fd=nullset u=nullreturn falseelseif id=='h001' thencall SetUnitPosition(u,x,y)set Fd=ucall TriggerRegisterUnitInRange(kt,Fd,80,M)set p=nullset Fd=nullset u=nullreturn falseelseif id=='u00A' thencall SetUnitPosition(u,x,y)set Fd=ucall TriggerRegisterUnitInRange(kt,Fd,54,M)set p=nullset Fd=nullset u=nullreturn falseelseif id=='h01K' thencall SetUnitPosition(u,x,y)set T=GetUnitUserData(u)set Fn[T]=iV[yX]set fn[T]=rV[yX]set Gn[T]=iV[yX]set gn[T]=rV[yX]set p=nullset u=nullreturn falseelsecall SetUnitPosition(u,x,y)set p=nullset u=nullreturn falseendifelsecall DisplayTextToPlayer(GetOwningPlayer(u),0,0,"|cffC51019This Region doesn't belong to you!")call dR(u)endifset u=nullset Fd=nullset p=nullreturn falseendfunctionfunction gd takes unit u returns integerlocal integer yX=jO(u,0,null)set kV[yX]=CreateTrigger()call TriggerRegisterUnitEvent(kV[yX],u,EVENT_UNIT_TRAIN_FINISH)call TriggerAddAction(kV[yX],function fd)return yXendfunctionfunction Gd takes nothing returns nothinglocal integer hd=YI(GetExpiredTimer())local integer Hd=0local integer i=0local integer i2=0loopexitwhen Hd>'p'call SX((hd)*($80)+Hd,lo+(hd*$80))call TX((hd)*($80)+Hd,Lo+(Hd*$80))loopif po[i]<=sX((hd)*($80)+Hd)and sX((hd)*($80)+Hd)<=mo[i]and Po[i]<=tX((hd)*($80)+Hd)and tX((hd)*($80)+Hd)<=Mo[i]thencall UX((hd)*($80)+Hd,i)endifset i=i+1exitwhen i>21endloopset Hd=Hd+1set i=0set i2=i2+1endloopcall ZI(GetExpiredTimer())endfunctionfunction jd takes nothing returns nothinglocal integer hd=0local integer Hd=0local integer i=0local real i2=0local timer lBloopset po[i]=GetRectMinX(Go[i])set mo[i]=GetRectMaxX(Go[i])set Po[i]=GetRectMinY(Go[i])set Mo[i]=GetRectMaxY(Go[i])set i=i+1exitwhen i>21endloopset i=0loopset lB=zI()call yI(lB,i)call TimerStart(lB,i2,false,function Gd)set i=i+1set i2=i2+.1exitwhen i>'l'endloopset lB=nullendfunctionfunction Jd takes nothing returns booleanlocal unit kd=GetTriggerUnit()local unit u2=GetOrderTargetUnit()local real Kd=GetOrderPointX()local real ld=GetOrderPointY()local integer i=oA(Kd,ld)local rect relocal integer id=GetPlayerId(GetOwningPlayer(kd))local integer yX=LoadInteger(ht,GetHandleId(Go[i]),0)if GetUnitTypeId(kd)!='H007' and GetUnitTypeId(kd)!='H008' and GetUnitTypeId(kd)!='H005' and GetUnitTypeId(kd)!='H004' thenset u2=nullset kd=nullreturn falseendifset re=Go[i]if xV[yX]==GetOwningPlayer(kd)or LoadBoolean(ht,GetHandleId(re),id)or GetPlayerName(GetOwningPlayer(kd))=="Frotty" or GetPlayerName(GetOwningPlayer(kd))=="FrottyZ" thenif GetUnitTypeId(kd)=='H007' thenif UnitHasBuffBJ(kd,'B00G')thenif UnitHasBuffBJ(kd,'B008')thencall SetTerrainType(Kd,ld,so,-1,2,1)elsecall SetTerrainType(Kd,ld,so,-1,1,1)endifelseif UnitHasBuffBJ(kd,'B008')thencall SetTerrainType(Kd,ld,'Nice',-1,2,1)elsecall SetTerrainType(Kd,ld,'Nice',-1,1,1)endifendifelseif GetUnitTypeId(kd)=='H008' thenif UnitHasBuffBJ(kd,'B008')thencall SetTerrainType(Kd,ld,'Idki',-1,2,1)elsecall SetTerrainType(Kd,ld,'Idki',-1,1,1)endifelseif GetUnitTypeId(kd)=='H004' thenif UnitHasBuffBJ(kd,'B008')thencall SetTerrainType(Kd,ld,rV[yX],-1,2,1)elsecall SetTerrainType(Kd,ld,rV[yX],-1,1,1)endifelseif GetUnitTypeId(kd)=='H005' thenif So[GetPlayerId(GetOwningPlayer(kd))]==0 thenif UnitHasBuffBJ(kd,'B008')thencall SetTerrainType(Kd,ld,iV[yX],-1,2,1)elsecall SetTerrainType(Kd,ld,iV[yX],-1,1,1)endifelseif So[GetPlayerId(GetOwningPlayer(kd))]==1 thenif UnitHasBuffBJ(kd,'B008')thencall SetTerrainType(Kd,ld,qo,-1,2,1)elsecall SetTerrainType(Kd,ld,qo,-1,1,1)endifelseif So[GetPlayerId(GetOwningPlayer(kd))]==2 thenif UnitHasBuffBJ(kd,'B008')thencall SetTerrainType(Kd,ld,Qo,-1,2,1)elsecall SetTerrainType(Kd,ld,Qo,-1,1,1)endifendifendifset re=nullset u2=nullset kd=nullreturn falseendifcall DisplayTextToPlayer(GetOwningPlayer(kd),0,0,"|cffC51019This Region doesn't belong to you!changeT")set re=nullset u2=nullset kd=nullreturn falseendfunctionfunction Ld takes nothing returns booleanif GetSpellAbilityId()=='A04X' thenif So[GetPlayerId(GetOwningPlayer(GetSpellAbilityUnit()))]==0 or So[GetPlayerId(GetOwningPlayer(GetSpellAbilityUnit()))]==2 thenset So[GetPlayerId(GetOwningPlayer(GetSpellAbilityUnit()))]=1call DisplayTextToPlayer(GetOwningPlayer(GetSpellAbilityUnit()),0,0,"Poison")endifelseif GetSpellAbilityId()=='A04Y' thenif So[GetPlayerId(GetOwningPlayer(GetSpellAbilityUnit()))]==0 or So[GetPlayerId(GetOwningPlayer(GetSpellAbilityUnit()))]==1 thenset So[GetPlayerId(GetOwningPlayer(GetSpellAbilityUnit()))]=2call DisplayTextToPlayer(GetOwningPlayer(GetSpellAbilityUnit()),0,0,"Lava")endifelseif GetSpellAbilityId()=='A04Z' thenset So[GetPlayerId(GetOwningPlayer(GetSpellAbilityUnit()))]=0call DisplayTextToPlayer(GetOwningPlayer(GetSpellAbilityUnit()),0,0,"Normal")endifreturn falseendfunctionfunction md takes nothing returns booleanlocal integer u=GetSpellAbilityId()local integer i=0if u=='A03W' thenloopcall CustomDefeatBJ(Player(i),"You Lost!")set i=i+1exitwhen i>$Cendloopset i=0endifif u=='A03V' thenloopcall CustomVictoryBJ(Player(i),true,true)set i=i+1exitwhen i>$Cendloopendifreturn falseendfunctionfunction Md takes nothing returns booleanlocal unit u=GetTriggerUnit()if GetSpellAbilityId()=='A01E' and GetUnitMoveSpeed(u)<520 thencall SetUnitMoveSpeed(u,GetUnitMoveSpeed(u)+20)if GetLocalPlayer()==GetOwningPlayer(u)thencall sI(R2S(GetUnitMoveSpeed(u)),8,u,2,$FF,$FF,$FF,$A)endifelseif GetSpellAbilityId()=='A01H' and GetUnitMoveSpeed(u)>60 thencall SetUnitMoveSpeed(u,GetUnitMoveSpeed(u)-20)if GetLocalPlayer()==GetOwningPlayer(u)thencall sI(R2S(GetUnitMoveSpeed(u)),8,u,2,$FF,$FF,$FF,$A)endifendifset u=nullreturn falseendfunctionfunction pd takes nothing returns booleanlocal unit u=GetTriggerUnit()if GetSpellAbilityId()=='A044' and GetUnitAbilityLevel(u,'A023')<20 thencall SetUnitAbilityLevel(u,'A023',GetUnitAbilityLevel(u,'A023')+1)call SetUnitAbilityLevel(u,'A024',GetUnitAbilityLevel(u,'A023'))elseif GetSpellAbilityId()=='A043' and GetUnitAbilityLevel(u,'A023')>0 thencall SetUnitAbilityLevel(u,'A023',GetUnitAbilityLevel(u,'A023')-1)call SetUnitAbilityLevel(u,'A024',GetUnitAbilityLevel(u,'A023'))endifset u=nullreturn falseendfunctionfunction Pd takes nothing returns booleanlocal unit u=GetConstructedStructure()local integer iif(GetUnitTypeId(u)=='h019')thencall UnitAddAbility(u,'A023')call SetUnitAbilityLevel(u,'A023',$A)call SetUnitAbilityLevel(u,'A024',$A)endifset u=nullreturn falseendfunctionfunction qd takes nothing returns booleanlocal unit u=GetTrainedUnit()local integer iif(GetUnitTypeId(u)=='h00Y')thencall UnitAddAbility(u,'A023')call SetUnitAbilityLevel(u,'A023',$A)call SetUnitAbilityLevel(u,'A024',$A)endifset u=nullreturn falseendfunctionfunction Qd takes nothing returns booleanlocal unit u=GetTriggerUnit()if GetSpellAbilityId()=='A00K' thencall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Items\\AIam\\AIamTarget.mdl",GetUnitX(u),GetUnitY(u)))call dR(u)endifset u=nullreturn falseendfunctionfunction sd takes nothing returns booleanlocal unit u=GetTriggerUnit()if GetSpellAbilityId()=='A009' thencall UnitAddAbility(u,'A04I')call UnitRemoveAbility(u,'A009')call UnitAddAbility(u,'A04F')elseif GetSpellAbilityId()=='A04F' thencall UnitRemoveAbility(u,'A04I')call UnitRemoveAbility(u,'A04F')call UnitAddAbility(u,'A009')endifset u=nullreturn falseendfunctionfunction Sd takes nothing returns booleanlocal unit u=GetTriggerUnit()local real i=GetUnitUserData(u)if GetSpellAbilityId()=='A012' and i<to thencall SetUnitUserData(u,R2I(i+2))set i=GetUnitUserData(u)call SetUnitScale(u,i/ $A,i/ $A,i/ $A)endifif GetSpellAbilityId()=='A014' and i>To thencall SetUnitUserData(u,R2I(i-2))set i=GetUnitUserData(u)call SetUnitScale(u,i/ $A,i/ $A,i/ $A)endifset u=nullreturn falseendfunctionfunction td takes nothing returns booleanlocal unit u=GetConstructedStructure()if GetUnitTypeId(u)=='n00Y' or GetUnitTypeId(u)=='n00W' thencall SetUnitUserData(u,$A)endifset u=nullreturn falseendfunctionfunction Td takes nothing returns booleanlocal unit u=GetTriggerUnit()if LoadBoolean(ht,GetHandleId(u),Uo)or GetUnitTypeId(u)=='h001' thenif GetUnitTypeId(u)!='H003' and GetUnitTypeId(u)!='H00B' and GetUnitTypeId(u)!='H00D' thencall dR(u)endifendifset u=nullreturn falseendfunctionfunction ud takes nothing returns booleanlocal unit u=GetConstructedStructure()local integer iif GetUnitTypeId(u)=='n003' thenset i=oA(GetUnitX(u),GetUnitY(u))call TriggerRegisterUnitInRange(uo,u,40,M)endifset u=nullreturn falseendfunctionfunction Ud takes nothing returns booleanlocal unit u=GetSpellAbilityUnit()local integer r=oA(GetUnitX(u),GetUnitY(u))local integer id=GetPlayerId(GetOwningPlayer(GetSpellTargetUnit()))local rect re=Go[r]if GetSpellAbilityId()=='A01X' thenif GetOwningPlayer(u)!=GetOwningPlayer(GetSpellTargetUnit())and GetPlayerId(GetOwningPlayer(GetSpellTargetUnit()))>7 thencall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Human\\Invisibility\\InvisibilityTarget.mdl",GetUnitX(GetSpellTargetUnit()),GetUnitY(GetSpellTargetUnit())))if LoadBoolean(ht,GetHandleId(re),id)!=true thencall SaveBoolean(ht,GetHandleId(re),id,true)call DisplayTextToPlayer(GetOwningPlayer(GetSpellTargetUnit()),0,0,K[GetPlayerId(GetOwningPlayer(u))]+GetPlayerName(GetOwningPlayer(u))+" |cffA5C531allowed |ryou to build in his region.")call DisplayTextToPlayer(GetOwningPlayer(u),0,0,"You |cffA5C531allowed|r "+K[id]+GetPlayerName(GetOwningPlayer(GetSpellTargetUnit()))+" to build in your Region.")elsecall SaveBoolean(ht,GetHandleId(re),id,false)call DisplayTextToPlayer(GetOwningPlayer(GetSpellTargetUnit()),0,0,K[GetPlayerId(GetOwningPlayer(u))]+GetPlayerName(GetOwningPlayer(u))+" |cffF74229disallowed |ryou to build in his region.")call DisplayTextToPlayer(GetOwningPlayer(u),0,0,"You |cffF74229disallowed r "+K[id]+GetPlayerName(GetOwningPlayer(GetSpellTargetUnit()))+" to build in your Region.")endifelsecall DisplayTextToPlayer(GetOwningPlayer(u),0,0," |cffF74229You cant allow yourself or an Escaper to build in your Region.")endifendifset re=nullset u=nullreturn falseendfunctionfunction wd takes nothing returns nothinglocal unit uif yb(u)==false thencall dR(u)endifset u=nullendfunctionfunction Wd takes nothing returns booleanreturn yb(GetTriggerUnit())endfunctionfunction yd takes integer Yd returns booleanlocal integer i=0loopif xr[i]==Yd thenreturn trueendifset i=i+1exitwhen xr[i]==nullendloopreturn falseendfunctionfunction zd takes nothing returns nothingset Zo=CreateUnit(Player(GetPlayerId(GetOwningPlayer(zo))),'h00G',wo,Wo,bj_UNIT_FACING)call UnitApplyTimedLife(Zo,'BTLF',1)call IssuePointOrderById(Zo,er,wo,Wo)call SetUnitPosition(zo,wo,Wo)call SetUnitX(zo,yo)call SetUnitY(zo,Yo)set Zo=nullendfunctionfunction Zd takes nothing returns nothinglocal widget w=GetOrderTarget()local integer vD=GetIssuedOrderId()set zo=GetTriggerUnit()set er=GetUnitCurrentOrder(zo)if yd(vD)thenset wo=GetLocationX(GetOrderPointLoc())set Wo=GetLocationY(GetOrderPointLoc())set yo=GetUnitX(zo)set Yo=GetUnitY(zo)call TimerStart(vr,.0,false,function zd)elseif w==null thencall SetUnitX(zo,GetOrderPointX())call SetUnitY(zo,GetOrderPointY())call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl",GetUnitX(zo),GetUnitY(zo)))call SetUnitFacing(zo,GI(GetUnitX(zo),GetUnitY(zo),GetOrderPointX(),GetOrderPointY()))elsecall SetUnitFacing(zo,GI(GetUnitX(zo),GetUnitY(zo),GetWidgetX(w),GetWidgetY(w)))call SetUnitX(zo,GetWidgetX(w))call SetUnitY(zo,GetWidgetY(w))call DestroyEffect(AddSpecialEffect("Abilities\\Spells\\NightElf\\Blink\\BlinkTarget.mdl",GetUnitX(zo),GetUnitY(zo)))endifendifset w=nullendfunctionfunction eD takes nothing returns booleanlocal unit u=GetTriggerUnit()local item it=GetOrderTargetItem()local integer kif yb(u)thenif GetItemTypeId(it)=='I009' thenset k=GetItemUserData(it)if k>0 thencall YX(k)endifcall RemoveItem(it)elsecall RemoveItem(it)endifendifset u=nullset it=nullreturn falseendfunctionfunction xD takes nothing returns booleanlocal integer i=GetSpellAbilityId()if i=='A03Q' thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cffFF8000Jukebox |rnow playing: |cff63C54ACredits")call StopMusic(false)call EndThematicMusic()call CR(Be,false,false)call CR(ce,false,false)call PlayMusic("Sound\\Music\\mp3Music\\Credits.mp3")elseif i=='A03M' thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cffFF8000Jukebox |rnow playing: |cff63C54AHuman 1")call StopMusic(false)call EndThematicMusic()call CR(Be,false,false)call CR(ce,false,false)call PlayMusic("Sound\\Music\\mp3Music\\Human1.mp3")elseif i=='A02R' thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cffFF8000Jukebox |rnow playing: |cff63C54AHuman 2")call StopMusic(false)call EndThematicMusic()call CR(Be,false,false)call CR(ce,false,false)call PlayMusic("Sound\\Music\\mp3Music\\Human2.mp3")elseif i=='A03L' thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cffFF8000Jukebox |rnow playing: |cff63C54AHuman X1")call StopMusic(false)call EndThematicMusic()call CR(Be,false,false)call CR(ce,false,false)call PlayMusic("Sound\\Music\\mp3Music\\HumanX1.mp3")elseif i=='A03N' thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cffFF8000Jukebox |rnow playing: |cff63C54AOrc 3")call StopMusic(false)call EndThematicMusic()call CR(Be,false,false)call CR(ce,false,false)call PlayMusic("Sound\\Music\\mp3Music\\Orc3.mp3")elseif i=='A03P' thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cffFF8000Jukebox |rnow playing: |cff63C54ASad Mystery")call StopMusic(false)call EndThematicMusic()call CR(Be,false,false)call CR(ce,false,false)call PlayMusic("Sound\\Music\\mp3Music\\SadMystery.mp3")elseif i=='A03O' thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cffFF8000Jukebox |rnow playing: |cff63C54AStorm, Earth and Fire")call StopMusic(true)call EndThematicMusic()call CR(Be,false,false)call PlaySoundBJ(ce)elseif i=='A03U' thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cffFF8000Jukebox |rnow playing: |cff63C54ATragic Confrontation")call StopMusic(false)call EndThematicMusic()call CR(Be,false,false)call CR(ce,false,false)call PlayMusic("Sound\\Music\\mp3Music\\TragicConfrontation.mp3")elseif i=='A03T' thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cffFF8000Jukebox |rnow playing: |cff63C54AUndead 2")call StopMusic(false)call EndThematicMusic()call CR(Be,false,false)call CR(ce,false,false)call PlayMusic("Sound\\Music\\mp3Music\\Undead2.mp3")elseif i=='A03S' thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cffFF8000Jukebox |rnow playing: |cff63C54AWarcraft 2 Intro Music")call StopMusic(false)call EndThematicMusic()call PlaySoundBJ(Be)call CR(ce,false,false)elseif i=='A03R' thencall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cffFF8000Jukebox |rstopped")call StopMusic(true)call EndThematicMusic()call CR(ce,false,false)call CR(Be,false,false)endifreturn falseendfunctionfunction rD takes nothing returns booleanlocal integer id=GetSpellAbilityId()local integer i=0loopif id==ir[i]thencall CreateItem(rr[i],GetSpellTargetX(),GetSpellTargetY())return falseendifset i=i+1exitwhen ir[i]==nullendloopreturn falseendfunctionfunction iD takes nothing returns booleanlocal integer i=0local integer i2=1local integer i3=-1local unit u=GetSpellAbilityUnit()local integer id=GetSpellAbilityId()local string s=GetUnitName(u)local real x=GetSpellTargetX()local real y=GetSpellTargetY()local weathereffect wlocal integer rn=oA(x,y)local integer R=LoadInteger(ht,GetHandleId(Go[rn]),0)if GetUnitTypeId(u)!='u001' and GetUnitTypeId(u)!='u005' and GetUnitTypeId(u)!='u007' and GetUnitTypeId(u)!='u00C' thenset u=nullreturn falseendifif id=='A03G' thencall SetFloatGameState(GAME_STATE_TIME_OF_DAY,24)set u=nullreturn falseendifif id=='A03I' thencall SetFloatGameState(GAME_STATE_TIME_OF_DAY,6)set u=nullreturn falseendifif id=='A03J' thencall SetFloatGameState(GAME_STATE_TIME_OF_DAY,$C)set u=nullreturn falseendifif id=='A03H' thencall SuspendTimeOfDay(not false)set u=nullreturn falseendifif id=='A02T' thencall SuspendTimeOfDay(not true)set u=nullreturn falseendifif id=='A02N' or id=='A02P' or id=='A02O' thenset u=nullreturn falseendifif id=='A03F' thenset i3=0endifloopexitwhen Er[i2]==nullif id==Er[i2]thenset i3=i2exitwhen trueendifset i2=i2+1endloopif i3==-1 thenset u=nullreturn falseendifif xV[R]==GetOwningPlayer(u)thenif i3==0 thenif Vr[rn]!=null thencall RemoveWeatherEffect(Vr[rn])endifset u=nullreturn falseendifif Vr[rn]!=null thencall RemoveWeatherEffect(Vr[rn])endifset Vr[rn]=AddWeatherEffect(Go[rn],ar[i3])call EnableWeatherEffect(Vr[rn],true)set u=nullreturn falseelsecall DisplayTextToPlayer(GetOwningPlayer(u),0,0,"|cffC51019This Region doesn't belong to you!")endifset u=nullreturn falseendfunctionfunction nD takes nothing returns booleanlocal unit u=GetTriggerUnit()if GetSpellAbilityId()=='A000' thenset u=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'u001',GetUnitX(u),GetUnitY(u),GetUnitFacing(GetTriggerUnit()))call UnitAddItemById(u,'I000')call UnitAddItemById(u,'I001')call UnitAddItemById(u,'I002')call UnitAddItemById(u,'I003')call dR(GetTriggerUnit())call SelectUnitForPlayerSingle(u,GetOwningPlayer(u))elseif GetSpellAbilityId()=='A00O' thenset u=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'u005',GetUnitX(u),GetUnitY(u),GetUnitFacing(GetTriggerUnit()))call UnitAddItemById(u,'I000')call UnitAddItemById(u,'I001')call UnitAddItemById(u,'I002')call UnitAddItemById(u,'I003')call dR(GetTriggerUnit())call SelectUnitForPlayerSingle(u,GetOwningPlayer(u))elseif GetSpellAbilityId()=='A05B' thenset u=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'u007',GetUnitX(u),GetUnitY(u),GetUnitFacing(GetTriggerUnit()))call UnitAddItemById(u,'I000')call UnitAddItemById(u,'I001')call UnitAddItemById(u,'I002')call UnitAddItemById(u,'I003')call dR(GetTriggerUnit())call SelectUnitForPlayerSingle(u,GetOwningPlayer(u))elseif GetSpellAbilityId()=='A05C' thenset u=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'u00C',GetUnitX(u),GetUnitY(u),GetUnitFacing(GetTriggerUnit()))call UnitAddItemById(u,'I000')call UnitAddItemById(u,'I001')call UnitAddItemById(u,'I002')call UnitAddItemById(u,'I003')call dR(GetTriggerUnit())call SelectUnitForPlayerSingle(u,GetOwningPlayer(u))elseif GetSpellAbilityId()=='A05D' thenset u=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'u005',GetUnitX(u),GetUnitY(u),GetUnitFacing(GetTriggerUnit()))call UnitAddItemById(u,'I000')call UnitAddItemById(u,'I001')call UnitAddItemById(u,'I002')call UnitAddItemById(u,'I003')call dR(GetTriggerUnit())call SelectUnitForPlayerSingle(u,GetOwningPlayer(u))elseif GetSpellAbilityId()=='A05E' thenset u=CreateUnit(GetOwningPlayer(GetTriggerUnit()),'u007',GetUnitX(u),GetUnitY(u),GetUnitFacing(GetTriggerUnit()))call UnitAddItemById(u,'I000')call UnitAddItemById(u,'I001')call UnitAddItemById(u,'I002')call UnitAddItemById(u,'I003')call dR(GetTriggerUnit())call SelectUnitForPlayerSingle(u,GetOwningPlayer(u))endifset u=nullreturn falseendfunctionfunction ED takes nothing returns booleanreturn GetSpellAbilityId()=='A02N' or GetSpellAbilityId()=='A02P'endfunctionfunction XD takes nothing returns nothinglocal unit OD=GetTriggerUnit()local integer i=0local integer RDloopexitwhen Xr[i]==0if GetUnitAbilityLevel(OD,Xr[i])>0 thenset RD=GetUnitAbilityLevel(OD,Xr[i])exitwhen trueendifset i=i+1endloopif GetSpellAbilityId()=='A02N' thenif RD<2 thencall SetUnitAbilityLevel(OD,Xr[i],Rr[i])call SetUnitAbilityLevel(OD,'A02O',Rr[i])elsecall DecUnitAbilityLevel(OD,Xr[i])call SetUnitAbilityLevel(OD,'A02O',GetUnitAbilityLevel(OD,Xr[i]))endifelseif GetSpellAbilityId()=='A02P' thenif RD==Rr[i]thencall SetUnitAbilityLevel(OD,Xr[i],1)call SetUnitAbilityLevel(OD,'A02O',1)elsecall SetUnitAbilityLevel(OD,Xr[i],GetUnitAbilityLevel(OD,Xr[i])+1)call SetUnitAbilityLevel(OD,'A02O',GetUnitAbilityLevel(OD,Xr[i]))endifendifset OD=nullendfunctionfunction ID takes unit u returns booleanlocal integer E=GetUnitUserData(u)local real x=GetUnitX(u)local real y=GetUnitY(u)local integer AD=GetTerrainType(x,y)local integer i=0local integer yX=LoadInteger(ht,GetHandleId(Go[dV[E]]),0)if AD=='Idki' and JV[E]==false thencall od(E)elseif AD!='Idki' and JV[E] thencall rd(E)endifloopif AD==UV[i]thenif GV[E]!=0 thencall ad(E)endifcall ZC(E,x,y,RV[yX],IV[yX],AV[yX])return falseendifset i=i+1exitwhen i>4endloopset i=0loopif AD==wV[i]thenif GV[E]!=1 thencall nd(E)return falseendifendifset i=i+1exitwhen i>4endloopif AD=='Irbk' and GV[E]!=1 thencall nd(E)return falseendifif AD=='Dlvc' thenif GV[E]!=2 thencall Vd(E)endifcall ZC(E,x,y,RV[yX],IV[yX],AV[yX])return falseendifif AD==qo and GetWidgetLife(cV[E])>.405 thenif GV[E]!=4 and jV[E]==false thencall Xd(E)elseset GV[E]=4endifcall ZC(E,x,y,RV[yX],IV[yX],AV[yX])return falseendifif AD=='Nice' or AD=='Idki' or AD==so thenif GV[E]!=3 thencall Ed(E)endifcall ZC(E,x,y,RV[yX],IV[yX],AV[yX])return falseendifreturn falseendfunctionfunction ND takes nothing returns booleanlocal integer i=0loopif Ar[i]!=null and GetUnitFlyHeight(Ar[i])<20 thencall ID(Ar[i])endifset i=i+1exitwhen i>$Aendloopreturn falseendfunctionfunction bD takes nothing returns booleanlocal unit u=GetTriggerUnit()local integer i=oA(GetUnitX(u),GetUnitY(u))local integer yX=LoadInteger(ht,GetHandleId(Go[i]),0)if GetSpellAbilityId()=='A057' thenif RV[yX]<$F thenset RV[yX]=RV[yX]+.5call DisplayTextToPlayer(GetOwningPlayer(u),0,0,"Slidespeed: "+R2S(RV[yX]))elsecall DisplayTextToPlayer(GetOwningPlayer(u),0,0,"Slidespeed is on Maximum")endifelseif GetSpellAbilityId()=='A006' thenif RV[yX]>-$F thenset RV[yX]=RV[yX]-.5call DisplayTextToPlayer(GetOwningPlayer(u),0,0,"Slidespeed: "+R2S(RV[yX]))elsecall DisplayTextToPlayer(GetOwningPlayer(u),0,0,"Slidespeed is on Minimum")endifelseif GetSpellAbilityId()=='A059' thenif AV[yX]>.1 thenset AV[yX]=AV[yX]-.1call DisplayTextToPlayer(GetOwningPlayer(u),0,0,"Poisondmg: "+R2S(AV[yX]))elsecall DisplayTextToPlayer(GetOwningPlayer(u),0,0,"Poisondmg is on Minimum")endifelseif GetSpellAbilityId()=='A011' thenif AV[yX]<5 thenset AV[yX]=AV[yX]+.1call DisplayTextToPlayer(GetOwningPlayer(u),0,0,"Poisondmg: "+R2S(AV[yX]))elsecall DisplayTextToPlayer(GetOwningPlayer(u),0,0,"Poisondmg is on Maximum")endifelseif GetSpellAbilityId()=='A058' thenif IV[yX]<5 thenset IV[yX]=IV[yX]+.1call DisplayTextToPlayer(GetOwningPlayer(u),0,0,"Lavadmg: "+R2S(IV[yX]))elsecall DisplayTextToPlayer(GetOwningPlayer(u),0,0,"Lavadmg is on Maximum")endifelseif GetSpellAbilityId()=='A05A' thenif IV[yX]>.1 thenset IV[yX]=IV[yX]-.1call DisplayTextToPlayer(GetOwningPlayer(u),0,0,"Lavadmg: "+R2S(IV[yX]))elsecall DisplayTextToPlayer(GetOwningPlayer(u),0,0,"Lavadmg is on Minimum")endifendifset u=nullreturn falseendfunctionfunction BD takes nothing returns booleanlocal unit u=GetConstructedStructure()local integer iif GetUnitTypeId(u)=='n00F' thenset i=oA(GetUnitX(u),GetUnitY(u))call TriggerRegisterUnitInRange(Nr,u,80,M)endifset u=nullreturn falseendfunctionfunction cD takes nothing returns booleanlocal unit u=GetTriggerUnit()if Wb(u)and GetUnitFlyHeight(u)<20 thenif UnitHasBuffBJ(GetTriggerUnit(),'BHds')==false thencall DestroyEffect(AddSpecialEffect("Abilities\\Spells\\Other\\Volcano\\VolcanoDeath.mdl",GetUnitX(u),GetUnitY(u)))call KillUnit(u)endifendifset u=nullreturn falseendfunctionfunction CD takes nothing returns booleanlocal unit u=GetTriggerUnit()if Wb(u)and GetUnitFlyHeight(u)<20 thenif UnitHasBuffBJ(u,'BHds')==false thencall KillUnit(u)endifendifset u=nullreturn falseendfunctionfunction dD takes integer yX returns nothingif TA(GetUnitX(mV[yX]),GetUnitY(mV[yX]))==false thenset MV[yX]=GetUnitX(mV[yX])set pV[yX]=GetUnitY(mV[yX])endifendfunctionfunction DD takes nothing returns nothinglocal item it=GetManipulatedItem()local integer k=GetItemUserData(it)local unit u=GetManipulatingUnit()if GetItemTypeId(it)=='I009' and Wb(u)thencall DisableTrigger(Cr)call RemoveItem(it)call EnableTrigger(Cr)set it=CreateItem('I009',MV[k],pV[k])call YX(k)endifset u=nullset it=nullendfunctionfunction fD takes nothing returns nothingif GetItemTypeId(GetManipulatedItem())=='I009' thenset cr=cr+1set Br[cr]=wX(GetManipulatingUnit())call SetItemUserData(GetManipulatedItem(),Br[cr])endifendfunctionfunction FD takes nothing returns nothinglocal integer i=0loopcall dD(Br[i])set i=i+1exitwhen i>crendloopendfunctionfunction gD takes unit u returns integerlocal integer yX=WX()set mV[yX]=uset MV[yX]=GetUnitX(u)set pV[yX]=GetUnitY(u)return yXendfunctionfunction GD takes nothing returns booleanlocal unit u=GetTriggerUnit()if GetSpellAbilityId()=='A008' thencall IssueImmediateOrderById(u,$D0004)endifset u=nullreturn falseendfunctionfunction hD takes nothing returns nothingcall IssuePointOrderById(le,$D0016,$E1C,-4650)call IssuePointOrderById(Le,$D0016,$DF6,-5253)call IssuePointOrderById(Ke,$D0016,$EFA,-5380)call IssuePointOrderById(me,$D0016,$B74,-5615)call IssuePointOrderById(pe,$D0016,$EA3,-5848)call IssuePointOrderById(Me,$D0016,$FA0,-6340)call IssuePointOrderById(Pe,$D0016,$D79,-6652)call IssuePointOrderById(qe,$D0016,$A3A,-6917)call IssuePointOrderById(Je,$D0016,$730,-6537)call IssuePointOrderById(je,$D0016,$50D,-6286)call IssuePointOrderById(ke,$D0016,$50D,-6286)call IssuePointOrderById(Qe,$D000C,-4905,-5518)endfunctionfunction HD takes nothing returns nothinglocal integer i=oA(-'d',-6116)local integer R=LoadInteger(ht,GetHandleId(Go[i]),0)local integer ecall IssuePointOrderById(te,$D0016,368,-6647)call IssuePointOrderById(Te,$D0016,$80,-6130)call IssuePointOrderById(ue,$D0016,-284,-6315)call IssuePointOrderById(Se,$D0016,-$ED,-6525)call IssuePointOrderById(ye,$D0016,786,-6000)call IssuePointOrderById(Ue,$D0016,775,-6400)call IssuePointOrderById(We,$D0016,624,-6648)call IssuePointOrderById(Ye,$D0016,752,-5644)call IssuePointOrderById(Ix,$D0016,-$41A,-5609)call IssuePointOrderById(Ax,$D0016,-$4F6,-5609)call IssuePointOrderById(se,$D0016,-$781,-4364)call IssuePointOrderById(Gx,$D0016,-$782,-4482)call IssuePointOrderById(Fx,$D0016,390,-$F0F)call IssuePointOrderById(gx,$D0016,780,-4222)call IssuePointOrderById(nx,$D000C,-$400,-6785)call IssueImmediateOrderById(nx,$D0238)call IssuePointOrderById(Vx,$D000C,-$400,-6400)call IssueImmediateOrderById(Vx,$D0238)call IssuePointOrderById(Rx,$D000C,-$682,-6982)call IssueImmediateOrderById(Rx,$D0238)call IssuePointOrderById(Xx,$D000C,-$6C0,-6147)call IssueImmediateOrderById(Xx,$D0238)call IssuePointOrderById(Ex,$D000C,-$582,-7100)call IssueImmediateOrderById(Ex,$D0238)call IssuePointOrderById(Ox,$D000C,-$487,-7037)call IssueImmediateOrderById(Ox,$D0238)call IssuePointOrderById(Bx,$D000C,-896,-$F86)call IssueImmediateOrderById(Bx,$D0238)call IssuePointOrderById(Cx,$D000C,-$640,-$EC1)call IssueImmediateOrderById(Cx,$D0238)call IssuePointOrderById(Dx,$D000C,-$542,-4225)call IssueImmediateOrderById(Dx,$D0238)call IssueTargetOrderById(vx,$D000F,xx)call IssuePointOrderById(xx,$D0016,-771,-5372)call IssueTargetOrderById(Ze,$D000F,ox)call IssuePointOrderById(ox,$D0016,-$80,-5100)call IssueTargetOrderById(ze,$D000F,rx)call IssuePointOrderById(rx,$D0016,512,-4870)call IssueTargetOrderById(ex,$D000F,ix)call IssuePointOrderById(ix,$D0016,-758,-4888)call IssuePointOrderById(fx,$D000C,-4905,-5518)call IssuePointOrderById(Nx,$D000C,-$80,-$EE4)call IssuePointOrderById(bx,$D000C,0,-$EE4)set e=GetUnitUserData(Nx)set en[e]=5set e=GetUnitUserData(bx)set en[e]=5set rV[R]='Ywmb'endfunctionfunction jD takes nothing returns nothingcall SetUnitOwner(wx,Player($B),true)call SetUnitOwner(Wx,Player($B),true)call SetUnitOwner(ao,Player($B),true)call SetUnitOwner(no,Player($B),true)call SetUnitOwner(Vo,Player($B),true)call SetUnitOwner(Eo,Player($B),true)call SetUnitOwner(Xo,Player($B),true)call SetUnitOwner(Oo,Player($B),true)call SetUnitOwner(Ro,Player($B),true)call SetUnitOwner(Io,Player($B),true)call SetUnitOwner(Kx,Player($B),true)call SetUnitOwner(lx,Player($B),true)call SetUnitOwner(Lx,Player($B),true)call SetUnitOwner(Px,Player($B),true)call SetUnitOwner(ux,Player($B),true)call SetUnitOwner(jx,Player($B),true)call SetUnitOwner(Tx,Player($B),true)endfunctionfunction JD takes nothing returns nothinglocal integer Scall IssuePointOrderById(Yx,$D0016,-$B84,-6192)call IssuePointOrderById(zx,$D0016,-$A55,-6798)call IssuePointOrderById(Zx,$D0016,-$C39,-6798)call IssuePointOrderById(xo,$D0016,-$DE0,-6419)call IssuePointOrderById(oo,$D0016,-4317,-5883)call IssuePointOrderById(eo,$D0016,-$FCD,-6441)call IssuePointOrderById(io,$D0016,-4719,-6655)call IssuePointOrderById(hx,$D0016,-4544,-6881)call IssuePointOrderById(Hx,$D0016,-4553,-7000)call IssuePointOrderById(Mx,$D0016,-4754,-7185)call IssuePointOrderById(mx,$D0016,-4720,-7060)call IssuePointOrderById(kx,$D0016,-$A96,-5120)call IssuePointOrderById(Jx,$D0016,-$AA8,-5100)call IssuePointOrderById(Qx,$D0016,-4576,-4748)call IssuePointOrderById(sx,$D0016,-4320,-5164)call IssuePointOrderById(vo,$D0016,-$9E5,-7195)call IssuePointOrderById(yx,$D0016,-$DAE,-6077)call IssuePointOrderById(Ao,$D0016,-$F71,-5678)call IssuePointOrderById(Sx,$D0016,-4648,-$F9B)call IssuePointOrderById(tx,$D000C,-4905,-5518)set S=GetUnitUserData(ux)set Ta[S]=0call IssueTargetOrderById(ux,$D00B2,wx)call TriggerSleepAction(.01)call IssueTargetOrderById(ux,$D00B2,Wx)set Ta[S]=6set S=GetUnitUserData(Tx)set Ta[S]=0call TriggerSleepAction(.01)call IssueTargetOrderById(Tx,$D00B2,ao)call TriggerSleepAction(.01)call IssueTargetOrderById(Tx,$D00B2,no)call TriggerSleepAction(.01)call IssueTargetOrderById(Tx,$D00B2,Vo)call TriggerSleepAction(.01)call IssueTargetOrderById(Tx,$D00B2,Eo)call TriggerSleepAction(.01)call IssueTargetOrderById(Tx,$D00B2,Xo)call TriggerSleepAction(.01)call IssueTargetOrderById(Tx,$D00B2,Oo)call TriggerSleepAction(.01)call IssueTargetOrderById(Tx,$D00B2,Ro)call TriggerSleepAction(.01)call IssueTargetOrderById(Tx,$D00B2,Io)set Ta[S]=3set S=GetUnitUserData(Ux)set Ta[S]=0call TriggerSleepAction(.01)call IssueTargetOrderById(Ux,$D00B2,Kx)call TriggerSleepAction(.01)call IssueTargetOrderById(Ux,$D00B2,lx)call TriggerSleepAction(.01)call IssueTargetOrderById(Ux,$D00B2,Lx)call TriggerSleepAction(.01)set Ta[S]=5call SetUnitOwner(Ux,Player($B),true)call IssuePointOrderById(Ux,$D0016,-$EEC,-4661)set S=GetUnitUserData(jx)set Ta[S]=7call TriggerSleepAction(.01)call IssueTargetOrderById(jx,$D00B2,Px)call TriggerSleepAction(.01)call jD()endfunctionfunction kD takes nothing returns nothinglocal integer i=GetRandomInt(0,2)if i==0 thencall IssuePointOrderById(He,$D000C,$D7A,-4175)call jD()call IB(0,Player($B))call IB(1,Player($B))call hD()elseif i==1 thencall IssuePointOrderById(He,$D000C,835,-7050)call jD()call IB(18,Player($B))call IB(1,Player($B))call HD()elseif i==2 thencall IssuePointOrderById(He,$D000C,-$97E,-6143)call IB(18,Player($B))call IB(0,Player($B))call JD()endifendfunctionfunction KD takes nothing returns nothinglocal unit ulocal trigger tlocal timer lBcall GroupEnumUnitsOfType(dr,UnitId2String('n00S'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,90,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n019'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,90,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n00R'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,70,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n00X'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,64,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n01I'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,64,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n018'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,64,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n00T'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,42,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n00K'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,$FF,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call TriggerSleepAction(.1)call GroupEnumUnitsOfType(dr,UnitId2String('n00F'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,80,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('u008'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,90,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('h015'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,'f',M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('h018'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,82,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n009'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,70,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n00D'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,70,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n00E'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,70,M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call TriggerSleepAction(.1)call GroupEnumUnitsOfType(dr,UnitId2String('h01H'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,'f',M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('h01I'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall TriggerRegisterUnitInRange(kt,u,'f',M)call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('h00C'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall SetUnitUserData(u,(tc(u,$96)))call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n00C'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall SetUnitUserData(u,(hB(u,40)))call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n000'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall SetUnitUserData(u,(dd(u,80)))call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n003'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullset t=CreateTrigger()call lA(t,u,40)call TriggerAddCondition(t,Condition(function Td))call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('n006'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall SetUnitUserData(u,(yc(u,0)))call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call TriggerSleepAction(.1)call GroupEnumUnitsOfType(dr,UnitId2String('n01D'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall SetUnitUserData(u,(pc(u,40)))call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call GroupEnumUnitsOfType(dr,UnitId2String('h01M'),M)loopset u=FirstOfGroup(dr)exitwhen u==nullcall SetUnitUserData(u,(Ic(u,0)))call GroupRemoveUnit(dr,u)endloopcall GroupClear(dr)call TriggerSleepAction(.1)call IssuePointOrderById(Fe,$D0016,4960,-4737)call IssuePointOrderById(ge,$D0016,4587,-5137)call IssuePointOrderById(fe,$D0016,4600,-5252)call IssuePointOrderById(Ge,$D000C,6275,-5131)call IssuePointOrderById(he,$D000C,6660,-4866)call kD()set t=nullset u=nullendfunctionfunction lD takes nothing returns nothingcall CreateFogModifierRectBJ(true,Player($B),FOG_OF_WAR_VISIBLE,bj_mapInitialPlayableArea)call CreateFogModifierRectBJ(true,Player(8),FOG_OF_WAR_VISIBLE,yv)endfunctionfunction mD takes nothing returns nothingcall dR(GetEnumUnit())endfunctionfunction MD takes nothing returns booleanlocal integer i=0local unit ulocal quest qloopif GetPlayerSlotState(Player(i))==PLAYER_SLOT_STATE_PLAYING thencall CreateFogModifierRectBJ(true,Player(i),FOG_OF_WAR_VISIBLE,Sv)if i>7 thenset Gr[i]=CreateUnit(Player(i),'u001',-5240,-5624,0)call UnitAddItemById(Gr[i],'I000')call UnitAddItemById(Gr[i],'I001')call UnitAddItemById(Gr[i],'I002')call UnitAddItemById(Gr[i],'I003')call CreateUnit(Player(i),'H004',-5444,6333,0)call CreateUnit(Player(i),'H005',-5444,6333,0)call CreateUnit(Player(i),'H007',-5444,6333,0)call CreateUnit(Player(i),'H008',-5444,6333,0)set Dr[i]=CreateUnit(Player(i),'H00A',-5444,6333,0)call SetUnitUserData(Dr[i],gd(Dr[i]))call SetUnitVertexColorBJ(Dr[i],'d','d','d','d')call CreateFogModifierRectBJ(true,Player(i),FOG_OF_WAR_VISIBLE,bj_mapInitialPlayableArea)endifelsecall ForGroup(FX(Player(i)),function mD)endifset i=i+1exitwhen i>$Aendloopcall CreateTextTagLocBJ("Ice (controllable)",Location(6000,-6467),20,$C,$FF,$FF,$FF,$FF)call CreateTextTagLocBJ("Reverse Ice",Location(6447,-6467),20,$C,$FF,$FF,$FF,$FF)call CreateTextTagLocBJ("Dark Ice (uncontrollable)",Location(6750,-6467),20,$C,$FF,$FF,$FF,$FF)call CreateTextTagLocBJ("Obstacle (kills Escapers)",Location(5400,-7000),20,$C,$FF,$FF,$FF,$FF)call CreateTextTagLocBJ("Key (opens a door)",Location(4470,-7165),20,$C,$FF,$FF,$FF,$FF)call MultiboardDisplay(cv,true)set q=CreateQuest()call QuestSetTitle(q,"Commands")call QuestSetIconPath(q,"ReplaceableTextures\\CommandButtons\\BTNGhostKey.blp")call QuestSetDescription(q,"-clear (clears the Screen from Textmessages)
-cam [100-2000] (only Builder, sets the camera distance)")set q=nullreturn falseendfunctionfunction Initialisation__ChangeOwner takes nothing returns nothingif GetPlayerSlotState(Player(8))==PLAYER_SLOT_STATE_PLAYING thencall SetUnitOwner(GetEnumUnit(),Player(9),true)elseif GetPlayerSlotState(Player(9))==PLAYER_SLOT_STATE_PLAYING thencall SetUnitOwner(GetEnumUnit(),Player($A),true)elseif GetPlayerSlotState(Player($A))==PLAYER_SLOT_STATE_PLAYING thencall SetUnitOwner(GetEnumUnit(),Player(8),true)endifendfunctionfunction pD takes integer Tb returns nothinglocal unit u=CreateUnit(Player($F),Tb,0,0,0)call ShowUnit(u,false)call KillUnit(u)set u=nullendfunctionfunction qD takes nothing returns nothinglocal string QD="| "local string s="|cff0863AD"local integer i=0local integer sD=Hrlocal real SD=(I2R(hr)/ I2R(Hr))*'d'if Kr>3 thenset kr=kr+1if kr>3 thenset kr=0set lr="Generating Mazes"elseset lr=lr+"."endifset Kr=0endifset i=0loopif i==hr thenset s=s+"|r"+QDelseset s=s+QDendifset sD=sD-1exitwhen sD<=0set i=i+1endloopcall SetTextTagText(jr,"["+s+"|r] - "+I2S(R2I(SD))+"|cffFFCC00%",TextTagSize2Height(7))call SetTextTagText(Jr,lr,TextTagSize2Height($C))set hr=hr+1if hr>Hr thencall ZI(GetExpiredTimer())call DestroyTextTag(jr)call DestroyTextTag(Jr)endifset Kr=Kr+1endfunctionfunction tD takes nothing returns nothinglocal integer i=0local integer i2=0local boolean ya=falseset Lr=CreateMultiboard()call MultiboardSetColumnCount(Lr,2)call MultiboardSetRowCount(Lr,$F)call MultiboardSetTitleText(Lr,"iBoard")loopcall MultiboardSetItemStyle(MultiboardGetItem(Lr,i,0),true,false)call MultiboardSetItemStyle(MultiboardGetItem(Lr,i,1),true,false)call MultiboardSetItemWidth(MultiboardGetItem(Lr,i,0),.11)call MultiboardSetItemWidth(MultiboardGetItem(Lr,i,1),.05)set i=i+1exitwhen i>=MultiboardGetRowCount(Lr)endloopset i=0call MultiboardSetItemValue(MultiboardGetItem(Lr,0,0),"Object")call MultiboardSetItemValue(MultiboardGetItem(Lr,1,0),"Teleporter")call MultiboardSetItemValue(MultiboardGetItem(Lr,2,0),"Waypoint")call MultiboardSetItemValue(MultiboardGetItem(Lr,3,0),"Texter")call MultiboardSetItemValue(MultiboardGetItem(Lr,4,0),"Jumper")call MultiboardSetItemValue(MultiboardGetItem(Lr,5,0),"Spinner")call MultiboardSetItemValue(MultiboardGetItem(Lr,6,0),"Pointer")call MultiboardSetItemValue(MultiboardGetItem(Lr,7,0),"Vortex")call MultiboardSetItemValue(MultiboardGetItem(Lr,8,0),"Executer")call MultiboardSetItemValue(MultiboardGetItem(Lr,9,0),"Doors")call MultiboardSetItemValue(MultiboardGetItem(Lr,$A,0),"UnitCreator")call MultiboardSetItemValue(MultiboardGetItem(Lr,$B,0),"Booster")call MultiboardSetItemValue(MultiboardGetItem(Lr,$C,0),"Terrainchanger")call MultiboardSetItemValue(MultiboardGetItem(Lr,$D,0),"Trees")call MultiboardSetItemValue(MultiboardGetItem(Lr,$E,0),"Obstacles")call MultiboardSetItemValue(MultiboardGetItem(Lr,0,1),"Count")endfunctionfunction TD takes integer sD,real TI returns nothinglocal string QD="| "local string s=""local timer t=CreateTimer()local real uD=TI/ sDset Hr=sDloopset s=s+QDset sD=sD-1exitwhen sD<=0endloopset jr=CreateTextTagLocBJ("["+s+"|r]",Location(-$C8,0),50,7,$FF,$FF,$FF,0)set Jr=CreateTextTagLocBJ("Generating Mazes",Location(-$C8,50),'d',$C,$FF,$FF,$FF,0)call TimerStart(t,uD,true,function qD)set t=nullreturnendfunctionfunction UD takes nothing returns nothinglocal integer i=0local unit u=CreateUnit(Player($B),'u00C',0,0,0)local item itcall aN()call tD()call TD(55,6.8)call eN()call zC()call jd()call sC()call EnableUserControl(false)call EnableOcclusion(false)call VolumeGroupReset()call EndThematicMusic()call pD('h01K')call pD('u001')call pD('u005')call pD('u007')call TriggerSleepAction(.1)call DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"|cff088463Escape |cff088CB5Builder |cff8C8C8C[Reloaded] |cffFFCC000.64 |rcreated by |cffCE5219F|cffC25323r|cffB6542Do|cffAA5537t|cff9E5641t|cff92574By |cffFFB521(www.sunayama.de)|r")set it=UnitAddItemById(u,'I000')call RemoveItem(it)set it=UnitAddItemById(u,'I001')call RemoveItem(it)set it=UnitAddItemById(u,'I002')call RemoveItem(it)set it=UnitAddItemById(u,'I003')call RemoveItem(it)call ShowUnit(u,false)call KillUnit(u)call KD()call SN(-6743,6616)if TriggerEvaluate(Fr)thencall TriggerExecute(Fr)endifcall EnableUserControl(true)call EnableOcclusion(true)call MultiboardDisplay(cv,true)call MultiboardMinimize(cv,false)set it=nullset u=nullendfunctionfunction wD takes nothing returns nothingcall DisplayTextToForce(bj_FORCE_ALL_PLAYERS,"For |cffA5CE3A Feedback & Suggestions + the latest Release |rvisit |cffFFB521www.sunayama.de |cffFFE631(english forum)")call PlaySoundBJ(Ne)endfunctionfunction InitCustomTeams takes nothing returns nothingcall SetPlayerTeam(Player(0),0)call SetPlayerState(Player(0),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(1),0)call SetPlayerState(Player(1),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(2),0)call SetPlayerState(Player(2),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(3),0)call SetPlayerState(Player(3),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(4),0)call SetPlayerState(Player(4),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(5),0)call SetPlayerState(Player(5),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(6),0)call SetPlayerState(Player(6),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(7),0)call SetPlayerState(Player(7),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerAllianceStateAllyBJ(Player(0),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(0),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(0),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(0),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(0),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(0),Player(6),true)call SetPlayerAllianceStateAllyBJ(Player(0),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(6),true)call SetPlayerAllianceStateAllyBJ(Player(1),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(6),true)call SetPlayerAllianceStateAllyBJ(Player(2),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(6),true)call SetPlayerAllianceStateAllyBJ(Player(3),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(6),true)call SetPlayerAllianceStateAllyBJ(Player(4),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(6),true)call SetPlayerAllianceStateAllyBJ(Player(5),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(6),Player(7),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player(0),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player(1),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player(2),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player(3),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player(4),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player(5),true)call SetPlayerAllianceStateAllyBJ(Player(7),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(0),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(1),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(2),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(3),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(4),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(6),true)call SetPlayerAllianceStateVisionBJ(Player(5),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(6),Player(7),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(0),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(1),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(2),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(3),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(4),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(5),true)call SetPlayerAllianceStateVisionBJ(Player(7),Player(6),true)call SetPlayerTeam(Player(8),1)call SetPlayerState(Player(8),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player(9),1)call SetPlayerState(Player(9),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerTeam(Player($A),1)call SetPlayerState(Player($A),PLAYER_STATE_ALLIED_VICTORY,1)call SetPlayerAllianceStateAllyBJ(Player(8),Player(9),true)call SetPlayerAllianceStateAllyBJ(Player(8),Player($A),true)call SetPlayerAllianceStateAllyBJ(Player(9),Player(8),true)call SetPlayerAllianceStateAllyBJ(Player(9),Player($A),true)call SetPlayerAllianceStateAllyBJ(Player($A),Player(8),true)call SetPlayerAllianceStateAllyBJ(Player($A),Player(9),true)call SetPlayerTeam(Player($B),2)call SetPlayerState(Player($B),PLAYER_STATE_ALLIED_VICTORY,1)endfunctionfunction main takes nothing returns nothinglocal weathereffect welocal integer itemIDlocal trigger QAlocal integer ilocal trigger yDlocal trigger tlocal trigger YDlocal trigger zDlocal trigger ZDlocal integer pXlocal integer PXlocal version vlocal integer HXcall SetCameraBounds(-7424.+GetCameraMargin(CAMERA_MARGIN_LEFT),-7680.+GetCameraMargin(CAMERA_MARGIN_BOTTOM),7424.-GetCameraMargin(CAMERA_MARGIN_RIGHT),7168.-GetCameraMargin(CAMERA_MARGIN_TOP),-7424.+GetCameraMargin(CAMERA_MARGIN_LEFT),7168.-GetCameraMargin(CAMERA_MARGIN_TOP),7424.-GetCameraMargin(CAMERA_MARGIN_RIGHT),-7680.+GetCameraMargin(CAMERA_MARGIN_BOTTOM))call SetDayNightModels("Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl","Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl")call NewSoundEnvironment("Default")call SetAmbientDaySound("IceCrownDay")call SetAmbientNightSound("IceCrownNight")call SetMapMusic("Music",true,0)set Ne=CreateSound("Sound\\Interface\\Hint.wav",false,false,false,$A,$A,"")call SetSoundParamsFromLabel(Ne,"Hint")call SetSoundDuration(Ne,$7D6)set be=CreateSound("Sound\\Interface\\Rescue.wav",false,false,false,$A,$A,"")call SetSoundParamsFromLabel(be,"Rescue")call SetSoundDuration(be,$ED4)set Be=CreateSound("Sound\\Music\\mp3Music\\War2IntroMusic.mp3",false,false,false,$A,$A,"")call SetSoundParamsFromLabel(Be,"War2Intro")call SetSoundDuration(Be,81136)call SetSoundVolume(Be,$7F)set ce=CreateSound("Sound\\Music\\mp3Music\\PH1.mp3",false,false,false,$A,$A,"")call SetSoundParamsFromLabel(ce,"PHMusic")call SetSoundDuration(ce,$44BEE)set Sv=Rect(-7712.,6016.,-6112.,7424.)set we=AddWeatherEffect(Sv,'SNhs')call EnableWeatherEffect(we,true)set tv=Rect(-6976.,-7328.,-5056.,-1312.)set Tv=Rect(928.,5184.,4160.,7104.)set uv=Rect(4160.,5184.,6976.,7104.)set Uv=Rect(-6976.,5120.,-4928.,7104.)set wv=Rect(-5568.,6368.,-5344.,6560.)set Wv=Rect(-2112.,-7328.,960.,-3648.)set yv=Rect(-5056.,-7328.,-2112.,-3648.)set Yv=Rect(-5056.,-3648.,-2368.,-1312.)set zv=Rect(-6976.,-1312.,-2368.,1984.)set Zv=Rect(-2368.,-3648.,-1216.,5120.)set ve=Rect(-1216.,-3648.,960.,-1472.)set ee=Rect(960.,-3616.,4160.,-1472.)set xe=Rect(928.,-1472.,4160.,704.)set oe=Rect(-1216.,704.,928.,5120.)set ie=Rect(928.,704.,4160.,2880.)set ae=Rect(4160.,-3616.,6976.,704.)set ne=Rect(4160.,704.,6976.,2880.)set Ve=Rect(928.,2880.,6976.,5184.)set Ee=Rect(-4928.,5120.,928.,7104.)set Xe=Rect(-6976.,1984.,-2368.,5120.)set Oe=Rect(960.,-7328.,4160.,-3616.)set Re=Rect(4160.,-7328.,6976.,-3616.)set Ie=Rect(-1216.,-1472.,928.,704.)set we=nullset Ae=CreateCameraSetup()call CameraSetupSetField(Ae,CAMERA_FIELD_ZOFFSET,.0,.0)call CameraSetupSetField(Ae,CAMERA_FIELD_ROTATION,148.3,.0)call CameraSetupSetField(Ae,CAMERA_FIELD_ANGLE_OF_ATTACK,345.7,.0)call CameraSetupSetField(Ae,CAMERA_FIELD_TARGET_DISTANCE,991.7,.0)call CameraSetupSetField(Ae,CAMERA_FIELD_ROLL,.0,.0)call CameraSetupSetField(Ae,CAMERA_FIELD_FIELD_OF_VIEW,70.,.0)call CameraSetupSetField(Ae,CAMERA_FIELD_FARZ,5000.,.0)call CameraSetupSetDestPosition(Ae,-6863.5,6652.6,.0)call CreateItem('I009',5499.,-6025.7)call CreateItem('I009',4479.1,-7055.1)call CreateItem('I009',-2345.8,-4226.5)call CreateItem('I009',-1774.,-3862.8)call CreateItem('I009',-1766.4,-4103.7)call CreateItem('I009',99.8,-7051.3)call CreateItem('I009',3833.9,-6661.8)call CreateItem('I009',2300.5,-5524.2)call CreateItem('I009',-4726.3,-6942.8)call CreateItem('I00A',3555.9,-7052.6)call CreateItem('I00A',1203.4,-6142.2)call CreateItem('I00A',6501.5,-5501.7)call CreateItem('I00A',4344.2,-4109.3)call CreateItem('I00A',-1955.5,-5627.8)call CreateItem('I00A',-1653.,-5909.7)call CreateItem('I00A',680.1,-4365.6)call CreateItem('I00A',-3407.7,-6250.1)call CreateItem('I00A',-3830.4,-4934.)call CreateItem('I00A',-4483.5,-5093.2)call CreateItem('I00A',5132.8,-4996.6)call CreateItem('I00A',2410.7,-6904.5)call tb()call Ub()call ub()call wb()call ConfigureNeutralVictim()set dX=Filter(function mX)set filterIssueHauntOrderAtLocBJ=Filter(function IssueHauntOrderAtLocBJFilter)set filterEnumDestructablesInCircleBJ=Filter(function fX)set filterGetUnitsInRectOfPlayer=Filter(function GetUnitsInRectOfPlayerFilter)set filterGetUnitsOfTypeIdAll=Filter(function GetUnitsOfTypeIdAllFilter)set filterGetUnitsOfPlayerAndTypeId=Filter(function GetUnitsOfPlayerAndTypeIdFilter)set filterMeleeTrainedUnitIsHeroBJ=Filter(function MeleeTrainedUnitIsHeroBJFilter)set filterLivingPlayerUnitsOfTypeId=Filter(function LivingPlayerUnitsOfTypeIdFilter)set pX=0loopexitwhen pX==16set bj_FORCE_PLAYER[pX]=CreateForce()call ForceAddPlayer(bj_FORCE_PLAYER[pX],Player(pX))set pX=pX+1endloopset bj_FORCE_ALL_PLAYERS=CreateForce()call ForceEnumPlayers(bj_FORCE_ALL_PLAYERS,null)set bj_cineModePriorSpeed=GetGameSpeed()set bj_cineModePriorFogSetting=IsFogEnabled()set bj_cineModePriorMaskSetting=IsFogMaskEnabled()set pX=0loopexitwhen pX>=bj_MAX_QUEUED_TRIGGERSset bj_queuedExecTriggers[pX]=nullset bj_queuedExecUseConds[pX]=falseset pX=pX+1endloopset bj_isSinglePlayer=falseset PX=0set pX=0loopexitwhen pX>=$Cif(GetPlayerController(Player(pX))==MAP_CONTROL_USER and GetPlayerSlotState(Player(pX))==PLAYER_SLOT_STATE_PLAYING)thenset PX=PX+1endifset pX=pX+1endloopset bj_isSinglePlayer=(PX==1)set bj_rescueSound=CreateSoundFromLabel("Rescue",false,false,false,$2710,$2710)set bj_questDiscoveredSound=CreateSoundFromLabel("QuestNew",false,false,false,$2710,$2710)set bj_questUpdatedSound=CreateSoundFromLabel("QuestUpdate",false,false,false,$2710,$2710)set bj_questCompletedSound=CreateSoundFromLabel("QuestCompleted",false,false,false,$2710,$2710)set bj_questFailedSound=CreateSoundFromLabel("QuestFailed",false,false,false,$2710,$2710)set bj_questHintSound=CreateSoundFromLabel("Hint",false,false,false,$2710,$2710)set bj_questSecretSound=CreateSoundFromLabel("SecretFound",false,false,false,$2710,$2710)set bj_questItemAcquiredSound=CreateSoundFromLabel("ItemReward",false,false,false,$2710,$2710)set bj_questWarningSound=CreateSoundFromLabel("Warning",false,false,false,$2710,$2710)set bj_victoryDialogSound=CreateSoundFromLabel("QuestCompleted",false,false,false,$2710,$2710)set bj_defeatDialogSound=CreateSoundFromLabel("QuestFailed",false,false,false,$2710,$2710)call DelayedSuspendDecayCreate()set v=VersionGet()if(v==VERSION_REIGN_OF_CHAOS)thenset bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V0elseset bj_MELEE_MAX_TWINKED_HEROES=bj_MELEE_MAX_TWINKED_HEROES_V1endifcall InitQueuedTriggers()call InitRescuableBehaviorBJ()call InitDNCSounds()call InitMapRects()call InitSummonableCaps()set HX=0loopset bj_stockAllowedPermanent[HX]=falseset bj_stockAllowedCharged[HX]=falseset bj_stockAllowedArtifact[HX]=falseset HX=HX+1exitwhen HX>$Aendloopcall SetAllItemTypeSlots($B)call SetAllUnitTypeSlots($B)set bj_stockUpdateTimer=CreateTimer()call TimerStart(bj_stockUpdateTimer,bj_STOCK_RESTOCK_INITIAL_DELAY,false,function lX)set bj_stockItemPurchased=CreateTrigger()call TriggerRegisterPlayerUnitEvent(bj_stockItemPurchased,Player($F),EVENT_PLAYER_UNIT_SELL_ITEM,null)call TriggerAddAction(bj_stockItemPurchased,function RemovePurchasedItem)call DetectGameStarted()call ExecuteFunc("vf")call ExecuteFunc("FR")call ExecuteFunc("gR")call ExecuteFunc("HR")call ExecuteFunc("VI")call ExecuteFunc("EI")call ExecuteFunc("dI")call ExecuteFunc("vA")call ExecuteFunc("tN")call ExecuteFunc("Sb")set QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(QA,Condition(function AB))set QA=nullset QA=CreateTrigger()set i=0loopcall TriggerRegisterPlayerChatEvent(QA,Player(i),"-clear",true)set i=i+1exitwhen i>$Bendloopcall TriggerAddAction(QA,function BB)set QA=CreateTrigger()call SA(QA,"-cam")call TriggerAddAction(QA,function NB)set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function FB))call TriggerAddAction(QA,function DB)set Bo[1]=hN("Sound\\Interface\\ClanInvitation.wav",4296,false,false)set Bo[2]=hN("Sound\\Interface\\NewTournament.wav",7988,false,false)set Bo[3]=hN("Sound\\Interface\\BattleNetDoorsStereo2.wav",$A56,false,false)set Bo[4]=hN("Sound\\Interface\\BattleNetWooshStereo1.wav",$A40,false,false)set Bo[5]=hN("Sound\\Interface\\Rescue.wav",$ED4,false,false)set Bo[6]=hN("Sound\\Interface\\CreepAggroWhat1.wav",$4D4,false,false)set Bo[7]=hN("Sound\\Interface\\GoodJob.wav",$9F4,false,false)set Bo[8]=hN("Sound\\Interface\\ItemReceived.wav",$A0C,false,false)set Bo[9]=hN("Sound\\Interface\\MapPing.wav",$665,false,false)set Bo[$A]=hN("Sound\\Interface\\QuestCompleted.wav",5155,false,false)set Bo[$B]=hN("Sound\\Interface\\QuestFailed.wav",4690,false,false)set Bo[$C]=hN("Sound\\Interface\\SecretFound.wav",$9DD,false,false)set Bo[$D]=hN("Sound\\Interface\\WayPointBling.wav",361,false,false)set Bo[$E]=hN("Sound\\Buildings\\Death\\BuildingDeathLargeOrc.wav",$D9B,false,false)set Bo[$F]=hN("Sound\\Buildings\\Death\\HCancelBuilding.wav",$B02,false,false)set Bo[16]=hN("Sound\\Buildings\\Fire\\NightElvesLargeFireLoop1.wav",$BD6,false,false)set Bo[17]=hN("Sound\\Buildings\\Fire\\OrcHumanLargeBuildingFire1.wav",$D8F,false,false)set Bo[18]=hN("Sound\\Buildings\\Naga\\NagaBuildingCancel.wav",$818,false,false)set Bo[19]=hN("Sound\\Buildings\\Undead\\UndeadBuildingBirth1.wav",$FF7,false,false)set Bo[20]=hN("Sound\\Units\\Death\\ArtilleryCorpseExplodeDeath1.wav",$5CE,false,false)set Bo[21]=hN("Sound\\Units\\Combat\\MetalLightSliceMetal1.wav",376,false,false)set Bo[22]=hN("Sound\\Ambient\\DoodadEffects\\SargerasLaugh.wav",$CFE,false,false)set Bo[23]=hN("Sound\\Ambient\\DoodadEffects\\TheHornOfCenarius.wav",$2F59,false,false)set Bo[24]=hN("Sound\\Ambient\\DoodadEffects\\BridgeDeath.wav",9081,false,false)set Bo[25]=hN("Sound\\Ambient\\DoodadEffects\\KaelReady1_H04X.wav",810,false,false)set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function YB))call TriggerAddAction(QA,function WB)set QA=CreateTrigger()call SA(QA,"-settext")call TriggerAddAction(QA,function TB)set QA=CreateTrigger()call SA(QA,"-showtext")call SA(QA,"-sht")call TriggerAddAction(QA,function uB)set QA=CreateTrigger()call SA(QA,"-hidetext")call SA(QA,"-ht")call TriggerAddAction(QA,function UB)set QA=CreateTrigger()call SA(QA,"-setcolor")call TriggerAddAction(QA,function tB)set co[0]="red"set co[1]="green"set co[2]="blue"set co[3]="yellow"set co[4]="pink"set co[5]="white"set co[6]="orange"set Co[0]="255000000"set Co[1]="121252000"set Co[2]="000000255"set Co[3]="255255000"set Co[4]="238130238"set Co[5]="255255255"set co[6]="255165000"set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function nc))call TriggerAddAction(QA,function ic)set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function Ac))call TriggerAddAction(QA,function Rc)set QA=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_TRAIN_FINISH)call TriggerAddAction(QA,function Dc)set QA=CreateTrigger()call TriggerRegisterPlayerChatEvent(QA,Player(8),"-setangle",false)call TriggerRegisterPlayerChatEvent(QA,Player(9),"-setangle",false)call TriggerRegisterPlayerChatEvent(QA,Player($A),"-setangle",false)call TriggerAddAction(QA,function Bc)set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function jc))call TriggerAddAction(QA,function hc)set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function Pc))call TriggerAddAction(QA,function Mc)set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function Tc))call TriggerAddAction(QA,function Sc)set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function Yc))call TriggerAddAction(QA,function Wc)set fo[0]='u003'set fo[1]='u000'set fo[2]='h00Y'set fo[3]='h001'set fo[4]='u004'set fo[5]='u006'set fo[6]='u008'set fo[7]='h01K'set fo[8]='u00B'set fo[9]='h01Q'set fo[$A]='u00A'set Fo[0]='A045'set Fo[1]='A046'set Fo[2]='A044'set Fo[3]='A04C'set Fo[4]='A049'set Fo[5]='A04B'set Fo[6]='A048'set Fo[7]='A047'set Fo[8]='A043'set Fo[9]='A04D'set Fo[$A]='A04W'set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function xC))call TriggerAddAction(QA,function vC)set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function nC))call TriggerAddAction(QA,function oC)set QA=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_TRAIN_FINISH)call TriggerAddAction(QA,function OC)set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function cC))call TriggerAddAction(QA,function bC)set go[0]='n01R'set go[1]='n01L'set go[2]='n01N'set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function fC))call TriggerAddAction(QA,function dC)set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function JC))call TriggerAddAction(QA,function HC)set QA=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_CONSTRUCT_START)call TriggerAddAction(QA,function KC)set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function mC))call TriggerAddAction(QA,function lC)set QA=nullset QA=CreateTrigger()call qA(QA,Condition(function qC))call TriggerAddAction(QA,function pC)set QA=nullset yD=CreateTrigger()set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(yD,EVENT_PLAYER_UNIT_SELL_ITEM)call TriggerAddCondition(yD,Condition(function YC))set t=nullset yD=nullset QA=CreateTrigger()call qA(QA,Condition(function Dd))call TriggerAddAction(QA,function Cd)set QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_DEATH)call TriggerAddAction(QA,function bd)set QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddAction(QA,function Ad)set QA=nullset yD=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(yD,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)call TriggerAddCondition(yD,Condition(function Jd))set yD=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(yD,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(yD,Condition(function Ld))set yD=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(QA,Condition(function md))set QA=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(QA,Condition(function Md))set QA=nullset YD=CreateTrigger()set zD=CreateTrigger()set ZD=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(YD,EVENT_PLAYER_UNIT_CONSTRUCT_FINISH)call TriggerAddCondition(YD,Condition(function Pd))call TriggerRegisterAnyUnitEventBJ(ZD,EVENT_PLAYER_UNIT_TRAIN_FINISH)call TriggerAddCondition(ZD,Condition(function qd))call TriggerRegisterAnyUnitEventBJ(zD,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(zD,Condition(function pd))set ZD=nullset zD=nullset YD=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(QA,Condition(function Qd))set QA=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(QA,Condition(function sd))set QA=nullset QA=CreateTrigger()set YD=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(QA,Condition(function Sd))call TriggerRegisterAnyUnitEventBJ(YD,EVENT_PLAYER_UNIT_CONSTRUCT_FINISH)call TriggerAddCondition(YD,Condition(function td))set YD=nullset QA=nullset YD=CreateTrigger()set uo=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(YD,EVENT_PLAYER_UNIT_CONSTRUCT_FINISH)call TriggerAddCondition(uo,Condition(function Td))call TriggerAddCondition(YD,Condition(function ud))set YD=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(QA,Condition(function Ud))set QA=nullset t=CreateTrigger()call TriggerRegisterPlayerChatEvent(t,Player(8),"-kill",true)call TriggerAddAction(t,function wd)set t=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)call TriggerAddCondition(QA,Condition(function Wd))call TriggerAddAction(QA,function Zd)set xr[0]='n00G'set xr[1]='n00B'set xr[2]='n000'set xr[3]='n01B'set xr[4]='n001'set xr[5]='h019'set xr[6]='n012'set xr[7]='h009'set xr[8]='n01D'set xr[9]='n01E'set xr[$A]='n00F'set xr[$B]='n00J'set xr[$C]='n003'set xr[$D]='n004'set xr[$E]='n00C'set xr[$F]='h002'set xr[16]='obSD'set xr[17]='obBD'set xr[18]='n010'set xr[19]='n013'set xr[20]='n006'set xr[21]='h01M'set xr[22]='n00P'set xr[23]='n01C'set xr[24]='h00H'set xr[25]='h0nn'set QA=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)call TriggerAddCondition(QA,Condition(function eD))set QA=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(QA,Condition(function xD))set QA=nullset QA=CreateTrigger()set rr[0]='I00M'set rr[1]='I009'set rr[2]='I00A'set rr[3]='I00L'set ir[0]='A03Y'set ir[1]='A03Z'set ir[2]='A040'set ir[3]='A041'call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(QA,Condition(function rD))set QA=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(QA,Condition(function iD))set ar[0]=0set ar[1]='RAhr'set ar[2]='RAlr'set ar[3]='MEds'set ar[4]='FDbh'set ar[5]='FDbl'set ar[6]='FDgh'set ar[7]='FDgl'set ar[8]='FDrh'set ar[9]='FDrl'set ar[$A]='FDwh'set ar[$B]='FDwl'set ar[$C]='RLhr'set ar[$D]='RLlr'set ar[$E]='SNbs'set ar[$F]='SNhs'set ar[16]='SNls'set ar[17]='WOcw'set ar[18]='WOlw'set ar[19]='LRaa'set ar[20]='LRma'set ar[21]='WNcw'set nr[0]="None"set nr[1]="Ashenvale Rain (Heavy)"set nr[2]="Ashenvale Rain (Light)"set nr[3]="Dalaran Shield"set nr[4]="Dungeon Fog Blue (Heavy)"set nr[5]="Dungeon Fog Blue (Light)"set nr[6]="Dungeon Fog Green (Heavy)"set nr[7]="Dungeon Fog Green (Light)"set nr[8]="Dungeon Fog Red (Heavy)"set nr[9]="Dungeon Fog Red (Light)"set nr[$A]="Dungeon Fog White (Heavy)"set nr[$B]="Dungeon Fog White (Light)"set nr[$C]="Lordaeron Rain (Heavy)"set nr[$D]="Lordaeron Rain (Light)"set nr[$E]="Northrend Blizzard"set nr[$F]="Northrend Snow (Heavy)"set nr[16]="Northrend Snow (Light)"set nr[17]="Outland Wind (Heavy)"set nr[18]="Outland Wind (Light)"set nr[19]="Rays of Light"set nr[20]="Rays of Moonlight"set nr[21]="Wind (Heavy)"set Er[1]='A03D'set Er[2]='A03A'set Er[3]='A039'set Er[4]='A03C'set Er[5]='A038'set Er[6]='A02Y'set Er[7]='A02X'set Er[8]='A037'set Er[9]='A036'set Er[$A]='A035'set Er[$B]='A034'set Er[$C]='A033'set Er[$D]='A032'set Er[$E]='A031'set Er[$F]='A02Z'set Er[16]='A030'set Er[17]='A02W'set Er[18]='A02V'set Er[19]='A02U'set Er[20]='A03B'set Er[21]='A03E'set QA=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(QA,Condition(function nD))set QA=nullset t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_SPELL_EFFECT)call TriggerAddCondition(t,Condition(function ED))call TriggerAddAction(t,function XD)set Xr[0]='A02Q'set Xr[1]='A00M'set Rr[0]=4set t=nullset QA=CreateTrigger()set Ir=CreateGroup()call TriggerRegisterTimerEvent(QA,.03,true)call TriggerAddCondition(QA,Condition(function ND))set QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(QA,Condition(function bD))set QA=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_CONSTRUCT_FINISH)call TriggerAddCondition(QA,Condition(function BD))set QA=nullset kt=CreateTrigger()set Nr=CreateTrigger()call TriggerAddCondition(kt,Condition(function CD))call TriggerAddCondition(Nr,Condition(function cD))set t=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(t,EVENT_PLAYER_UNIT_PICKUP_ITEM)call TriggerAddAction(t,function fD)set Cr=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(Cr,EVENT_PLAYER_UNIT_DROP_ITEM)call TriggerAddAction(Cr,function DD)set br=zI()call TimerStart(br,.3,true,function FD)set t=nullset QA=CreateTrigger()call TriggerRegisterAnyUnitEventBJ(QA,EVENT_PLAYER_UNIT_SPELL_CAST)call TriggerAddCondition(QA,Condition(function GD))set QA=nullset dr=CreateGroup()set Fr=CreateTrigger()call TriggerAddCondition(Fr,Condition(function MD))set fr=CreateGroup()set gr[0]='h01Q'set gr[1]='h00C'set gr[2]='h01T'set gr[3]='n01D'set gr[4]='n01B'set gr[5]='n01E'set gr[6]='n000'set gr[7]='n00J'set gr[8]='n00B'set gr[9]='n00C'set gr[$A]='n002'set gr[$B]='n004'set gr[$C]='h00H'set QA=CreateTrigger()call TriggerRegisterTimerEvent(QA,.01,false)call TriggerAddAction(QA,function UD)set QA=nullset de=CreateTrigger()call TriggerRegisterTimerEventSingle(de,.1)call TriggerAddAction(de,function lD)set De=CreateTrigger()call TriggerRegisterTimerEventSingle(De,10.)call TriggerRegisterTimerEventPeriodic(De,300.)call TriggerAddAction(De,function wD)call ConditionalTriggerExecute(Ce)endfunctionfunction config takes nothing returns nothingcall SetMapName("TRIGSTR_001")call SetMapDescription("TRIGSTR_003")call SetPlayers($C)call SetTeams($C)call SetGamePlacement(MAP_PLACEMENT_TEAMS_TOGETHER)call DefineStartLocation(0,-128.,-64.)call DefineStartLocation(1,-128.,-64.)call DefineStartLocation(2,-128.,-64.)call DefineStartLocation(3,-128.,-64.)call DefineStartLocation(4,-128.,-64.)call DefineStartLocation(5,-128.,-64.)call DefineStartLocation(6,-128.,-64.)call DefineStartLocation(7,-128.,-64.)call DefineStartLocation(8,-128.,-64.)call DefineStartLocation(9,-128.,-64.)call DefineStartLocation($A,-128.,-64.)call DefineStartLocation($B,-128.,-64.)call SetPlayerStartLocation(Player(0),0)call ForcePlayerStartLocation(Player(0),0)call SetPlayerColor(Player(0),ConvertPlayerColor(0))call SetPlayerRacePreference(Player(0),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(0),false)call SetPlayerController(Player(0),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(1),1)call ForcePlayerStartLocation(Player(1),1)call SetPlayerColor(Player(1),ConvertPlayerColor(1))call SetPlayerRacePreference(Player(1),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(1),false)call SetPlayerController(Player(1),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(2),2)call ForcePlayerStartLocation(Player(2),2)call SetPlayerColor(Player(2),ConvertPlayerColor(2))call SetPlayerRacePreference(Player(2),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(2),false)call SetPlayerController(Player(2),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(3),3)call ForcePlayerStartLocation(Player(3),3)call SetPlayerColor(Player(3),ConvertPlayerColor(3))call SetPlayerRacePreference(Player(3),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(3),false)call SetPlayerController(Player(3),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(4),4)call ForcePlayerStartLocation(Player(4),4)call SetPlayerColor(Player(4),ConvertPlayerColor(4))call SetPlayerRacePreference(Player(4),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(4),false)call SetPlayerController(Player(4),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(5),5)call ForcePlayerStartLocation(Player(5),5)call SetPlayerColor(Player(5),ConvertPlayerColor(5))call SetPlayerRacePreference(Player(5),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(5),false)call SetPlayerController(Player(5),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(6),6)call ForcePlayerStartLocation(Player(6),6)call SetPlayerColor(Player(6),ConvertPlayerColor(6))call SetPlayerRacePreference(Player(6),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(6),false)call SetPlayerController(Player(6),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(7),7)call ForcePlayerStartLocation(Player(7),7)call SetPlayerColor(Player(7),ConvertPlayerColor(7))call SetPlayerRacePreference(Player(7),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(7),false)call SetPlayerController(Player(7),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(8),8)call ForcePlayerStartLocation(Player(8),8)call SetPlayerColor(Player(8),ConvertPlayerColor(8))call SetPlayerRacePreference(Player(8),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(8),false)call SetPlayerController(Player(8),MAP_CONTROL_USER)call SetPlayerStartLocation(Player(9),9)call ForcePlayerStartLocation(Player(9),9)call SetPlayerColor(Player(9),ConvertPlayerColor(9))call SetPlayerRacePreference(Player(9),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player(9),false)call SetPlayerController(Player(9),MAP_CONTROL_USER)call SetPlayerStartLocation(Player($A),$A)call ForcePlayerStartLocation(Player($A),$A)call SetPlayerColor(Player($A),ConvertPlayerColor($A))call SetPlayerRacePreference(Player($A),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player($A),false)call SetPlayerController(Player($A),MAP_CONTROL_USER)call SetPlayerStartLocation(Player($B),$B)call ForcePlayerStartLocation(Player($B),$B)call SetPlayerColor(Player($B),ConvertPlayerColor($B))call SetPlayerRacePreference(Player($B),RACE_PREF_HUMAN)call SetPlayerRaceSelectable(Player($B),false)call SetPlayerController(Player($B),MAP_CONTROL_COMPUTER)call InitCustomTeams()call SetStartLocPrioCount(0,$A)call SetStartLocPrio(0,0,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,1,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,2,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,4,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,5,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(0,9,$A,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(1,$A)call SetStartLocPrio(1,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,1,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,2,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,4,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,5,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(1,9,$A,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(2,$A)call SetStartLocPrio(2,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,2,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,4,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,5,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(2,9,$A,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(3,$A)call SetStartLocPrio(3,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,3,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,4,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,5,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(3,9,$A,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(4,$A)call SetStartLocPrio(4,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,4,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,5,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(4,9,$A,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(5,$A)call SetStartLocPrio(5,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,4,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,5,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(5,9,$A,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(6,$A)call SetStartLocPrio(6,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,4,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,5,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,6,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(6,9,$A,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(7,$A)call SetStartLocPrio(7,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,4,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,5,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,6,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,7,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(7,9,$A,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(8,$A)call SetStartLocPrio(8,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,4,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,5,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,6,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,7,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,8,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(8,9,$A,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount(9,$A)call SetStartLocPrio(9,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,4,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,5,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,6,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,7,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,8,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio(9,9,$A,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount($A,$A)call SetStartLocPrio($A,0,0,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,1,1,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,2,2,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,3,3,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,4,4,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,5,5,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,6,6,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,7,7,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,8,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($A,9,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrioCount($B,3)call SetStartLocPrio($B,0,8,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($B,1,9,MAP_LOC_PRIO_HIGH)call SetStartLocPrio($B,2,$A,MAP_LOC_PRIO_HIGH)endfunctionfunction GR takes nothing returns nothingcall OB()call jB()call PB()call xN()endfunctionfunction ef takes nothing returns booleanset RX=gD(eX)return trueendfunctionfunction xf takes nothing returns booleanset RX=Id(eX)return trueendfunctionfunction of takes nothing returns booleanset RX=SC(rX)return trueendfunctionfunction rf takes nothing returns booleanlocal integer yX=XXcall DestroyTrigger(oV[yX])call RemoveRect(eV[yX])call RemoveRegion(vV[yX])return trueendfunctionfunction af takes nothing returns booleanlocal integer yX=XXset Sr=Sr-1return trueendfunctionfunction nf takes nothing returns booleanlocal integer yX=XXlocal integer WR=wr[yX]local integer yRloopexitwhen WR==0set yR=Qr[WR]call PR(WR)set WR=yRendloopreturn trueendfunctionfunction Vf takes nothing returns booleanlocal integer yX=XXlocal integer iO=vXlocal string s=""local integer nN=0loopexitwhen not(nN<=iO)set s=s+"|"set nN=nN+1endloopset OX=sreturn trueendfunctionfunction Ef takes nothing returns booleanlocal integer yX=XXlocal integer nloopset n=Ei[yX]exitwhen n==0set Ei[yX]=Oi[n]set Oi[n]=Xiset Xi=nendloopreturn trueendfunctionfunction Xf takes nothing returns booleanlocal integer yX=XXcall LI(yX)return trueendfunctionfunction Of takes nothing returns booleanlocal integer yX=XXcall RemoveSavedInteger(jv,va[yX],GetHandleId(Zi[yX]))call ZI(zi[yX])return trueendfunctionfunction Rf takes nothing returns booleanlocal integer yX=XXcall YR(aa[yX])return trueendfunctionfunction If takes nothing returns booleanlocal integer yX=XXset La[yX]=nullcall DestroyEffect(Qa[yX])set Qa[yX]=nullreturn trueendfunctionfunction Af takes nothing returns booleanset RX=vB(eX,xX,oX)return trueendfunctionfunction Nf takes nothing returns booleanlocal integer yX=XXset IX=GI(eB(yX),xB(yX),rB(yX),iB(yX))return trueendfunctionfunction bf takes nothing returns booleanset RX=MB(eX,xX)return trueendfunctionfunction Bf takes nothing returns booleanlocal integer yX=XXcall DestroyTrigger(ga[yX])set ga[yX]=nullset XX=yXreturn trueendfunctionfunction cf takes nothing returns booleanset RX=hB(eX,xX)return trueendfunctionfunction Cf takes nothing returns booleanset RX=fB(eX,xX)return trueendfunctionfunction df takes nothing returns booleanlocal integer yX=XXcall DestroyTrigger(fa[yX])set XX=yXreturn trueendfunctionfunction Df takes nothing returns booleanset RX=yB(eX,xX)return trueendfunctionfunction ff takes nothing returns booleanlocal integer yX=XXcall DestroyTextTag(ha[yX])set Ha[yX]=0set Ja[yX]=0set ja[yX]=0set XX=yXreturn trueendfunctionfunction Ff takes nothing returns booleanset RX=ac(eX,xX)return trueendfunctionfunction gf takes nothing returns booleanlocal integer yX=XXset XX=yXreturn trueendfunctionfunction Gf takes nothing returns booleanset RX=Ic(eX,xX)return trueendfunctionfunction hf takes nothing returns booleanlocal integer yX=XXcall ForGroup(Sa[yX],function Nc)call II(Sa[yX])call DestroyTrigger(ta[yX])call ZI(ua[yX])set ta[yX]=nullset XX=yXreturn trueendfunctionfunction Hf takes nothing returns booleanset RX=fc(eX,xX)return trueendfunctionfunction jf takes nothing returns booleanlocal integer yX=XXcall ZI(wa[yX])call DestroyTrigger(Wa[yX])set XX=yXreturn trueendfunctionfunction Jf takes nothing returns booleanset RX=Hc(eX,xX)return trueendfunctionfunction kf takes nothing returns booleanlocal integer yX=XXcall II(Ya[yX])call DestroyTrigger(za[yX])call ZI(vn[yX])set XX=yXreturn trueendfunctionfunction Kf takes nothing returns booleanset RX=pc(eX,xX)return trueendfunctionfunction lf takes nothing returns booleanlocal integer yX=XXcall DestroyTrigger(xn[yX])set en[yX]=0set XX=yXreturn trueendfunctionfunction Lf takes nothing returns booleanset RX=tc(eX,xX)return trueendfunctionfunction mf takes nothing returns booleanlocal integer yX=XXcall dR(an[yX])call dR(nn[yX])call DestroyTrigger(Xn[yX])set an[yX]=nullset nn[yX]=nullset Xn[yX]=nullset XX=yXreturn trueendfunctionfunction Mf takes nothing returns booleanset RX=yc(eX,xX)return trueendfunctionfunction pf takes nothing returns booleanlocal integer yX=XXcall ZI(In[yX])call DestroyTrigger(An[yX])set An[yX]=nullset XX=yXreturn trueendfunctionfunction Pf takes nothing returns booleanset RX=eC(eX,xX)return trueendfunctionfunction qf takes nothing returns booleanlocal integer yX=XXcall DestroyTrigger(bn[yX])set XX=yXreturn trueendfunctionfunction Qf takes nothing returns booleanset RX=rC(eX,xX)return trueendfunctionfunction sf takes nothing returns booleanlocal integer yX=XXcall QX((Bn[yX])*($80)+cn[yX],false)set XX=yXreturn trueendfunctionfunction Sf takes nothing returns booleanset RX=RC(eX,xX)return trueendfunctionfunction tf takes nothing returns booleanlocal integer yX=XXcall DestroyTrigger(Cn[yX])call ZI(hn[yX])set Cn[yX]=nullset XX=yXreturn trueendfunctionfunction Tf takes nothing returns booleanset RX=BC(eX,xX)return trueendfunctionfunction uf takes nothing returns booleanlocal integer yX=XXcall II(Hn[yX])if mn[yX] thencall ZI(Jn[yX])endifcall ZI(kn[yX])call dR(ln[yX])call RemoveRect(Kn[yX])set ln[yX]=nullset XX=yXreturn trueendfunctionfunction Uf takes nothing returns booleanset RX=DC(eX,xX)return trueendfunctionfunction wf takes nothing returns booleanlocal integer yX=XXset XX=yXreturn trueendfunctionfunction Wf takes nothing returns booleanlocal integer yX=XXlocal integer XOset Tn=Tn+1set XO=un[yX]set Un[Tn]=XOreturn trueendfunctionfunction yf takes nothing returns booleanset RX=jC(eX,xX)return trueendfunctionfunction Yf takes nothing returns booleanlocal integer yX=XXlocal integer i=0call ZI(Pn[yX])call II(qn[yX])call DestroyTrigger(Qn[yX])loopif sn[Sn[yX]+i]!=null thencall DestroyLightning(sn[Sn[yX]+i])set sn[Sn[yX]+i]=nullendifset i=i+1exitwhen i>9endloopset XX=yXreturn trueendfunctionfunction zf takes nothing returns booleanset RX=LC(eX,xX)return trueendfunctionfunction Zf takes nothing returns booleanlocal integer yX=XXcall RemoveDestructable(Wn[yX])set XX=yXreturn trueendfunctionfunction vF takes nothing returns booleanset RX=PC(eX,xX)return trueendfunctionfunction eF takes nothing returns booleanlocal integer yX=XXcall dR(yn[yX])set XX=yXreturn trueendfunctionfunction xF takes nothing returns booleanset RX=dd(eX,xX)return trueendfunctionfunction oF takes nothing returns booleancall XI(iX)return trueendfunctionfunction rF takes nothing returns booleancall NI(aX)return trueendfunctionfunction iF takes nothing returns booleancall DN(nX,VX,EX)return trueendfunctionfunction aF takes nothing returns booleancall gN(nX)return trueendfunctionfunction nF takes nothing returns booleancall EB(eX)return trueendfunctionfunction vf takes nothing returns nothingset UE=CreateTrigger()call TriggerAddCondition(UE,Condition(function ef))set TE=CreateTrigger()call TriggerAddCondition(TE,Condition(function xf))set SE=CreateTrigger()call TriggerAddCondition(SE,Condition(function of))set tE=CreateTrigger()call TriggerAddCondition(tE,Condition(function rf))set IE=CreateTrigger()call TriggerAddCondition(IE,Condition(function af))set AE=CreateTrigger()call TriggerAddCondition(AE,Condition(function nf))set NE=CreateTrigger()call TriggerAddCondition(NE,Condition(function Vf))set bE=CreateTrigger()call TriggerAddCondition(bE,Condition(function Ef))set XE[$A]=CreateTrigger()set XE[$B]=XE[$A]set XE[$C]=XE[$A]set XE[$D]=XE[$A]call TriggerAddCondition(XE[$A],Condition(function Xf))set BE=CreateTrigger()call TriggerAddCondition(BE,Condition(function Of))set cE=CreateTrigger()call TriggerAddCondition(cE,Condition(function Rf))set GE=CreateTrigger()call TriggerAddCondition(GE,Condition(function If))set CE=CreateTrigger()call TriggerAddCondition(CE,Condition(function Af))set dE=CreateTrigger()call TriggerAddCondition(dE,Condition(function Nf))set RE[19]=nullset RE[21]=nullset RE[43]=nullset RE[44]=nullset FE=CreateTrigger()call TriggerAddCondition(FE,Condition(function bf))set RE[22]=CreateTrigger()call TriggerAddCondition(RE[22],Condition(function Bf))set fE=CreateTrigger()call TriggerAddCondition(fE,Condition(function cf))set DE=CreateTrigger()call TriggerAddCondition(DE,Condition(function Cf))set RE[20]=CreateTrigger()call TriggerAddCondition(RE[20],Condition(function df))set gE=CreateTrigger()call TriggerAddCondition(gE,Condition(function Df))set RE[23]=CreateTrigger()call TriggerAddCondition(RE[23],Condition(function ff))set hE=CreateTrigger()call TriggerAddCondition(hE,Condition(function Ff))set RE[25]=CreateTrigger()call TriggerAddCondition(RE[25],Condition(function gf))set HE=CreateTrigger()call TriggerAddCondition(HE,Condition(function Gf))set RE[26]=CreateTrigger()call TriggerAddCondition(RE[26],Condition(function hf))set jE=CreateTrigger()call TriggerAddCondition(jE,Condition(function Hf))set RE[27]=CreateTrigger()call TriggerAddCondition(RE[27],Condition(function jf))set JE=CreateTrigger()call TriggerAddCondition(JE,Condition(function Jf))set RE[28]=CreateTrigger()call TriggerAddCondition(RE[28],Condition(function kf))set kE=CreateTrigger()call TriggerAddCondition(kE,Condition(function Kf))set RE[29]=CreateTrigger()call TriggerAddCondition(RE[29],Condition(function lf))set KE=CreateTrigger()call TriggerAddCondition(KE,Condition(function Lf))set RE[30]=CreateTrigger()call TriggerAddCondition(RE[30],Condition(function mf))set lE=CreateTrigger()call TriggerAddCondition(lE,Condition(function Mf))set RE[31]=CreateTrigger()call TriggerAddCondition(RE[31],Condition(function pf))set LE=CreateTrigger()call TriggerAddCondition(LE,Condition(function Pf))set RE[32]=CreateTrigger()call TriggerAddCondition(RE[32],Condition(function qf))set mE=CreateTrigger()call TriggerAddCondition(mE,Condition(function Qf))set RE[33]=CreateTrigger()call TriggerAddCondition(RE[33],Condition(function sf))set ME=CreateTrigger()call TriggerAddCondition(ME,Condition(function Sf))set RE[34]=CreateTrigger()call TriggerAddCondition(RE[34],Condition(function tf))set pE=CreateTrigger()call TriggerAddCondition(pE,Condition(function Tf))set RE[35]=CreateTrigger()call TriggerAddCondition(RE[35],Condition(function uf))set PE=CreateTrigger()call TriggerAddCondition(PE,Condition(function Uf))set RE[36]=CreateTrigger()call TriggerAddCondition(RE[36],Condition(function wf))set qE=CreateTrigger()call TriggerAddCondition(qE,Condition(function yf))set RE[37]=CreateTrigger()call TriggerAddCondition(RE[37],Condition(function Yf))call TriggerAddCondition(RE[37],Condition(function Wf))set QE=CreateTrigger()call TriggerAddCondition(QE,Condition(function zf))set RE[39]=CreateTrigger()call TriggerAddCondition(RE[39],Condition(function Zf))set sE=CreateTrigger()call TriggerAddCondition(sE,Condition(function vF))set RE[40]=CreateTrigger()call TriggerAddCondition(RE[40],Condition(function eF))set uE=CreateTrigger()call TriggerAddCondition(uE,Condition(function xF))set wE[1]=CreateTrigger()call TriggerAddAction(wE[1],function oF)call TriggerAddCondition(wE[1],Condition(function oF))set WE[1]=CreateTrigger()call TriggerAddAction(WE[1],function rF)call TriggerAddCondition(WE[1],Condition(function rF))set zE[1]=CreateTrigger()call TriggerAddAction(zE[1],function iF)call TriggerAddCondition(zE[1],Condition(function iF))set ZE[1]=CreateTrigger()call TriggerAddAction(ZE[1],function aF)call TriggerAddCondition(ZE[1],Condition(function aF))set YE[1]=CreateTrigger()call TriggerAddAction(YE[1],function nF)call TriggerAddCondition(YE[1],Condition(function nF))call ExecuteFunc("JR")call ExecuteFunc("lI")call ExecuteFunc("mI")endfunction